<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Camino Portugu√©s de la Costa - Etapas 1 a 8</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: #f5f5f5; color: #333; }
        .container { max-width: 1400px; margin: 0 auto; padding: 20px; }
        header { background: linear-gradient(135deg, #2c3e50 0%, #34595e 100%); color: white; padding: 40px; margin-bottom: 40px; border-radius: 8px; text-align: center; }
        header h1 { font-size: 2.5em; margin-bottom: 10px; }
        header p { font-size: 1.1em; opacity: 0.9; }
        .stats-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 20px; margin-top: 30px; }
        .stat { background: rgba(255,255,255,0.1); padding: 20px; border-radius: 5px; border-left: 4px solid #f39c12; }
        .stat-number { font-size: 1.8em; font-weight: bold; margin-bottom: 5px; }
        .stat-label { font-size: 0.9em; opacity: 0.8; }

        .whatsapp-banner { background: linear-gradient(135deg, #25d366 0%, #20ba58 100%); color: white; padding: 25px; margin-bottom: 30px; border-radius: 8px; text-align: center; box-shadow: 0 4px 15px rgba(37,211,102,0.3); }
        .whatsapp-banner h2 { margin-bottom: 10px; font-size: 1.5em; }
        .whatsapp-banner p { font-size: 0.95em; margin-bottom: 10px; }
        .whatsapp-btn { display: inline-block; background: white; color: #25d366; padding: 12px 30px; border-radius: 5px; text-decoration: none; font-weight: bold; margin-top: 10px; transition: transform 0.3s; }
        .whatsapp-btn:hover { transform: scale(1.05); }

        .etapas-container { display: grid; gap: 30px; }
        .etapa { background: white; padding: 30px; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); border-left: 5px solid #e74c3c; position: relative; }
        .etapa-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; border-bottom: 2px solid #ecf0f1; padding-bottom: 15px; }
        .etapa-title { font-size: 1.8em; color: #2c3e50; margin: 0; }
        .etapa-meta { display: flex; gap: 20px; font-size: 0.95em; }
        .meta-item { display: flex; align-items: center; gap: 8px; }
        .meta-label { font-weight: bold; color: #7f8c8d; }
        .meta-value { color: #2c3e50; }
        .etapa-intro { background: #f8f9fa; padding: 20px; border-radius: 5px; margin-bottom: 25px; border-left: 4px solid #3498db; line-height: 1.6; }
        .etapa-stats { display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px; margin-bottom: 25px; }
        .stat-box { background: #ecf0f1; padding: 15px; border-radius: 5px; text-align: center; }
        .stat-box-value { font-size: 1.5em; font-weight: bold; color: #e74c3c; margin-bottom: 5px; }
        .stat-box-label { font-size: 0.9em; color: #7f8c8d; }
        .btn-modal { display: inline-block; margin-top: 10px; padding: 10px 20px; background: #3498db; color: #fff; border-radius: 5px; text-decoration: none; font-size: 0.95em; font-weight: 600; border: none; cursor: pointer; transition: background 0.2s ease; }
        .btn-modal:hover { background: #2980b9; }

        .extra-card { background: #ffffff; border-radius: 6px; padding: 15px 18px; box-shadow: 0 1px 4px rgba(0,0,0,0.08); border-top: 3px solid #3498db; }
        .extra-card h4 { margin-bottom: 8px; font-size: 1.05em; color: #2c3e50; }
        .extra-card p, .extra-card ul { font-size: 0.9em; color: #555; line-height: 1.4; }
        .extra-card ul { padding-left: 18px; margin-top: 5px; }

        .accommodation-card { background: linear-gradient(135deg, #e8f5e9 0%, #f1f8e9 100%); border-left: 4px solid #27ae60; padding: 15px; border-radius: 6px; margin-bottom: 12px; }
        .accommodation-card h4 { color: #27ae60; margin-bottom: 8px; font-size: 1.05em; }
        .accommodation-details { font-size: 0.85em; color: #555; line-height: 1.6; margin-bottom: 10px; }
        .accommodation-detail-line { margin-bottom: 5px; }

        .expandible-text { position: relative; }
        .expandible-content { max-height: none; overflow: hidden; position: relative; transition: max-height 0.4s ease; }
        .expandible-content.collapsed { max-height: 450px; }
        .expandible-fade { position: absolute; bottom: 0; left: 0; right: 0; height: 80px; background: linear-gradient(transparent, #ffffff); pointer-events: none; }
        .expandible-content.collapsed .expandible-fade { display: block; }
        .expandible-content:not(.collapsed) .expandible-fade { display: none; }
        .btn-expandible { display: inline-block; margin-top: 10px; padding: 6px 14px; background: #3498db; color: white; border-radius: 4px; text-decoration: none; font-size: 0.8em; font-weight: 600; border: none; cursor: pointer; transition: background 0.2s ease; }
        .btn-expandible:hover { background: #2980b9; }

        .tramo { background: #f8f9fa; padding: 12px 15px; margin-bottom: 10px; border-radius: 5px; border-left: 4px solid #3498db; transition: background 0.2s ease; }
        .tramo.open { background: #ffffff; }
        .tramo-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px; cursor: pointer; user-select: none; }
        .tramo-header h4 { margin: 0; font-size: 0.95em; }
        .tramo-header-right { display: flex; align-items: center; gap: 12px; }
        .tramo-distance { background: #e74c3c; color: white; padding: 4px 10px; border-radius: 15px; font-weight: bold; font-size: 0.8em; }
        .tramo-toggle-icon { font-size: 1.1em; color: #7f8c8d; font-weight: bold; min-width: 18px; text-align: center; }
        .tramo-content { line-height: 1.6; color: #444; display: none; font-size: 0.9em; }
        .tramo.open .tramo-content { display: block; }
        .tramo-content p { margin-bottom: 8px; }

        .punto-parada { background: white; padding: 10px; margin-top: 10px; border-radius: 4px; border-left: 3px solid #27ae60; font-size: 0.85em; }
        .punto-parada-nombre { font-weight: bold; color: #27ae60; font-size: 0.95em; margin-bottom: 4px; }
        .distancia-acumulada { font-size: 0.8em; color: #7f8c8d; font-style: italic; }

        .modal-backdrop { position: fixed; inset: 0; background: rgba(0,0,0,0.55); display: none; align-items: center; justify-content: center; z-index: 1000; }
        .modal-backdrop.show { display: flex; }
        .modal-panel { background: #ffffff; max-width: 1100px; width: 95%; max-height: 90vh; border-radius: 10px; box-shadow: 0 10px 35px rgba(0,0,0,0.35); display: flex; flex-direction: column; overflow: hidden; }
        .modal-header { padding: 16px 24px; border-bottom: 1px solid #ecf0f1; display: flex; justify-content: space-between; align-items: center; background: #f8f9fb; }
        .modal-header h2 { font-size: 1.3em; margin: 0; }
        .modal-close { background: none; border: none; font-size: 1.5em; cursor: pointer; color: #7f8c8d; }
        .modal-body { padding: 20px 24px; overflow-y: auto; display: grid; grid-template-columns: 1fr 1fr; gap: 20px; }
        .modal-section { 
    min-width: 0; 
    margin-bottom: 25px; 
}

/* Ajuste para que el t√≠tulo y el icono se vean bien */
.modal-section h3 { 
    font-size: 1.1em; 
    margin-bottom: 12px; 
    color: #2c3e50; 
    border-bottom: 2px solid #e74c3c; 
    padding-bottom: 8px;
    display: block; /* Cambiamos flex por block para que ::first-letter funcione */
}

/* C√≠rculo base para todos los iconos de secci√≥n */
.modal-section h3::first-letter {
    background: #fff5f5; /* Rojo suave por defecto */
    padding: 5px 10px;
    border-radius: 50%;
    margin-right: 12px;
    border: 1px solid #fee2e2;
    box-shadow: 0 2px 4px rgba(0,0,0,0.08);
    float: left;
    line-height: 1;
}

/* --- COLORES EXPERTOS POR CATEGOR√çA --- */

/* Verde para Alojamiento üè® */
.sec-alojamiento::first-letter { 
    background: #e8f5e9 !important; 
    border-color: #c8e6c9 !important; 
}

/* Azul para Tramos y Puntos üìç */
.sec-tramos::first-letter { 
    background: #e3f2fd !important; 
    border-color: #bbdefb !important; 
}

/* Naranja para Gastronom√≠a üçΩÔ∏è */
.sec-gastronomia::first-letter { 
    background: #fff3e0 !important; 
    border-color: #ffe0b2 !important; 
}
        .btn-alojamiento { display: inline-block; margin-top: 12px; padding: 8px 16px; background: #27ae60; color: white; border-radius: 4px; text-decoration: none; font-size: 0.85em; font-weight: 600; border: none; cursor: pointer; transition: background 0.2s ease; }
        .btn-alojamiento:hover { background: #229954; }
        .btn-maps { display: inline-block; margin-top: 12px; margin-left: 8px; padding: 8px 16px; background: #4285f4; color: white; border-radius: 4px; text-decoration: none; font-size: 0.85em; font-weight: 600; border: none; cursor: pointer; transition: background 0.2s ease; }
        .btn-maps:hover { background: #3367d6; }

        .modal-left { grid-column: 1; }
        .modal-right { grid-column: 2; }

        @media (max-width: 900px) {
            .modal-body { grid-template-columns: 1fr; }
            .modal-left, .modal-right { grid-column: 1; }
        }
        @media (max-width: 768px) {
            .etapa-header { flex-direction: column; align-items: flex-start; }
            .etapa-meta { flex-direction: column; gap: 10px; margin-top: 15px; }
            .etapa-stats { grid-template-columns: 1fr; }
            header h1 { font-size: 1.8em; }
            .tramo-header { flex-direction: column; align-items: flex-start; }
            .tramo-header-right { width: 100%; margin-top: 8px; }
        }
        /* --- ESTILOS BARRA DE PROGRESO Y CHECKLIST --- */
.progress-section {
    background: white;
    padding: 25px;
    border-radius: 8px;
    box-shadow: 0 4px 15px rgba(0,0,0,0.1);
    margin-bottom: 30px;
    text-align: center;
}

.progress-label {
    font-weight: bold;
    color: #2c3e50;
    margin-bottom: 10px;
    display: flex;
    justify-content: space-between;
}

.progress-bar-bg {
    background-color: #ecf0f1;
    height: 25px;
    border-radius: 15px;
    overflow: hidden;
    position: relative;
}

.progress-bar-fill {
    background: linear-gradient(90deg, #27ae60, #2ecc71);
    height: 100%;
    width: 0%;
    transition: width 0.6s cubic-bezier(0.4, 0, 0.2, 1);
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    font-size: 0.8em;
    font-weight: bold;
    text-shadow: 0 1px 2px rgba(0,0,0,0.2);
}

/* Interruptor (Toggle) para cada etapa */
.check-container {
    margin-top: 15px;
    padding-top: 15px;
    border-top: 1px dashed #eee;
    display: flex;
    align-items: center;
    justify-content: space-between;
}

.check-label {
    font-weight: 600;
    color: #555;
    font-size: 0.9em;
}

/* Dise√±o del Switch */
.switch {
    position: relative;
    display: inline-block;
    width: 50px;
    height: 26px;
}

.switch input { 
    opacity: 0;
    width: 0;
    height: 0;
}

.slider {
    position: absolute;
    cursor: pointer;
    top: 0; left: 0; right: 0; bottom: 0;
    background-color: #ccc;
    transition: .4s;
    border-radius: 34px;
}

.slider:before {
    position: absolute;
    content: "";
    height: 18px;
    width: 18px;
    left: 4px;
    bottom: 4px;
    background-color: white;
    transition: .4s;
    border-radius: 50%;
}

input:checked + .slider {
    background-color: #27ae60;
}

input:checked + .slider:before {
    transform: translateX(24px);
}

/* Efecto visual cuando la etapa est√° completada */
.etapa.completed {
    border-left-color: #27ae60;
    background-color: #f9fff9;
}

.etapa.completed .etapa-title {
    color: #27ae60;
    text-decoration: line-through;
}

/* --- ESTILOS WIDGETS (TIEMPO Y DIARIO) ACTUALIZADO --- */
.widget-card {
    background: #fff;
    border-radius: 12px;
    box-shadow: 0 4px 15px rgba(0,0,0,0.08);
    overflow: hidden;
    border: 1px solid #eee;
    margin-bottom: 20px; /* Importante: crea espacio debajo del widget */
    font-family: 'Segoe UI', sans-serif;
}

.weather-header {
    background: linear-gradient(135deg, #6dd5fa 0%, #2980b9 100%);
    color: white;
    padding: 15px;
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.weather-info {
    display: flex;
    align-items: center;
    gap: 10px;
}

.weather-temp {
    font-size: 2.2em;
    font-weight: bold;
}

.weather-desc {
    font-size: 0.9em;
    opacity: 0.9;
    line-height: 1.2;
}

.weather-icon {
    font-size: 2.5em;
}

.diary-body {
    padding: 15px;
    background-color: #fdfbf7;
}

.diary-textarea {
    width: 100%;
    min-height: 150px; /* Un poco m√°s de espacio */
    border: 1px solid #e0d5c1; /* Borde sutil color arena */
    background-color: #fdfbf7; /* Color papel hueso */
    resize: vertical;
    font-family: 'Segoe Print', 'Comic Sans MS', cursive; /* Fuente tipo escritura a mano */
    font-size: 1em;
    color: #4b3621; /* Marr√≥n oscuro para simular tinta */
    line-height: 1.6em;
    outline: none;
    padding: 10px;
    border-radius: 4px;
    /* Efecto de l√≠neas de cuaderno */
    background-image: linear-gradient(#e1d9c6 1px, transparent 1px);
    background-size: 100% 1.6em;
    box-shadow: inset 0 1px 4px rgba(0,0,0,0.05);
}

.diary-footer {
    padding: 10px 15px;
    background: #f9f9f9;
    border-top: 1px solid #eee;
    font-size: 0.8em;
    color: #888;
    text-align: right;
    display: flex;
    justify-content: space-between;
}

/* --- ESTILOS MODO LISTA Y MOCHILA --- */

/* Transici√≥n suave para el cambio de vista */
.etapas-container .etapa {
    transition: all 0.3s ease;
}

/* --- MODO LISTA (Compacto) --- */
.etapas-container.list-mode {
    gap: 10px; /* Menos espacio entre tarjetas */
}

.etapas-container.list-mode .etapa {
    padding: 15px 20px;
    display: flex;
    align-items: center;
    justify-content: space-between;
    min-height: auto;
}

.etapas-container.list-mode .etapa-header {
    border-bottom: none;
    margin-bottom: 0;
    padding-bottom: 0;
    flex: 1;
    display: flex;
    align-items: center;
    flex-wrap: wrap;
    gap: 15px;
}

.etapas-container.list-mode .etapa-title {
    font-size: 1.1em;
    margin: 0;
    min-width: 250px;
}

.etapas-container.list-mode .etapa-meta {
    margin-top: 0;
    font-size: 0.85em;
    flex-direction: row;
    gap: 15px;
}

/* Ocultar elementos sobrantes en modo lista */
.etapas-container.list-mode .etapa-intro,
.etapas-container.list-mode .etapa-stats,
.etapas-container.list-mode .check-container, /* Ocultamos el switch grande */
.etapas-container.list-mode .progress-section {
    display: none; 
}

/* Bot√≥n "Ver detalles" en modo lista */
.etapas-container.list-mode .btn-modal {
    margin-top: 0;
    padding: 6px 12px;
    font-size: 0.8em;
    background: #ecf0f1;
    color: #333;
}

/* Ajuste m√≥vil para modo lista */
@media (max-width: 768px) {
    .etapas-container.list-mode .etapa { flex-direction: column; align-items: flex-start; gap: 10px; }
    .etapas-container.list-mode .etapa-header { flex-direction: column; align-items: flex-start; gap: 5px; }
    .etapas-container.list-mode .btn-modal { width: 100%; text-align: center; }
}

/* --- ESTILOS MOCHILA --- */
.backpack-group { margin-bottom: 25px; }
.backpack-group h3 { color: #e67e22; border-bottom: 2px solid #eee; padding-bottom: 8px; margin-bottom: 12px; font-size: 1.1em; }
.backpack-item { display: flex; align-items: center; padding: 10px; border-bottom: 1px dashed #f0f0f0; transition: background 0.2s; }
.backpack-item:hover { background: #fffcf5; }
.backpack-item input { transform: scale(1.3); margin-right: 12px; accent-color: #e67e22; cursor: pointer; }
.backpack-item label { cursor: pointer; flex: 1; font-size: 0.95em; color: #555; }
.backpack-item input:checked + label { text-decoration: line-through; color: #ccc; }

/* --- ESTILOS SOS FLOTANTE --- */
.btn-sos {
    position: fixed;
    bottom: 25px;
    right: 25px;
    width: 60px;
    height: 60px;
    background: #e74c3c;
    color: white;
    border: none;
    border-radius: 50%;
    font-size: 24px;
    cursor: pointer;
    box-shadow: 0 4px 15px rgba(0,0,0,0.3);
    z-index: 9999; /* Siempre encima de todo */
    display: flex;
    align-items: center;
    justify-content: center;
    transition: transform 0.2s;
    animation: pulse-red 2s infinite;
}

.btn-sos:hover {
    transform: scale(1.1);
    background: #c0392b;
}

@keyframes pulse-red {
    0% { box-shadow: 0 0 0 0 rgba(231, 76, 60, 0.7); }
    70% { box-shadow: 0 0 0 15px rgba(231, 76, 60, 0); }
    100% { box-shadow: 0 0 0 0 rgba(231, 76, 60, 0); }
}

/* --- ESTILO BOT√ìN RUTA MAPA --- */
.btn-route-map {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 10px;
    width: 100%;
    padding: 14px;
    margin-top: 20px;
    margin-bottom: 20px;
    background: #ffffff;
    border: 2px solid #4285f4;
    color: #4285f4;
    font-size: 1em;
    font-weight: bold;
    border-radius: 8px;
    text-decoration: none;
    transition: all 0.3s ease;
    box-shadow: 0 2px 5px rgba(0,0,0,0.05);
}

.btn-route-map:hover {
    background: #4285f4;
    color: white;
    box-shadow: 0 4px 12px rgba(66, 133, 244, 0.3);
    transform: translateY(-2px);
}

/* --- CABECERA HERO STYLE (DISE√ëO NUEVO) --- */
header {
    /* Imagen de fondo (Costa/Camino) con un filtro oscuro encima para que se lea el texto */
    background: linear-gradient(rgba(0, 0, 0, 0.6), rgba(0, 0, 0, 0.7)), 
                url('https://estaticos-cdn.prensaiberica.es/clip/6bbb0fed-2234-4eac-b78e-77702924fd41_alta-libre-aspect-ratio_default_0.jpg');
    background-size: cover;
    background-position: center;
    background-attachment: fixed; /* Efecto Parallax chulo al hacer scroll */
    color: white;
    padding: 60px 20px 140px 20px; /* Aumentamos el espacio de abajo a 140px */
    margin-bottom: 40px;
    border-radius: 0 0 25px 25px; /* Bordes redondeados solo abajo */
    text-align: center;
    box-shadow: 0 10px 30px rgba(0,0,0,0.4);
    position: relative;
    overflow: visible; /* Esto evita que el contenido se corte si sobresale un poco */
}

header h1 {
    font-size: 3em;
    margin-bottom: 15px;
    font-weight: 800;
    text-shadow: 2px 2px 10px rgba(0,0,0,0.5);
    letter-spacing: -1px;
}

header p {
    font-size: 1.2em;
    opacity: 0.95;
    font-weight: 300;
    max-width: 700px;
    margin: 0 auto 30px auto;
    text-shadow: 1px 1px 4px rgba(0,0,0,0.5);
}

/* --- ESTAD√çSTICAS CON EFECTO CRISTAL (Glassmorphism) --- */
.stats-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
    gap: 15px;
    margin-top: 30px;
    max-width: 900px;
    margin-left: auto;
    margin-right: auto;
}

.stat {
    background: rgba(255, 255, 255, 0.15); /* Fondo semitransparente */
    backdrop-filter: blur(10px); /* El truco del cristal borroso */
    -webkit-backdrop-filter: blur(10px);
    padding: 20px 10px;
    border-radius: 12px;
    border: 1px solid rgba(255, 255, 255, 0.2);
    border-left: none; /* Quitamos el borde naranja antiguo */
    transition: transform 0.3s ease;
}

.stat:hover {
    transform: translateY(-5px);
    background: rgba(255, 255, 255, 0.25);
}

.stat-number {
    font-size: 2em;
    font-weight: 800;
    margin-bottom: 5px;
    color: #f1c40f; /* Amarillo dorado */
    text-shadow: 1px 1px 2px rgba(0,0,0,0.3);
}

.stat-label {
    font-size: 0.85em;
    text-transform: uppercase;
    letter-spacing: 1px;
    opacity: 0.9;
    font-weight: 600;
}

/* --- CUENTA ATR√ÅS MEJORADA --- */
#countdown-container {
    background: rgba(0, 0, 0, 0.4) !important; /* M√°s oscuro */
    backdrop-filter: blur(5px);
    border: 1px solid rgba(255,255,255,0.1) !important;
    margin-top: 35px !important;
    padding: 20px 40px !important;
    border-radius: 50px !important; /* Forma de p√≠ldora */
    box-shadow: 0 4px 15px rgba(0,0,0,0.2);
}

/* --- AJUSTES ESPECIALES PARA M√ìVIL --- */
@media (max-width: 768px) {
    
    /* 1. Ajustar la Cabecera */
    header {
    padding: 40px 15px 120px 15px !important; 
}
    header h1 {
        font-size: 2.2em; /* T√≠tulo un poco m√°s peque√±o */
    }

    /* 2. Forzar que las cajas quepan en dos filas en m√≥vil */
.stats-grid {
            grid-template-columns: repeat(2, 1fr); /* Crea 2 columnas iguales */
            grid-template-rows: repeat(2, auto);   /* Crea 2 filas autom√°ticas */
            gap: 12px;
            margin-top: 25px;
            display: grid;
            width: 100%;
            max-width: 400px; /* Centra el bloque en el m√≥vil */
            margin-left: auto;
            margin-right: auto;
        }

.stat {
            padding: 15px 5px; 
            display: flex;
            flex-direction: column;
            justify-content: center;
            min-height: 90px; /* Les da una altura uniforme a todas */
        }

    .stat-number {
        font-size: 1.4em; /* N√∫meros ajustados */
    }

    .stat-label {
        font-size: 0.65em; /* Texto etiqueta m√°s peque√±o */
        white-space: nowrap; /* Evita que el texto ocupe dos l√≠neas */
    }

    /* 3. Cuenta atr√°s m√°s recogida */
    #countdown-container {
        width: 95%; /* Que no toque los bordes */
        padding: 12px !important;
        margin-left: auto !important;
        margin-right: auto !important;
        margin-top: 25px !important;
    }
    
    #countdown {
        font-size: 1.3em !important;
    }
}

/* --- FOOTER ORIGINAL Y CHULO --- */
footer {
    background: linear-gradient(rgba(44, 62, 80, 0.9), rgba(44, 62, 80, 0.95)), 
                url('https://images.unsplash.com/photo-1518709268805-4e9042af9f23?q=80&w=2000&auto=format&fit=crop');
    background-size: cover;
    background-position: center;
    background-attachment: fixed; /* Efecto Parallax */
    color: white;
    padding: 60px 20px 30px;
    margin-top: 50px;
    border-radius: 40px 40px 0 0;
    text-align: center;
}

.footer-content {
    max-width: 800px;
    margin: 0 auto;
}

.footer-quote {
    font-style: italic;
    font-size: 1.2em;
    margin-bottom: 25px;
    color: #f1c40f; /* Dorado */
}

.footer-nav {
    display: flex;
    justify-content: center;
    gap: 20px;
    margin-bottom: 30px;
    flex-wrap: wrap;
}

.footer-nav a {
    color: white;
    text-decoration: none;
    font-weight: 600;
    opacity: 0.8;
    transition: 0.3s;
}

.footer-nav a:hover {
    opacity: 1;
    color: #f1c40f;
}

.shell-icon { 
    width: 70px; 
    height: 70px; 
    margin-bottom: 20px; 
    filter: drop-shadow(0 4px 6px rgba(0,0,0,0.3)); /* Sombra para darle volumen */
}

.copyright {
    font-size: 0.8em;
    opacity: 0.6;
    border-top: 1px solid rgba(255,255,255,0.1);
    padding-top: 20px;
}

/* --- BLOQUE DE CONTROLES CABECERA (TODO EN UNO) --- */

/* Contenedor Principal */
.controls-area {
    display: flex;
    flex-direction: column; /* Organiza en pisos */
    align-items: center;
    gap: 15px;
    margin-top: 30px;
    width: 100%;
    position: relative;
    z-index: 5;
}

/* Piso 1: Mochila y Selector */
.tools-row {
    display: flex;
    gap: 15px;
    justify-content: center;
    align-items: center;
    flex-wrap: wrap;
}

/* Piso 2: Apps Externas (Tricount/Spotify) */
.apps-row {
    display: flex;
    gap: 15px;
    justify-content: center;
    width: 100%;
}

/* --- ESTILO MOCHILA --- */
.btn-mochila-pro {
    background: linear-gradient(135deg, #FF8008 0%, #FFC837 100%);
    color: white;
    border: none;
    padding: 12px 30px;
    border-radius: 50px;
    font-weight: 800;
    text-transform: uppercase;
    font-size: 0.9em;
    cursor: pointer;
    box-shadow: 0 10px 25px rgba(255, 128, 8, 0.4);
    display: flex;
    align-items: center;
    gap: 8px;
    transition: transform 0.3s, box-shadow 0.3s;
}
.btn-mochila-pro:hover {
    transform: translateY(-3px) scale(1.05);
    box-shadow: 0 15px 35px rgba(255, 128, 8, 0.6);
}

/* --- ESTILO SELECTOR (C√ÅPSULA DE CRISTAL) --- */
.view-toggle-capsule {
    background: rgba(0, 0, 0, 0.5); /* Fondo oscuro transparente */
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    padding: 5px;
    border-radius: 50px;
    display: flex;
    gap: 5px;
    border: 1px solid rgba(255, 255, 255, 0.3); /* BORDE BLANCO SUTIL */
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
}

.view-btn-pro {
    background: transparent;
    color: rgba(255, 255, 255, 0.7);
    border: none;
    padding: 8px 20px;
    border-radius: 40px;
    font-weight: 600;
    font-size: 0.85em;
    cursor: pointer;
    transition: all 0.3s;
}
.view-btn-pro.active {
    background: white;
    color: #333;
    font-weight: 800;
    box-shadow: 0 2px 10px rgba(0,0,0,0.2);
}

/* --- ESTILO APPS (P√çLDORAS) --- */
.btn-app {
    text-decoration: none;
    color: white;
    padding: 10px 25px;
    border-radius: 50px;
    font-weight: 700;
    font-size: 0.85em;
    display: flex;
    align-items: center;
    gap: 8px;
    transition: transform 0.2s;
    border: 1px solid rgba(255,255,255,0.2);
}
.btn-app:hover { transform: translateY(-3px); color: white; }

.btn-tricount {
    background: linear-gradient(135deg, #004e92 0%, #000428 100%); /* Azul */
    box-shadow: 0 5px 15px rgba(0, 78, 146, 0.4);
}
.btn-spotify {
    background: linear-gradient(135deg, #1DB954 0%, #191414 100%); /* Verde */
    box-shadow: 0 5px 15px rgba(29, 185, 84, 0.4);
}

/* Versi√≥n M√≥vil */
@media (max-width: 768px) {
    .tools-row { flex-direction: column; width: 100%; }
    .btn-mochila-pro { width: 80%; justify-content: center; }
}

    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>ü•æ Camino Portugu√©s de la Costa</h1>
            <p>Itinerario completo de peregrinaci√≥n por la costa portuguesa y gallega</p>
            
            <div class="stats-grid">
                <div class="stat"><div class="stat-number">241 km</div><div class="stat-label">Distancia Total</div></div>
                <div class="stat"><div class="stat-number">12 Etapas</div><div class="stat-label">Jornadas</div></div>
                <div class="stat"><div class="stat-number">8-10 d√≠as</div><div class="stat-label">Duraci√≥n Aprox.</div></div>
                <div class="stat" style="background: rgba(230, 126, 34, 0.3); border: 1px solid #e67e22;">
                    <div class="stat-number" id="global-total-money">0.00‚Ç¨</div>
                    <div class="stat-label">Presupuesto Personal</div>
                </div>
            </div>

            <div id="countdown-container" style="background: rgba(0,0,0,0.3); padding: 15px; border-radius: 8px; margin-top: 25px; display: inline-block; border: 1px solid rgba(255,255,255,0.2);">
                <span style="font-size: 0.9em; text-transform: uppercase; letter-spacing: 1px; opacity: 0.9;">‚è≥ Tiempo para la aventura:</span>
                <div id="countdown" style="font-size: 1.6em; font-weight: bold; margin-top: 5px; color: #f1c40f; text-shadow: 0 2px 4px rgba(0,0,0,0.3);">
                    Cargando...
                </div>
            </div>

<div class="controls-area">
    
    <div class="tools-row">
        <button onclick="openModal('modalMochila')" class="btn-mochila-pro">
            <span style="font-size: 1.4em;">üéí</span> 
            <span>Mi Mochila</span>
        </button>

        <div class="view-toggle-capsule">
            <button class="view-btn-pro active" onclick="switchView('detail', this)">
                ü™™ Tarjetas
            </button>
            <button class="view-btn-pro" onclick="switchView('list', this)">
                üìã Lista
            </button>
        </div>
    </div>

    <div class="apps-row">
        <a href="https://tricount.com/ttpkwRQfUInLcPVXHb" target="_blank" class="btn-app btn-tricount">
            üí∏ Tricount
        </a>
        <a href="https://open.spotify.com/playlist/7Akw7DCeq3bTUNXQ69pcVc?si=2IK1mTG4QUCY3NtyTP01Cw&pt=473465e8068564a44586aed89baed87f&pi=gPtd8AuXQP6-8" target="_blank" class="btn-app btn-spotify">
            üéß M√∫sica
        </a>
    </div>

</div>

        </header>
        <div class="progress-section">
    <div class="progress-label" style="align-items: center; margin-bottom: 15px;">
    <span style="display: flex; align-items: center; gap: 12px; font-size: 1.15em; color: #2c3e50;">
        <svg width="34" height="34" viewBox="0 0 100 100" style="box-shadow: 0 2px 5px rgba(0,0,0,0.15); border-radius: 6px; border: 2px solid #fff;">
            <rect width="100" height="100" fill="#005eb8"/> <path d="M50 85 C 50 85, 50 20, 50 20" stroke="#ffdd00" stroke-width="8" stroke-linecap="round" fill="none"/>
            <path d="M50 85 C 50 85, 20 25, 20 25" stroke="#ffdd00" stroke-width="8" stroke-linecap="round" fill="none"/>
            <path d="M50 85 C 50 85, 80 25, 80 25" stroke="#ffdd00" stroke-width="8" stroke-linecap="round" fill="none"/>
            <path d="M50 85 C 50 85, 2 55, 2 55" stroke="#ffdd00" stroke-width="8" stroke-linecap="round" fill="none"/>
            <path d="M50 85 C 50 85, 98 55, 98 55" stroke="#ffdd00" stroke-width="8" stroke-linecap="round" fill="none"/>
        </svg>
        Tu Credencial Digital
    </span>
    <span id="progressText" style="font-size: 0.85em; background: #ecf0f1; padding: 5px 12px; border-radius: 15px; color: #7f8c8d;">0/9 Etapas</span>
</div>

    <div class="progress-bar-bg">
        <div class="progress-bar-fill" id="progressBar">0%</div>
    </div>
</div>

        <div class="etapas-container">
            <!-- ETAPA 1 CARD -->
            <div class="etapa">
                <div class="etapa-header">
                    <h2 class="etapa-title">Etapa 1: Oporto ‚Üí Labruge</h2>
                    <div class="etapa-meta">
                        <div class="meta-item"><span class="meta-label">Distancia:</span><span class="meta-value">24,1 km</span></div>
                        <div class="meta-item"><span class="meta-label">Duraci√≥n:</span><span class="meta-value">6h</span></div>
                        <div class="meta-item"><span class="meta-label">Dificultad:</span><span class="meta-value">üü¢ Baja</span></div>
                    </div>
                </div>
                <div class="etapa-intro"><p>La jornada inicial plantea una disyuntiva: seguir la orilla del r√≠o Duero y las playas del litoral atl√°ntico, en un recorrido variado y entretenido, o bien optar por el trazado interior por Padr√£o da L√©gua y el aeropuerto, sin alicientes y donde no veremos el mar en ning√∫n momento. Trat√°ndose de la primera etapa del Camino Portugu√©s de la Costa, la mayor√≠a de peregrinos lo tienen muy claro: <strong>r√≠o y playas</strong>.</p></div>
                <div class="etapa-stats">
                    <div class="stat-box"><div class="stat-box-value">6h</div><div class="stat-box-label">Duraci√≥n Estimada</div></div>
                    <div class="stat-box"><div class="stat-box-value">Baja</div><div class="stat-box-label">Dificultad</div></div>
                </div>
                <div class="check-container">
    <span class="check-label">¬øEtapa completada?</span>
    <label class="switch">
        <input type="checkbox" class="etapa-checkbox" data-id="etapa1" onchange="updateProgress()">
        <span class="slider"></span>
    </label>
</div>
                <button class="btn-modal" onclick="openModal('modalEtapa1')">Ver detalles de la etapa</button>
            </div>

            <!-- ETAPA 2 CARD -->
            <div class="etapa">
                <div class="etapa-header">
                    <h2 class="etapa-title">Etapa 2: Labruge ‚Üí P√≥voa de Varzim</h2>
                    <div class="etapa-meta">
                        <div class="meta-item"><span class="meta-label">Distancia:</span><span class="meta-value">14 km</span></div>
                        <div class="meta-item"><span class="meta-label">Duraci√≥n:</span><span class="meta-value">3h 30m</span></div>
                        <div class="meta-item"><span class="meta-label">Dificultad:</span><span class="meta-value">üü¢ Muy Baja</span></div>
                    </div>
                </div>
                <div class="etapa-intro"><p>Contin√∫a nuestro recorrido por las atractivas playas del litoral atl√°ntico, a trav√©s de pasarelas de madera sobre las dunas. Tras cruzar el puente sobre el r√≠o Ave entraremos en Vila do Conde, cuyo casco hist√≥rico no podemos dejar de visitar. Al final de esta corta etapa nos espera P√≥voa de Varzim, localidad cosmopolita, abocada al mar y con m√∫ltiples ofertas de ocio.</p></div>
                <div class="etapa-stats">
                    <div class="stat-box"><div class="stat-box-value">3h 30m</div><div class="stat-box-label">Duraci√≥n Estimada</div></div>
                    <div class="stat-box"><div class="stat-box-value">Muy Baja</div><div class="stat-box-label">Dificultad</div></div>
                </div>
                <div class="check-container">
    <span class="check-label">¬øEtapa completada?</span>
    <label class="switch">
        <input type="checkbox" class="etapa-checkbox" data-id="etapa2" onchange="updateProgress()">
        <span class="slider"></span>
    </label>
</div>
                <button class="btn-modal" onclick="openModal('modalEtapa2')">Ver detalles de la etapa</button>
            </div>

            <!-- ETAPA 3 CARD -->
            <div class="etapa">
                <div class="etapa-header">
                    <h2 class="etapa-title">Etapa 3: P√≥voa de Varzim ‚Üí Marinhas</h2>
                    <div class="etapa-meta">
                        <div class="meta-item"><span class="meta-label">Distancia:</span><span class="meta-value">24,5 km</span></div>
                        <div class="meta-item"><span class="meta-label">Duraci√≥n:</span><span class="meta-value">6h</span></div>
                        <div class="meta-item"><span class="meta-label">Dificultad:</span><span class="meta-value">üü¢ Baja</span></div>
                    </div>
                </div>
                <div class="etapa-intro"><p>Hoy nos espera una jornada variada, que comienza recorriendo la costa para despu√©s virar ligeramente hacia el interior, en direcci√≥n a F√£o y su puente sobre el r√≠o C√°davo. Probablemente no sea la etapa m√°s bonita, pero tiene un poco de todo: paseos mar√≠timos, playas con pasarelas de madera, alg√∫n tramo sombreado por camino de tierra y, para desgracia nuestra, bastantes aceras y adoquines.</p></div>
                <div class="etapa-stats">
                    <div class="stat-box"><div class="stat-box-value">6h</div><div class="stat-box-label">Duraci√≥n Estimada</div></div>
                    <div class="stat-box"><div class="stat-box-value">Baja</div><div class="stat-box-label">Dificultad</div></div>
                </div>
                <div class="check-container">
    <span class="check-label">¬øEtapa completada?</span>
    <label class="switch">
        <input type="checkbox" class="etapa-checkbox" data-id="etapa3" onchange="updateProgress()">
        <span class="slider"></span>
    </label>
</div>
                <button class="btn-modal" onclick="openModal('modalEtapa3')">Ver detalles de la etapa</button>
            </div>

            <!-- ETAPA 4 CARD -->
            <div class="etapa">
                <div class="etapa-header">
                    <h2 class="etapa-title">Etapa 4: Marinhas ‚Üí Viana do Castelo</h2>
                    <div class="etapa-meta">
                        <div class="meta-item"><span class="meta-label">Distancia:</span><span class="meta-value">20,8 km</span></div>
                        <div class="meta-item"><span class="meta-label">Duraci√≥n:</span><span class="meta-value">5h 15m</span></div>
                        <div class="meta-item"><span class="meta-label">Dificultad:</span><span class="meta-value">üü¢ Baja</span></div>
                    </div>
                </div>
                <div class="etapa-intro"><p>La jornada de hoy discurre √≠ntegramente por el interior, sin pisar ni una playa. Sin embargo cuenta con alguno de los paisajes m√°s bellos de este camino, como el sendero que baja hasta el cauce del r√≠o Neiva. El paso de dicho r√≠o, por una plataforma de losas de piedra, quedar√° grabado en nuestra memoria. Una vez en Viana do Castelo os proponemos visitar sin prisas su interesante casco hist√≥rico.</p></div>
                <div class="etapa-stats">
                    <div class="stat-box"><div class="stat-box-value">5h 15m</div><div class="stat-box-label">Duraci√≥n Estimada</div></div>
                    <div class="stat-box"><div class="stat-box-value">Baja</div><div class="stat-box-label">Dificultad</div></div>
                </div>
                <div class="check-container">
    <span class="check-label">¬øEtapa completada?</span>
    <label class="switch">
        <input type="checkbox" class="etapa-checkbox" data-id="etapa4" onchange="updateProgress()">
        <span class="slider"></span>
    </label>
</div>
                <button class="btn-modal" onclick="openModal('modalEtapa4')">Ver detalles de la etapa</button>
            </div>

            <!-- ETAPA 5 CARD -->
            <div class="etapa">
                <div class="etapa-header">
                    <h2 class="etapa-title">Etapa 5: Viana do Castelo ‚Üí Caminha</h2>
                    <div class="etapa-meta">
                        <div class="meta-item"><span class="meta-label">Distancia:</span><span class="meta-value">26,8 km</span></div>
                        <div class="meta-item"><span class="meta-label">Duraci√≥n:</span><span class="meta-value">6h 30m</span></div>
                        <div class="meta-item"><span class="meta-label">Dificultad:</span><span class="meta-value">üü° Media</span></div>
                    </div>
                </div>
                <div class="etapa-intro"><p>Hoy ser√° nuestra √∫ltima jornada en Portugal. Desde Viana podemos seguir el camino oficial que va por el interior, o bien optar por el litoral, sin flechas pero con playas. Una vez en Vila Praia de √Çncora nos espera un paseo sin desniveles hasta Caminha, localidad donde algunos dar√°n por finalizada la etapa, mientras que otros tomar√°n hoy mismo el ferry que cruza el r√≠o Mi√±o hacia Galicia.</p></div>
                <div class="etapa-stats">
                    <div class="stat-box"><div class="stat-box-value">6h 30m</div><div class="stat-box-label">Duraci√≥n Estimada</div></div>
                    <div class="stat-box"><div class="stat-box-value">Media</div><div class="stat-box-label">Dificultad</div></div>
                </div>
                <div class="check-container">
    <span class="check-label">¬øEtapa completada?</span>
    <label class="switch">
        <input type="checkbox" class="etapa-checkbox" data-id="etapa5" onchange="updateProgress()">
        <span class="slider"></span>
    </label>
</div>
                <button class="btn-modal" onclick="openModal('modalEtapa5')">Ver detalles de la etapa</button>
            </div>

            <!-- ETAPA 6 CARD -->
            <div class="etapa">
                <div class="etapa-header">
                    <h2 class="etapa-title">Etapa 6: Caminha ‚Üí Porto Moug√°s</h2>
                    <div class="etapa-meta">
                        <div class="meta-item"><span class="meta-label">Distancia:</span><span class="meta-value">23,5 km</span></div>
                        <div class="meta-item"><span class="meta-label">Duraci√≥n:</span><span class="meta-value">5h 40m</span></div>
                        <div class="meta-item"><span class="meta-label">Dificultad:</span><span class="meta-value">üü¢ Baja</span></div>
                    </div>
                </div>
                <div class="etapa-intro"><p>La primera jornada de este camino en Galicia nos depara tramos muy bellos junto al mar, por un paisaje agreste, expuesto al viento y a los temporales. Adem√°s de los diferentes miradores ante el oc√©ano, ser√°n paradas obligadas A Guarda, preciosa villa marinera, y Oia, con el imponente edificio de su monasterio abocado sobre la playa.</p></div>
                <div class="etapa-stats">
                    <div class="stat-box"><div class="stat-box-value">5h 40m</div><div class="stat-box-label">Duraci√≥n Estimada</div></div>
                    <div class="stat-box"><div class="stat-box-value">Baja</div><div class="stat-box-label">Dificultad</div></div>
                </div>
                <div class="check-container">
    <span class="check-label">¬øEtapa completada?</span>
    <label class="switch">
        <input type="checkbox" class="etapa-checkbox" data-id="etapa6" onchange="updateProgress()">
        <span class="slider"></span>
    </label>
</div>
                <button class="btn-modal" onclick="openModal('modalEtapa6')">Ver detalles de la etapa</button>
            </div>

            <!-- ETAPA 7 CARD -->
            <div class="etapa">
                <div class="etapa-header">
                    <h2 class="etapa-title">Etapa 7: Porto Moug√°s ‚Üí Baiona</h2>
                    <div class="etapa-meta">
                        <div class="meta-item"><span class="meta-label">Distancia:</span><span class="meta-value">11,5 km</span></div>
                        <div class="meta-item"><span class="meta-label">Duraci√≥n:</span><span class="meta-value">4h</span></div>
                        <div class="meta-item"><span class="meta-label">Dificultad:</span><span class="meta-value">üü¢ Muy Baja</span></div>
                    </div>
                </div>
                <div class="etapa-intro"><p>Si la jornada anterior era bonita, la de hoy tambi√©n resultar√° muy atractiva y variada: comenzaremos nuestro camino junto a la costa, disfrutaremos de un precioso tramo por monte con vistas sobre un faro, y poco despu√©s descubriremos Baiona, una villa que enamora. Por supuesto podemos dar por finalizada la etapa all√≠, o bien prolongarla unos kil√≥metros m√°s hasta la localidad de Baiona.</p></div>
                <div class="etapa-stats">
                    <div class="stat-box"><div class="stat-box-value">4h</div><div class="stat-box-label">Duraci√≥n Estimada</div></div>
                    <div class="stat-box"><div class="stat-box-value">Muy Baja</div><div class="stat-box-label">Dificultad</div></div>
                </div>
                <div class="check-container">
    <span class="check-label">¬øEtapa completada?</span>
    <label class="switch">
        <input type="checkbox" class="etapa-checkbox" data-id="etapa7" onchange="updateProgress()">
        <span class="slider"></span>
    </label>
</div>
                <button class="btn-modal" onclick="openModal('modalEtapa7')">Ver detalles de la etapa</button>
            </div>

            <!-- ETAPA 8 CARD -->
            <div class="etapa">
                <div class="etapa-header">
                    <h2 class="etapa-title">Etapa 8: Baiona ‚Üí Padr√≥n (Transporte + Descanso)</h2>
                    <div class="etapa-meta">
                        <div class="meta-item"><span class="meta-label">Distancia:</span><span class="meta-value">Flex</span></div>
                        <div class="meta-item"><span class="meta-label">Duraci√≥n:</span><span class="meta-value">2 d√≠as</span></div>
                        <div class="meta-item"><span class="meta-label">Dificultad:</span><span class="meta-value">‚≠ê Relax</span></div>
                    </div>
                </div>
                <div class="etapa-intro"><p>Etapa de descanso en Baiona con visita a las Islas C√≠es y exploraci√≥n de la villa. El segundo d√≠a utilizaremos transporte p√∫blico para llegar a Padr√≥n, punto de partida para nuestra √∫ltima etapa hacia Santiago de Compostela. Tiempo para recuperarse y disfrutar de la gastronom√≠a local antes del tramo final del camino.</p></div>
                <div class="etapa-stats">
                    <div class="stat-box"><div class="stat-box-value">2 noches</div><div class="stat-box-label">Alojamiento en Baiona</div></div>
                    <div class="stat-box"><div class="stat-box-value">Relax</div><div class="stat-box-label">Dificultad</div></div>
                </div>
                <div class="check-container">
    <span class="check-label">¬øEtapa completada?</span>
    <label class="switch">
        <input type="checkbox" class="etapa-checkbox" data-id="etapa8" onchange="updateProgress()">
        <span class="slider"></span>
    </label>
</div>
                <button class="btn-modal" onclick="openModal('modalEtapa8')">Ver detalles de la etapa</button>
            </div>
            <!-- ETAPA 9 CARD -->
            <div class="etapa">
                <div class="etapa-header">
                    <h2 class="etapa-title">Etapa 9 Padr√≥n - Santiago de Compostela</h2>
                    <div class="etapa-meta">
                        <div class="meta-item"><span class="meta-label">Distancia:</span><span class="meta-value">24,3 km</span></div>
                        <div class="meta-item"><span class="meta-label">Duraci√≥n:</span><span class="meta-value">6h</span></div>
                        <div class="meta-item"><span class="meta-label">Dificultad:</span><span class="meta-value">üü¢Baja</span></div>
                    </div>
                </div>
                <div class="etapa-intro"><p>Esta √∫ltima etapa del Camino Portugu√©s transcurre en buena parte por asfalto y zonas urbanizadas, siguiendo, c√≥mo no, la nacional N-550, la cual hoy cruzamos hasta cuatro veces. En cuanto a desniveles, cabe mencionar el moderado y progresivo ascenso al Agro dos Monteiros, en O Milladoiro. En el √°mbito cultural, aparte de Santiago con su extraordinaria catedral, cabe destacar la bella colegiata de Iria Flavia.</p></div>
                <div class="etapa-stats">
                    <div class="stat-box"><div class="stat-box-value">6h</div><div class="stat-box-label">Duraci√≥n Estimada</div></div>
                    <div class="stat-box"><div class="stat-box-value">Baja</div><div class="stat-box-label">Dificultad</div></div>
                </div>
                <div class="check-container">
    <span class="check-label">¬øEtapa completada?</span>
    <label class="switch">
        <input type="checkbox" class="etapa-checkbox" data-id="etapa9" onchange="updateProgress()">
        <span class="slider"></span>
    </label>
</div>
                <button class="btn-modal" onclick="openModal('modalEtapa9')">Ver detalles de la etapa</button>
            </div>
        </div>
    </div>


    <!-- MODAL ETAPA 8 -->
    <div class="modal-backdrop" id="modalEtapa8">
        <div class="modal-panel">
            <div class="modal-header">
                <h2>Etapa 8: Baiona ‚Üí Padr√≥n - Descanso y Transici√≥n</h2>
                <button class="modal-close" onclick="closeModal('modalEtapa8')">&times;</button>
            </div>
            <div class="modal-body">
                <div class="modal-left">

                    <div class="widget-card" id="weather-etapa8">
    <div class="weather-header">
        <div class="weather-info">
            <div class="weather-temp">--¬∞C</div>
            <div class="weather-desc">Cargando clima...</div>
        </div>
        <div class="weather-icon">‚è≥</div>
    </div>
</div>
                    <div class="modal-section">
                        <h3>‚ö° Datos r√°pidos</h3>
                        <div class="extra-card">
                            <ul>
                                <li><strong>Tipo de etapa:</strong> Descanso y transporte</li>
                                <li><strong>Duraci√≥n:</strong> 2 d√≠as completos</li>
                                <li><strong>Dificultad:</strong> Relax - Sin caminata</li>
                                <li><strong>Alojamiento:</strong> 2 noches (07-09/06 en Baiona)</li>
                                <li><strong>Transporte:</strong> Autob√∫s p√∫blico Baiona ‚Üí Padr√≥n</li>
                                <li><strong>Distancia caminable:</strong> A elecci√≥n personal</li>
                            </ul>
                        </div>
                    </div>

                    <div class="modal-section">
                        <h3 class="sec-tramos">üìç Actividades y Puntos de Inter√©s</h3>

                        <!-- Actividad 1 -->
                        <div class="tramo">
                            <div class="tramo-header">
                                <h4>üèñÔ∏è D√≠a 1: Exploraci√≥n de Baiona</h4>
                                <div class="tramo-header-right">
                                    <span class="tramo-distance">Completo</span>
                                    <span class="tramo-toggle-icon">Ôºã</span>
                                </div>
                            </div>
                            <div class="tramo-content">
                                <p><strong>Ma√±ana - Paseo por el casco hist√≥rico:</strong> Visita la Praza do Consello (Ayuntamiento), recorre las calles medievales del casco viejo con sus coloridas casas marineras. Descubre el cruceiro da Sant√≠sima Trinidade del siglo XV, la excolegiata de Santa Mar√≠a y la capilla de Santa Liberata.</p>
                                <p><strong>Tarde - Paseo mar√≠timo:</strong> Disfruta del paseo mar√≠timo con vistas a la bah√≠a. Visita la r√©plica de la carabela Pinta en el puerto, que conmemora el descubrimiento del Nuevo Mundo en 1493. Descansa en los miradores con vistas a las Islas C√≠es.</p>
                                <p><strong>Gastronom√≠a:</strong> Degustation de pulpo a la gallega, percebes del Cabo Silleiro, n√©coras y otros productos del mar. Prueba los vinos locales de la comarca de Pontevedra.</p>
                                <div class="punto-parada">
                                    <div class="punto-parada-nombre">üìç BAIONA - D√çA 1</div>
                                    <div class="distancia-acumulada">Descanso y exploraci√≥n cultural</div>
                                </div>
                            </div>
                        </div>

                        <!-- Actividad 2 -->
                        <div class="tramo">
                            <div class="tramo-header">
                                <h4>üåä D√≠a 2 (Ma√±ana): Islas C√≠es</h4>
                                <div class="tramo-header-right">
                                    <span class="tramo-distance">Ferry</span>
                                    <span class="tramo-toggle-icon">Ôºã</span>
                                </div>
                            </div>
                            <div class="tramo-content">
                                <p><strong>Excursi√≥n a las Islas C√≠es:</strong> Toma el ferry desde el puerto de Baiona hacia las Islas C√≠es (aproximadamente 30-40 minutos). Estas islas, parte del Parque Nacional de las Islas Atl√°nticas, ofrecen playas paradis√≠acas de arena blanca y agua cristalina.</p>
                                <p><strong>Actividades en las islas:</strong> Ba√±o en la Playa de Rodas (considerada una de las mejores playas de Espa√±a), senderismo entre pinos, observaci√≥n de aves marinas, fotograf√≠a del paisaje virgen. Las islas son refugio de gaviota patiamarilla y foca monje.</p>
                                <p><strong>Informaci√≥n pr√°ctica:</strong> El acceso a las islas es limitado por razones de conservaci√≥n. Se recomienda reservar billete con antelaci√≥n en el puerto. Traer protecci√≥n solar, agua y snorkel opcional.</p>
                                <div class="punto-parada">
                                    <div class="punto-parada-nombre">üèùÔ∏è ISLAS C√çES</div>
                                    <div class="distancia-acumulada">Parque Nacional - Excursi√≥n recomendada</div>
                                </div>
                            </div>
                        </div>

                        <!-- Actividad 3 -->
                        <div class="tramo">
                            <div class="tramo-header">
                                <h4>üöå D√≠a 2 (Tarde): Transporte a Padr√≥n</h4>
                                <div class="tramo-header-right">
                                    <span class="tramo-distance">Autob√∫s</span>
                                    <span class="tramo-toggle-icon">Ôºã</span>
                                </div>
                            </div>
                            <div class="tramo-content">
                                <p><strong>Retorno de las islas y traslado:</strong> Toma el ferry de regreso a Baiona (√∫ltima salida t√≠picamente a las 18:00). Desde el puerto, dir√≠gete a la estaci√≥n de autob√∫s de Baiona.</p>
                                <p><strong>Autob√∫s Baiona ‚Üí Padr√≥n:</strong> Toma un autob√∫s de l√≠nea regular (operadores: Autobuses Castromil o similares, aproximadamente 1 hora y 30 minutos de trayecto). La ruta recorre el interior de Galicia con vistas a paisajes verdes y pueblos t√≠picos gallegos.</p>
                                <p><strong>Llegada a Padr√≥n:</strong> Padr√≥n es famoso por sus pimientos, peque√±os y picantes. A tu llegada, inst√°late en el alojamiento y disfruta de la tarde explorando este pueblo tradicional. La plaza principal de Padr√≥n conserva su encanto medieval.</p>
                                <div class="punto-parada">
                                    <div class="punto-parada-nombre">‚úÖ PADR√ìN - PUNTO DE PARTIDA PARA √öLTIMA ETAPA</div>
                                    <div class="distancia-acumulada">Preparaci√≥n para Santiago de Compostela</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <a href="https://www.google.com/maps/dir/Baiona,+Pontevedra/Padr%C3%B3n,+A+Coru%C3%B1a/@42.4,-8.7,10z/data=!3m1!4b1!4m14!4m13!1m5!1m1!1s0xd259062ccf7c87d:0x404f58273ca55a0!2m2!1d-8.8495577!2d42.1193392!1m5!1m1!1s0xd2f0394c8e7195d:0x404f58273ca5da0!2m2!1d-8.6608933!2d42.7383626!3e0?entry=ttu" target="_blank" class="btn-route-map">
    üó∫Ô∏è Ver Trayecto (Bus/Coche) en Google Maps
</a>

<div class="modal-section" style="margin-top: 25px;">
    <h3 class="sec-alojamiento" style="background: #e1f5fe !important; border-color: #b3e5fc !important;">üì∏ Mi Recuerdo del D√≠a</h3>
    <div class="extra-card" style="text-align: center; border-top: 3px solid #3498db; padding: 15px;">
        <div id="photo-container-etapa8" class="photo-preview" style="width: 100%; height: 250px; background: #f9f9f9; border-radius: 12px; display: flex; align-items: center; justify-content: center; overflow: hidden; margin-bottom: 12px; border: 2px dashed #3498db; position: relative;">
            <span style="color: #3498db; font-size: 0.9em; font-weight: 500;">Captura un momento especial</span>
        </div>
        
        <input type="file" id="input-photo-etapa8" accept="image/*" style="display: none;" onchange="handlePhotoUpload('etapa8', this)">
        
        <div style="display: flex; gap: 8px;">
            <button onclick="document.getElementById('input-photo-etapa8').click()" style="flex: 2; background: #3498db; color: white; border: none; padding: 10px; border-radius: 8px; cursor: pointer; font-weight: bold; font-size: 0.85em;">
                üì∑ Seleccionar Foto
            </button>
            <button onclick="removePhoto('etapa8')" style="flex: 1; background: #f8d7da; color: #721c24; border: 1px solid #f5c6cb; padding: 10px; border-radius: 8px; cursor: pointer; font-weight: bold; font-size: 0.85em;">
                üóëÔ∏è Borrar
            </button>
        </div>
    </div>
</div>

                </div>
                <div class="modal-right">
                    <div class="modal-section">
                        <h3 class="sec-alojamiento">üè® Alojamiento</h3>
                        <div class="accommodation-card">
                            <h4>üåü O SECRETO *** (Padr√≥n)</h4>
                            <div class="accommodation-details">
                                <div class="accommodation-detail-line"><strong>Fechas:</strong> 09/06/2026 ‚Äì 10/06/2026</div>
                                <div class="accommodation-detail-line"><strong>Duraci√≥n:</strong> 1 noche en Padr√≥n</div>
                                <div class="accommodation-detail-line"><strong>Ubicaci√≥n:</strong> A 200m del centro de Padr√≥n</div>
                                <div class="accommodation-detail-line"><strong>Tipo:</strong> Apartamento entero</div>
                                <div class="accommodation-detail-line"><strong>Camas:</strong> 1 doble + 2 individuales</div>
                                <div class="accommodation-detail-line"><strong>Precio:</strong> <span style="font-size: 1.1em; font-weight: bold; color: #27ae60;">100‚Ç¨</span></div>
                                <div class="accommodation-detail-line" style="margin-top: 10px; padding-top: 10px; border-top: 1px solid rgba(0,0,0,0.1);"><strong>Nota:</strong> Estas 2 noches tambi√©n incluyen alojamiento en Baiona (anteriormente contratado)</div>
                            </div>
                            <a href="https://www.booking.com/Share-ZjPVJQ" target="_blank" class="btn-alojamiento">
                                Ver alojamiento en Booking
                            </a>
                        </div>
                    </div>
<div class="widget-card" id="diary-etapa8">
    <div class="diary-body">
        <textarea class="diary-textarea" placeholder="‚úçÔ∏è Notas personales..." oninput="saveDiary('etapa8', this.value)"></textarea>
    </div>
    <div class="diary-footer">
        <span>Guardado autom√°tico</span>
        <span id="status-etapa8">‚úÖ</span>
    </div>
</div>
                    <div class="modal-section">
                        <h3 class="sec-gastronomia">üçΩÔ∏è Gastronom√≠a</h3>
                        <div class="extra-card">
                            <p><strong>Especialidades de Padr√≥n:</strong></p>
                            <ul>
                                <li><strong>Pimientos de Padr√≥n</strong> - DOP, peque√±os y picantes (los "que pican, que pican")</li>
                                <li>Preparados a la sart√©n con sal marina</li>
                                <li>Quesos locales gallegos</li>
                                <li>Vinos de la D.O. R√≠as Baixas</li>
                                <li>Empanadas gallegas</li>
                                <li>Pulpo a la gallega</li>
                            </ul>
                        </div>
                    </div>

                    <div class="modal-section">
    <h3 class="sec-alojamiento" style="background: #fff3e0 !important; border-color: #ffe0b2 !important;">üí∞ Mis Gastos (Etapa)</h3>
    <div class="extra-card" style="background: #fcfcfc; border-top: 3px solid #e67e22;">
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
            <div>
                <label style="font-size: 0.8em; color: #7f8c8d; display: block; margin-bottom: 4px;">üè® Alojamiento (‚Ç¨)</label>
                <input type="number" class="expense-input" data-cat="alojamiento" placeholder="0" 
                       style="width:100%; padding:8px; border:1px solid #ddd; border-radius:4px; font-size: 0.9em;">
            </div>
            <div>
                <label style="font-size: 0.8em; color: #7f8c8d; display: block; margin-bottom: 4px;">üçΩÔ∏è Comida (‚Ç¨)</label>
                <input type="number" class="expense-input" data-cat="comida" placeholder="0" 
                       style="width:100%; padding:8px; border:1px solid #ddd; border-radius:4px; font-size: 0.9em;">
            </div>
        </div>
        <div style="margin-top: 10px;">
            <label style="font-size: 0.8em; color: #7f8c8d; display: block; margin-bottom: 4px;">üéí Otros / Varios (‚Ç¨)</label>
            <input type="number" class="expense-input" data-cat="otros" placeholder="0" 
                   style="width:100%; padding:8px; border:1px solid #ddd; border-radius:4px; font-size: 0.9em;">
        </div>
        <div style="margin-top: 15px; padding-top: 10px; border-top: 1px dashed #eee; font-weight: bold; color: #2c3e50; font-size: 1em; text-align: right;">
            Total Etapa: <span class="subtotal-etapa" style="color: #e67e22;">0</span>‚Ç¨
        </div>
    </div>
</div>

                    <div class="modal-section">
                        <h3>ü§ì Curiosidades</h3>
                        <div class="extra-card">
                            <div class="expandible-text">
                                <div class="expandible-content collapsed" id="expandibleContent8">
                                    <p><strong>ISLAS C√çES - PARQUE NACIONAL</strong><br>
Las Islas C√≠es son parte del Parque Nacional Mar√≠timo-Terrestre de las Islas Atl√°nticas de Galicia, declaradas as√≠ en 2002. Forman un archipi√©lago con tres islas principales: Monteagudo, San Marti√±o y O Faro. Su belleza natural es excepcional, con playas v√≠rgenes de arena blanca y aguas cristalinas del Atl√°ntico norte. La Playa de Rodas es considerada una de las mejores playas de Espa√±a, con casi 1 km de arena fina.<br><br>
Durante la visita es posible ver especies end√©micas de plantas y aves marinas. Los acantilados albergan colonias de gaviota patiamarilla y cormor√°n mo√±udo. El faro de C√≠es, construido en 1860, sigue siendo un punto de referencia para la navegaci√≥n.<br><br>
<strong>BAIONA - HISTORIA Y PATRIMONIO</strong><br>
Baiona es una villa medieval hist√≥rica, conocida mundialmente por ser el primer puerto europeo donde se recibi√≥ la noticia del descubrimiento de Am√©rica. El 1 de marzo de 1493, la carabela Pinta, capitaneada por Mart√≠n Alonso Pinz√≥n, arribar√≠a a Baiona trayendo las primeras noticias del viaje de Col√≥n. La r√©plica de la carabela Pinta se encuentra en el puerto y es visitable, permitiendo una experiencia inmersiva en la era de los grandes descubrimientos.<br><br>
El casco antiguo de Baiona conserva su trazado medieval con calles estrechas, casas marineras de colores y monumentos hist√≥ricos. La Praza do Consello es el coraz√≥n de la villa, rodeada de edificios hist√≥ricos. Cada marzo, Baiona celebra la llegada de la Pinta con una fiesta medieval multitudinaria.<br><br>
<strong>PADR√ìN - CAPITAL DE UN TESORO CULINARIO</strong><br>
Padr√≥n es mundialmente famoso por sus pimientos, peque√±os y verdes, con un sabor √∫nico que oscila entre lo dulce y lo picante. El dicho popular "Os pementos de Padr√≥n, uns pican e outros non" (Los pimientos de Padr√≥n, unos pican y otros no) refleja la sorpresa y la emoci√≥n de degustarlos. Estos pimientos tienen Denominaci√≥n de Origen Protegida (DOP) desde 2003.<br><br>
La tradici√≥n de cultivar pimientos en Padr√≥n se remonta al siglo XVI, cuando los monjes franciscanos los trajeron desde Am√©rica. El clima especial de la zona, con influencia de la proximidad al Atl√°ntico, produce pimientos con caracter√≠sticas √∫nicas.<br><br>
El pueblo de Padr√≥n es peque√±o y encantador, con una fuerte tradici√≥n agr√≠cola. Su plaza mayor mantiene la estructura medieval, y durante los meses de agosto y septiembre, se celebra la Festa do Pimiento, con degustaciones, concursos y actividades gastron√≥micas.<br><br>
<strong>TRANSICI√ìN HACIA SANTIAGO</strong><br>
Padr√≥n es un punto estrat√©gico para acceder a la ruta final hacia Santiago de Compostela. Desde aqu√≠, se puede continuar con la √∫ltima etapa del Camino Portugu√©s de la Costa, conectando con rutas secundarias que llevan hacia la capital compostelana. La distancia desde Padr√≥n a Santiago es de aproximadamente 50 km, un recorrido que completa la peregrinaci√≥n.<br><br>
La regi√≥n de O Saln√©s (donde se ubica Padr√≥n) es tambi√©n famosa por sus vinos blancos frescos, especialmente los Albari√±o de las R√≠as Baixas, que acompa√±an perfectamente los productos locales.<br><br>
Esta etapa de descanso es fundamental para recuperar fuerzas antes del √∫ltimo tramo hacia el ap√≥stol Santiago. Padr√≥n ofrece la combinaci√≥n perfecta de descanso gastron√≥mico, tranquilidad rural y preparaci√≥n espiritual para la meta final del camino.
                                    </p>
                                    <div class="expandible-fade"></div>
                                </div>
                                <button class="btn-expandible" onclick="toggleExpand('expandibleContent8', this)">Leer m√°s</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="modal-backdrop" id="modalMochila">
    <div class="modal-panel" style="max-width: 600px;">
        <div class="modal-header" style="background: #fff8e1; border-bottom: 2px solid #e67e22;">
            <h2 style="color: #d35400;">üéí Mochila del Peregrino</h2>
            <button class="modal-close" onclick="closeModal('modalMochila')">√ó</button>
        </div>
        <div class="modal-body" style="grid-template-columns: 1fr;"> <div style="background: #e8f6f3; padding: 15px; border-radius: 8px; margin-bottom: 20px; border-left: 4px solid #1abc9c;">
                <p style="margin: 0; font-size: 0.9em; color: #16a085;">
                    <strong>Regla de oro:</strong> Tu mochila no deber√≠a pesar m√°s del 10% de tu peso corporal. ¬°Lo agradecer√°s!
                </p>
                <div style="margin-top: 10px; font-weight: bold; color: #2c3e50;">
                    Progreso: <span id="backpack-progress">0</span>% listo
                </div>
            </div>

            <div class="backpack-group">
                <h3>üìú Documentaci√≥n</h3>
                <div class="backpack-item"><input type="checkbox" id="bp_dni" onchange="updateBackpack()"><label for="bp_dni">DNI / Pasaporte</label></div>
                <div class="backpack-item"><input type="checkbox" id="bp_credencial" onchange="updateBackpack()"><label for="bp_credencial">Credencial del Peregrino</label></div>
                <div class="backpack-item"><input type="checkbox" id="bp_seguro" onchange="updateBackpack()"><label for="bp_seguro">Tarjeta Sanitaria / Seguro</label></div>
                <div class="backpack-item"><input type="checkbox" id="bp_dinero" onchange="updateBackpack()"><label for="bp_dinero">Efectivo y Tarjeta</label></div>
            </div>

            <div class="backpack-group">
                <h3>ü•æ Equipo B√°sico</h3>
                <div class="backpack-item"><input type="checkbox" id="bp_botas" onchange="updateBackpack()"><label for="bp_botas">Calzado de trekking (domado)</label></div>
                <div class="backpack-item"><input type="checkbox" id="bp_chanclas" onchange="updateBackpack()"><label for="bp_chanclas">Chanclas (ducha/descanso)</label></div>
                <div class="backpack-item"><input type="checkbox" id="bp_saco" onchange="updateBackpack()"><label for="bp_saco">Chubasquero / Funda Mochila</label></div>
                <div class="backpack-item"><input type="checkbox" id="bp_mochila" onchange="updateBackpack()"><label for="bp_mochila">Mochila (30-40L)</label></div>
            </div>

            <div class="backpack-group">
                <h3>üíä Botiqu√≠n y Aseo</h3>
                <div class="backpack-item"><input type="checkbox" id="bp_compeed" onchange="updateBackpack()"><label for="bp_compeed">Compeed / Aguja e hilo</label></div>
                <div class="backpack-item"><input type="checkbox" id="bp_vaselina" onchange="updateBackpack()"><label for="bp_vaselina">Vaselina (anti-rozaduras)</label></div>
                <div class="backpack-item"><input type="checkbox" id="bp_solar" onchange="updateBackpack()"><label for="bp_solar">Crema solar y Gorra</label></div>
                <div class="backpack-item"><input type="checkbox" id="bp_jabon" onchange="updateBackpack()"><label for="bp_jabon">Jab√≥n pastilla (cuerpo/ropa)</label></div>
                <div class="backpack-item"><input type="checkbox" id="bp_toalla" onchange="updateBackpack()"><label for="bp_toalla">Toalla microfibra</label></div>
            </div>
            
            <div class="backpack-group">
                <h3>üì± Tecnolog√≠a</h3>
                <div class="backpack-item"><input type="checkbox" id="bp_movil" onchange="updateBackpack()"><label for="bp_movil">M√≥vil + Cargador</label></div>
                <div class="backpack-item"><input type="checkbox" id="bp_power" onchange="updateBackpack()"><label for="bp_power">Powerbank (Bater√≠a externa)</label></div>
                <div class="backpack-item"><input type="checkbox" id="bp_auriculares" onchange="updateBackpack()"><label for="bp_auriculares">Auriculares</label></div>
            </div>

        </div>
    </div>
</div>

<!-- MODAL ETAPA 1 (COMPLETO CON TODOS LOS 6 TRAMOS) -->
    <div class="modal-backdrop" id="modalEtapa1">
        <div class="modal-panel">
            <div class="modal-header">
                <h2>Etapa 1: Oporto ‚Üí Labruge - Detalles Completos</h2>
                <button class="modal-close" onclick="closeModal('modalEtapa1')">&times;</button>
            </div>
            <div class="modal-body">
                <div class="modal-left">
                    <div class="widget-card" id="weather-etapa1">
    <div class="weather-header">
        <div class="weather-info">
            <div class="weather-temp">--¬∞C</div>
            <div class="weather-desc">Cargando clima...</div>
        </div>
        <div class="weather-icon">‚è≥</div>
    </div>
</div>
                    <div class="modal-section">
                        <h3>‚ö° Datos r√°pidos</h3>
                        <div class="extra-card">
                            <ul>
                                <li><strong>Distancia:</strong> 24,1 km</li>
                                <li><strong>Duraci√≥n estimada:</strong> 6 horas</li>
                                <li><strong>Dificultad:</strong> Baja</li>
                                <li><strong>Tipo de etapa:</strong> Costera, muy esc√©nica</li>
                                <li><strong>Pavimento:</strong> Paseos mar√≠timos, pasarelas de madera y tramos urbanos</li>
                            </ul>
                        </div>
                    </div>
                    <div class="modal-section">
                        <h3 class="sec-tramos">üìç Tramos y Puntos de Parada</h3>
                        <div class="tramo">
                            <div class="tramo-header">
                                <h4>Tramo 1: Oporto ‚Üí Foz de Douro</h4>
                                <div class="tramo-header-right">
                                    <span class="tramo-distance">6,1 km</span>
                                    <span class="tramo-toggle-icon">Ôºã</span>
                                </div>
                            </div>
                            <div class="tramo-content">
                                <figure style="margin: 15px 0; border-radius: 10px; overflow: hidden; box-shadow: 0 4px 12px rgba(0,0,0,0.15);">
    <img src="https://oportoando.com/wp-content/uploads/sites/12/2018/02/barrio-se-oporto-1-1024x683.jpeg" 
         alt="S√© de Oporto"
         style="width: 100%; height: 200px; object-fit: cover; display: block;">
         
    <figcaption style="background: rgba(0,0,0,0.7); color: white; padding: 10px; font-size: 0.9em; text-align: center; font-weight: 500;">
        üåâ Inicio de la aventura: La Catedral de Oporto (S√© de Oporto)
    </figcaption>
</figure>
                                <p>Esta primera etapa del Camino Portugu√©s por la Costa parte de la ciudad de Oporto, la segunda m√°s grande de Portugal y una de las principales de la Pen√≠nsula Ib√©rica, y termina en Labruge, con una distancia total de 24 km totalmente pegados a la costa.</p>
                                <p>Salvo que ya la hayamos visitado el d√≠a anterior, el punto tradicional de salida de los peregrinos ser√≠a desde la catedral de Oporto, la <strong>"S√©-catedral"</strong>. A partir de aqu√≠ s√≥lo tenemos que bajar a la ribera del r√≠o Duero (Douro), sin hacer caso de las flechas amarillas ni de las placas met√°licas que han colocado (pues √©stas conducen hacia el "trazado hist√≥rico", que no va por la costa).</p>
                                <p>Tras bajar a nuestro aire por las calles empedradas del casco antiguo llegaremos al <strong>Cais da Ribeira</strong>, muelle al pie del gran puente met√°lico de D. Lu√≠s I, y a la inmediata Pra√ßa da Ribeira, siempre muy concurrida por turistas y locales.</p>
                                <figure style="margin: 15px 0; border-radius: 10px; overflow: hidden; box-shadow: 0 4px 12px rgba(0,0,0,0.15);">
    <img src="https://oportoando.com/wp-content/uploads/sites/12/2018/03/puente-don-luis-oporto-1-1024x683.jpeg" 
         alt="Puente Don Luis I"
         style="width: 100%; height: 200px; object-fit: cover; display: block;">
         
    <figcaption style="background: rgba(0,0,0,0.7); color: white; padding: 10px; font-size: 0.9em; text-align: center; font-weight: 500;">
        üåâ Puente Don Luis I
    </figcaption>
</figure>
                                <p>Sin flechas ‚Äìni falta que hace, pues es imposible perderse‚Äì seguiremos un recorrido muy ameno por todo el margen del r√≠o Douro en direcci√≥n hacia su desembocadura. Pasaremos junto a la iglesia de S√£o Francisco, despu√©s ante la antigua aduana o Alf√¢ndega, el museo del Vino de Porto y tambi√©n bajo el inmenso arco del puente da Arr√°bida. En este tramo encontraremos a menudo runners, ciclistas y paseantes; m√°s de uno nos desear√° "Bom caminho" al vernos con la mochila.</p>
                                <p>En <strong>Foz de Douro</strong> superamos el farol (faro) de S√£o Miguel, los jardines do Passeio Alegre y llegamos al fuerte de S√£o Jo√£o Baptista, donde desemboca el Duero y aparece frente a nosotros el <strong>oc√©ano Atl√°ntico</strong>.</p>
                                <div class="punto-parada">
                                    <div class="punto-parada-nombre">üìç FOZ DO DOURO</div>
                                    <div class="distancia-acumulada">Distancia acumulada: 6,1 km</div>
                                </div>
                            </div>
                        </div>
                        <div class="tramo">
                            <div class="tramo-header">
                                <h4>Tramo 2: Foz de Douro ‚Üí Matosinhos</h4>
                                <div class="tramo-header-right">
                                    <span class="tramo-distance">5,2 km</span>
                                    <span class="tramo-toggle-icon">Ôºã</span>
                                </div>
                            </div>
                            <div class="tramo-content">
                                <p>Comienza aqu√≠ un largo tramo por la fachada mar√≠tima del barrio de Nevogilde, la Copacabana de Porto, pasando ante las concurridas playas de Ourigo, Ingleses, da Luz, Molhe‚Ä¶ Al final llegamos al fuerte de S√£o Francisco Xavier, m√°s conocido como <strong>Castelo do Queijo</strong> (castillo del queso), donde comienza la extensa playa de Matosinhos, muy frecuentada por surfistas.</p>
                                <figure style="margin: 15px 0; border-radius: 10px; overflow: hidden; box-shadow: 0 4px 12px rgba(0,0,0,0.15);">
    <img src="https://porto-north-portugal.com/images/650x450/castelo-do-queijo-matosinhos.jpg" 
         alt="Castelo do Queijo"
         style="width: 100%; height: 200px; object-fit: cover; display: block;">
         
    <figcaption style="background: rgba(0,0,0,0.7); color: white; padding: 10px; font-size: 0.9em; text-align: center; font-weight: 500;">
        üåâ Castelo do Queijo (Castillo del Queso)
    </figcaption>
</figure>
                                <p>Superamos una rotonda de forma el√≠ptica con una curiosa escultura colgante que simboliza una red de pesca, si bien es m√°s conocida como la <strong>An√©mona</strong>; al final de la playa tenemos otra escultura, √©sta figurativa, titulada <strong>Trag√©dia do Mar</strong> y dedicada al desastre acaecido aqu√≠ una noche de diciembre de 1947, donde naufragaron varios barcos de pesca y murieron 152 marineros.</p>
                                <figure style="margin: 15px 0; border-radius: 10px; overflow: hidden; box-shadow: 0 4px 12px rgba(0,0,0,0.15);">
    <img src="https://lifecooler.com/files/registos/imagens/429139/240627.jpg" 
         alt="Trag√©dia do Mar"
         style="width: 100%; height: 200px; object-fit: cover; display: block;">
         
    <figcaption style="background: rgba(0,0,0,0.7); color: white; padding: 10px; font-size: 0.9em; text-align: center; font-weight: 500;">
        üåâ Trag√©dia do Mar - 1947
    </figcaption>
</figure>
                                <p>Podemos seguir por el puerto o por las calles interiores hasta llegar a la parada de metro de Mercado, de la l√≠nea A-azul (ojo, pues el metro en Porto va casi siempre por superficie, parecido a un tranv√≠a largo).</p>
                                <div class="punto-parada">
                                    <div class="punto-parada-nombre">üìç MATOSINHOS</div>
                                    <div class="distancia-acumulada">Distancia acumulada: 11,3 km</div>
                                </div>
                            </div>
                        </div>
                        <div class="tramo">
                            <div class="tramo-header">
                                <h4>Tramo 3: Matosinhos ‚Üí Le√ßa da Palmeira</h4>
                                <div class="tramo-header-right">
                                    <span class="tramo-distance">1,3 km</span>
                                    <span class="tramo-toggle-icon">Ôºã</span>
                                </div>
                            </div>
                            <div class="tramo-content">
                                <figure style="margin: 15px 0; border-radius: 10px; overflow: hidden; box-shadow: 0 4px 12px rgba(0,0,0,0.15);">
    <img src="https://www.leca-palmeira.com/wordpress/wp-content/uploads/2026/01/Ponte-Movel-de-Leixoes.webp" 
         alt="Ponte M√≥vel de Leix√µes"
         style="width: 100%; height: 200px; object-fit: cover; display: block;">
         
    <figcaption style="background: rgba(0,0,0,0.7); color: white; padding: 10px; font-size: 0.9em; text-align: center; font-weight: 500;">
        üåâ Ponte M√≥vel de Leix√µes
    </figcaption>
</figure>
                                <p>Cruzamos el <strong>Ponte M√≥vel</strong> (puente levadizo) sobre el puerto de Leix√µes que, aunque no lo parezca, es tambi√©n la desembocadura del r√≠o Le√ßa. En la rampa o escaleras que suben al puente ‚Äìy tambi√©n al cruzarlo‚Äì encontraremos flechas pintadas. Tras cruzar el puente entramos en Le√ßa da Palmeira, un barrio perteneciente al municipio de Matosinhos.</p>
                                <p>Al final del puente giramos a la izquierda por la Rua Hintze Ribeiro y la seguimos hasta el final; justo antes de llegar a la playa hay una <strong>oficina tur√≠stica</strong> donde nos sellar√°n la credencial con un bonito carimbo jacobeo.</p>
                                <div class="punto-parada">
                                    <div class="punto-parada-nombre">üìç LE√áA DA PALMEIRA</div>
                                    <div class="distancia-acumulada">Distancia acumulada: 12,6 km</div>
                                </div>
                            </div>
                        </div>
                        <div class="tramo">
                            <div class="tramo-header">
                                <h4>Tramo 4: Le√ßa da Palmeira ‚Üí Aldeia Nova (Perafita)</h4>
                                <div class="tramo-header-right">
                                    <span class="tramo-distance">4,0 km</span>
                                    <span class="tramo-toggle-icon">Ôºã</span>
                                </div>
                            </div>
                            <div class="tramo-content">
                                <p>Continuamos por el paseo mar√≠timo (Av. Libertade) y pasaremos junto a la singular <strong>piscina das Mareas</strong> (1966), que se llena del agua del mar y cuyos muros se funden con las rocas de la playa; es un proyecto de juventud del insigne arquitecto portugu√©s √Ålvaro Siza Vieira, nacido en Matosinhos y hoy con obras repartidas por todo el mundo.</p>
             <figure style="margin: 15px 0; border-radius: 10px; overflow: hidden; box-shadow: 0 4px 12px rgba(0,0,0,0.15);">
    <img src="https://images.adsttc.com/media/images/57ed/0e4f/e58e/ce20/4500/01b8/newsletter/04.jpg?1475153480g" 
         alt="Piscina das Mar√©s"
         style="width: 100%; height: 200px; object-fit: cover; display: block;">
         
    <figcaption style="background: rgba(0,0,0,0.7); color: white; padding: 10px; font-size: 0.9em; text-align: center; font-weight: 500;">
        üåâ Piscina das Mar√©s
    </figcaption>
</figure>
                                <p>La ruta sigue por el paseo mar√≠timo (por cierto, dise√±ado en 2006 tambi√©n por Siza), en direcci√≥n hacia un gran faro.</p>
                                <p><strong>Farol (faro) da Boa Nova:</strong> Construido en 1926, con sus 46 metros es el segundo faro m√°s alto de Portugal y su luz puede verse desde 28 millas n√°uticas (52 km). A pocos metros de √©ste tenemos otro edificio del arquitecto √Ålvaro Siza, el <strong>restaurante Casa de Ch√° da Boa Nova</strong> (1963), recostado en un mont√≠culo donde hay un mirador y una peque√±a capilla; en 2011 el restaurante fue declarado Monumento Nacional, y actualmente est√° dirigido por el prestigioso chef Rui Paula, contando con una estrella Michelin.</p>
                                <figure style="margin: 15px 0; border-radius: 10px; overflow: hidden; box-shadow: 0 4px 12px rgba(0,0,0,0.15);">
    <img src="https://vive.eixoatlantico.com/wp-content/uploads/2024/07/Farol-scaled.jpg" 
         alt="Faro da Boa Nova"
         style="width: 100%; height: 200px; object-fit: cover; display: block;">
         
    <figcaption style="background: rgba(0,0,0,0.7); color: white; padding: 10px; font-size: 0.9em; text-align: center; font-weight: 500;">
        üåâ Faro da Boa Nova
    </figcaption>
</figure>
                                <p>A partir de aqu√≠ comienzan varios tramos por pasarelas de madera sobre las dunas de las sucesivas playas, aunque siempre tenemos la opci√≥n de continuar por el paseo (por donde deben ir obligatoriamente los ciclistas). En breve superamos las instalaciones y chimeneas de la refiner√≠a de petr√≥leo Petrogal, cuya presencia resulta chocante frente a un litoral tan bonito; por suerte podemos seguir por la playa, utilizando las pasarelas de madera que nos distraen de la visi√≥n de la refiner√≠a.</p>
                                <div class="punto-parada">
                                    <div class="punto-parada-nombre">üìç ALDEIA NOVA (PERAFITA)</div>
                                    <div class="distancia-acumulada">Distancia acumulada: 16,6 km</div>
                                </div>
                            </div>
                        </div>
                        <div class="tramo">
                            <div class="tramo-header">
                                <h4>Tramo 5: Aldeia Nova ‚Üí Praia de Angeiras</h4>
                                <div class="tramo-header-right">
                                    <span class="tramo-distance">6,2 km</span>
                                    <span class="tramo-toggle-icon">Ôºã</span>
                                </div>
                            </div>
                            <div class="tramo-content">
                                <p>A la altura del campo de f√∫tbol de Aldeia Nova comienza un carril bici, si bien los que van a pie pueden seguir por las pasarelas; volveremos durante unos metros al paseo en la playa do Para√≠so, con casas y bloques de apartamentos.</p>
                                <figure style="margin: 15px 0; border-radius: 10px; overflow: hidden; box-shadow: 0 4px 12px rgba(0,0,0,0.15);">
    <img src="https://upload.wikimedia.org/wikipedia/commons/9/95/Padr%C3%A3o_da_Mem%C3%B3ria_-_Praia_da_Mem%C3%B3ria_-_Portugal_%2845800727384%29.jpg" 
         alt="Obelisco da Mem√≥ria"
         style="width: 100%; height: 200px; object-fit: cover; display: block;">
         
    <figcaption style="background: rgba(0,0,0,0.7); color: white; padding: 10px; font-size: 0.9em; text-align: center; font-weight: 500;">
        üåâ Obelisco da Mem√≥ria - 1832
    </figcaption>
</figure>
                                <p><strong>Obelisco da Mem√≥ria:</strong> El monumento recuerda el lugar donde en 1832 desembarcaron las tropas del ej√©rcito liberal para poner fin al r√©gimen absolutista de Miguel I de Bragan√ßa. Seguimos nuestro recorrido por las playas de Quebrada, Agudela y Pedras do Corgo, para llegar a la localidad de Praia de Angeiras.</p>
                                <figure style="margin: 15px 0; border-radius: 10px; overflow: hidden; box-shadow: 0 4px 12px rgba(0,0,0,0.15);">
    <img src="https://www.playocean.net/i/portugal/beaches/matosinhos/angeiras-norte/praia-de-angeiras-norte-5.jpg" 
         alt="Praia de Angeiras"
         style="width: 100%; height: 200px; object-fit: cover; display: block;">
         
    <figcaption style="background: rgba(0,0,0,0.7); color: white; padding: 10px; font-size: 0.9em; text-align: center; font-weight: 500;">
        üåâ Praia de Angeiras (Lavra)
    </figcaption>
</figure>
                                <p><strong>Praia de Angeiras (Lavra):</strong> Pueblo con restaurantes y bares a pie de playa; sobre la arena hay barcas, as√≠ como redes y todo tipo de enseres para la pesca. Los que decidan acabar aqu√≠ la jornada disponen del <strong>camping Orbitur</strong> a 400 metros hacia el interior, que ofrece alojamiento en bungalows a los peregrinos.</p>
                                <div class="punto-parada">
                                    <div class="punto-parada-nombre">üìç PRAIA DE ANGEIRAS (LAVRA)</div>
                                    <div class="distancia-acumulada">Distancia acumulada: 22,8 km</div>
                                </div>
                            </div>
                        </div>
                        <div class="tramo">
                            <div class="tramo-header">
                                <h4>Tramo 6: Praia de Angeiras ‚Üí Labruge (Final de Etapa)</h4>
                                <div class="tramo-header-right">
                                    <span class="tramo-distance">0,8 km</span>
                                    <span class="tramo-toggle-icon">Ôºã</span>
                                </div>
                            </div>
                            <div class="tramo-content">
                                <p>Seguimos hasta el final del paseo mar√≠timo, donde una nueva pasarela nos conduce hasta un bonito puente de madera sobre la desembocadura del r√≠o Onda. Aqu√≠ dejamos a freguesia o parroquia de Lavra (perteneciente al municipio de Matosinhos) y entramos en la freguesia de Labruge (perteneciente al municipio de Vila do Conde).</p>
                                <figure style="margin: 15px 0; border-radius: 10px; overflow: hidden; box-shadow: 0 4px 12px rgba(0,0,0,0.15);">
    <img src="https://www.playocean.net/i/portugal/beaches/vila-do-conde/labruge/praia-de-labruge-1.jpg" 
         alt="Praia de Labruge"
         style="width: 100%; height: 200px; object-fit: cover; display: block;">
         
    <figcaption style="background: rgba(0,0,0,0.7); color: white; padding: 10px; font-size: 0.9em; text-align: center; font-weight: 500;">
        üåâ Praia de Labruge
    </figcaption>
</figure>
                                <p><strong>Praia de Labruge:</strong> Llegamos a un par de lounge-bar a pie de playa, y a 250 metros hacia el interior tenemos un restaurante m√°s convencional. Quienes decidan prolongar la etapa deber√°n seguir por el litoral, sin necesidad de desviarse hacia el pueblo de Labruge.</p>
                                <div class="punto-parada">
                                    <div class="punto-parada-nombre">‚úÖ LABRUGE - FIN DE ETAPA</div>
                                    <div class="distancia-acumulada">Distancia acumulada total: 24,5 km</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <a href="https://www.google.com/maps/dir/Catedral+de+Oporto/Labruge,+Vila+do+Conde,+Portugal/@41.208166,-8.7188764,12z/data=!3m1!4b1!4m14!4m13!1m5!1m1!1s0xd2464e251ebd14d:0x22629b4df12a433e!2m2!1d-8.6111162!2d41.1428592!1m5!1m1!1s0xd24677f8d689531:0x500ebbde4911070!2m2!1d-8.7160759!2d41.2750047!3e2?entry=ttu" target="_blank" class="btn-route-map">
    üó∫Ô∏è Ver Ruta en Google Maps (24 km)
</a>

<div class="modal-section" style="margin-top: 25px;">
    <h3 class="sec-alojamiento" style="background: #e1f5fe !important; border-color: #b3e5fc !important;">üì∏ Mi Recuerdo del D√≠a</h3>
    <div class="extra-card" style="text-align: center; border-top: 3px solid #3498db; padding: 15px;">
        <div id="photo-container-etapa1" class="photo-preview" style="width: 100%; height: 250px; background: #f9f9f9; border-radius: 12px; display: flex; align-items: center; justify-content: center; overflow: hidden; margin-bottom: 12px; border: 2px dashed #3498db; position: relative;">
            <span style="color: #3498db; font-size: 0.9em; font-weight: 500;">Captura un momento especial</span>
        </div>
        
        <input type="file" id="input-photo-etapa1" accept="image/*" style="display: none;" onchange="handlePhotoUpload('etapa1', this)">
        
        <div style="display: flex; gap: 8px;">
            <button onclick="document.getElementById('input-photo-etapa1').click()" style="flex: 2; background: #3498db; color: white; border: none; padding: 10px; border-radius: 8px; cursor: pointer; font-weight: bold; font-size: 0.85em;">
                üì∑ Seleccionar Foto
            </button>
            <button onclick="removePhoto('etapa1')" style="flex: 1; background: #f8d7da; color: #721c24; border: 1px solid #f5c6cb; padding: 10px; border-radius: 8px; cursor: pointer; font-weight: bold; font-size: 0.85em;">
                üóëÔ∏è Borrar
            </button>
        </div>
    </div>
</div>

                </div>
                <div class="modal-right">
                    <div class="modal-section">
                        <h3 class="sec-alojamiento">üè® Alojamiento</h3>
                        <div class="accommodation-card">
                            <h4>üåü BEACH HOUSE *** (Labruge)</h4>
                            <div class="accommodation-details">
                                <div class="accommodation-detail-line"><strong>Fechas:</strong> 01/06/2026 ‚Äì 02/06/2026</div>
                                <div class="accommodation-detail-line"><strong>Ubicaci√≥n:</strong> A 500m del centro de Labruge</div>
                                <div class="accommodation-detail-line"><strong>Tipo:</strong> Apartamento entero</div>
                                <div class="accommodation-detail-line"><strong>Capacidad:</strong> 2 camas dobles</div>
                                <div class="accommodation-detail-line"><strong>Precio:</strong> <span style="font-size: 1.1em; font-weight: bold; color: #27ae60;">165‚Ç¨</span></div>
                            </div>
                            <a href="https://www.booking.com/Share-Zo09uJ" target="_blank" class="btn-alojamiento">Ver alojamiento en Booking</a>
                        </div>
                    </div>
                    
                    <div class="widget-card" id="diary-etapa1">
    <div class="diary-body">
        <textarea class="diary-textarea" placeholder="‚úçÔ∏è Notas personales..." oninput="saveDiary('etapa1', this.value)"></textarea>
    </div>
    <div class="diary-footer">
        <span>Guardado autom√°tico</span>
        <span id="status-etapa1">‚úÖ</span>
    </div>
</div>
                    <div class="modal-section">
                        <h3 class="sec-gastronomia">üçΩÔ∏è Gastronom√≠a</h3>
                        <div class="extra-card">
                            <p>A lo largo de la etapa podr√°s disfrutar de una excelente oferta gastron√≥mica ligada al mar:</p>
                            <ul>
                                <li><strong>Oporto y Matosinhos:</strong> ideales para probar pescado fresco a la brasa y marisco.</li>
                                <li>Platos t√≠picos: bacalao en sus m√∫ltiples preparaciones, sardinas asadas y caldeirada de peixe.</li>
                                <li>No olvides degustar un <em>Vinho Verde</em> o un vino de Oporto al finalizar la jornada.</li>
                            </ul>
                        </div>
                    </div>

                    <div class="modal-section">
    <h3 class="sec-alojamiento" style="background: #fff3e0 !important; border-color: #ffe0b2 !important;">üí∞ Mis Gastos (Etapa)</h3>
    <div class="extra-card" style="background: #fcfcfc; border-top: 3px solid #e67e22;">
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
            <div>
                <label style="font-size: 0.8em; color: #7f8c8d; display: block; margin-bottom: 4px;">üè® Alojamiento (‚Ç¨)</label>
                <input type="number" class="expense-input" data-cat="alojamiento" placeholder="0" 
                       style="width:100%; padding:8px; border:1px solid #ddd; border-radius:4px; font-size: 0.9em;">
            </div>
            <div>
                <label style="font-size: 0.8em; color: #7f8c8d; display: block; margin-bottom: 4px;">üçΩÔ∏è Comida (‚Ç¨)</label>
                <input type="number" class="expense-input" data-cat="comida" placeholder="0" 
                       style="width:100%; padding:8px; border:1px solid #ddd; border-radius:4px; font-size: 0.9em;">
            </div>
        </div>
        <div style="margin-top: 10px;">
            <label style="font-size: 0.8em; color: #7f8c8d; display: block; margin-bottom: 4px;">üéí Otros / Varios (‚Ç¨)</label>
            <input type="number" class="expense-input" data-cat="otros" placeholder="0" 
                   style="width:100%; padding:8px; border:1px solid #ddd; border-radius:4px; font-size: 0.9em;">
        </div>
        <div style="margin-top: 15px; padding-top: 10px; border-top: 1px dashed #eee; font-weight: bold; color: #2c3e50; font-size: 1em; text-align: right;">
            Total Etapa: <span class="subtotal-etapa" style="color: #e67e22;">0</span>‚Ç¨
        </div>
    </div>
</div>

                    <div class="modal-section">
                        <h3>ü§ì Curiosidades</h3>
                        <div class="extra-card">
                            <div class="expandible-text">
                                <div class="expandible-content collapsed" id="expandibleContent1">
                                    <p><strong>Recorridos de la Etapa:</strong><br>
Existen dos recorridos diferentes para iniciar este camino: uno va por la orilla del Duero y las playas del litoral atl√°ntico, y otro por el interior, excesivamente urbano y sin ver la costa en toda la jornada. El primero es intuitivo y el m√°s utilizado hoy en d√≠a por los peregrinos, si bien no dispone de flechas ‚Äìni falta que hace‚Äì hasta llegar a Matosinhos.<br><br>
El recorrido por el interior ‚Äìsin r√≠o ni playas‚Äì ser√≠a la ruta considerada "hist√≥rica", pero resulta francamente anodina y decepcionante. Quien se decante por ella debe seguir las flechas del Camino Central cruzando toda la ciudad hasta un lugar conocido como Padr√£o da L√©gua, donde se desv√≠a en direcci√≥n al aeropuerto. Os explicamos ambas posibilidades en la pesta√±a Recorrido de la etapa.<br><br>
Si decidimos ir por el litoral debemos bajar hasta el r√≠o, sin hacer caso de las flechas que han colocado por el casco antiguo. Una vez en la ribiera del Duero es imposible perderse: no hay m√°s que seguir r√≠o abajo hacia su desembocadura, la Foz do Douro.<br><br>
En algunos tramos de la etapa caminaremos por pasarelas de madera sobre la arena (passadi√ßos en portugu√©s), por las que no deben circular bicicletas para evitar incidentes con los viandantes. La alternativa de los ciclistas es tan sencilla como seguir por el paseo, donde a menudo disponen de un carril bici.<br><br>
En el litoral de Matosinhos, Angeiras y Labruge encontraremos restaurantes y chiringuitos a pie de playa donde podemos escoger el pescado, reci√©n sacado del mar, y te lo cocinan en el acto en unas parrillas con brasas, situadas a menudo en plena calle.<br><br>
<strong>PORTO</strong><br>
La catedral es un edificio que data de los siglos XII y XIII, por lo que alberga elementos de estilo rom√°nico y g√≥tico, si bien con importantes a√±adidos barrocos. La visita a la catedral es gratuita (excepto el claustro) y aqu√≠ nos sellar√°n (y entregar√°n, si la necesitamos) la credencial. El horario es de 9 a 12.30h y de 14.30 a 18h. En caso que estuviera cerrada podemos sellar en la oficina de turismo que hay justo al lado.<br>
Quiz√° lo mejor de la ciudad sea su agradable ambiente y las estupendas vistas que, desde el Cais da Ribeira (el paseo del muelle) y otros puntos de la ciudad, tenemos sobre el r√≠o Douro (Duero) y el omnipresente puente Luiz I. La ciudad tambi√©n cuenta, por supuesto, con monumentos destacados: el puente Luiz I, la catedral, la iglesia y torre de los Cl√©rigos, la estaci√≥n ferroviaria de S√£o Bento, etc.<br>
El Bacalhau, como en todo Portugal, es el producto estrella. A parte de las recetas comunes t√≠picas de todo el pa√≠s con este c√©lebre producto, en Porto destaca el Bacalhau √† Gomes de S√°, que lleva el nombre de su creador. En la elaboraci√≥n, el bacalao es desmenuzado y macerado con leche para despu√©s hornearse con ajo y cebolla y acompa√±arlo con aceitunas y huevos cocidos.<br>
Los ciudadanos de Porto son llamados tripeiros en honor a esta carne y la elaboraci√≥n m√°s famosa de la ciudad son las tripas √° moda do Porto, similares a los callos espa√±oles pero a los que se a√±aden jud√≠as blancas.<br>
Si lo que buscamos es dulce, Porto es una ciudad con multitud de opciones. Muy similares a los Past√©is de Bel√©m de Lisboa, aqu√≠ podemos encontrar las natas y otras elaboraciones que aunque no sean originarias de la ciudad, se han extendido, como los bolos de arroz, las queijadas o los oves moles.<br>
Si queremos comprar provisiones para la etapa siguiente (aunque encontraremos servicios de sobra), podemos visitar el mercado de Bolh√£o, de lunes a s√°bado en el centro de la ciudad.<br><br>
<strong>MATOSINHOS</strong><br>
Algunos peregrinos deciden tomar el autob√∫s 500 o la l√≠nea azul del metro hasta la parada de Mercado, en Matosinhos, donde comienzan las flechas. Desde aqu√≠ s√≥lo hay que cruzar el puente y seguir el paseo junto a las playas del litoral ‚Äìalgunas muy bonitas‚Äì hacia Vila do Conde, que queda a 24 km de distancia.<br><br>
<strong>LE√áA DA PALMEIRA</strong><br>
Adem√°s de las playas y sus dunas, el recorrido pasa junto a un faro, varios miradores y dos edificios del gran arquitecto portugu√©s √Ålvaro Siza Vieira: la piscina de las Mareas, que se llena con las aguas del mar, y el restaurante Boa Nova.<br><br>
<strong>LABRUGE</strong><br>
Localidad peque√±a y tranquila que dispone de albergue de peregrinos en la antigua escuela, al lado de la Junta da Freguesia (administraci√≥n local). A pocos metros hay un caf√© ‚Äìdonde se puede comer o cenar‚Äì y una pasteler√≠a-caf√©.
                                    </p>
                                    <div class="expandible-fade"></div>
                                </div>
                                <button class="btn-expandible" onclick="toggleExpand('expandibleContent1', this)">Leer m√°s</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    
    <!-- MODAL ETAPA 2 (COMPLETO) -->
    <div class="modal-backdrop" id="modalEtapa2">
        <div class="modal-panel">
            <div class="modal-header">
                <h2>Etapa 2: Labruge ‚Üí P√≥voa de Varzim - Detalles Completos</h2>
                <button class="modal-close" onclick="closeModal('modalEtapa2')">&times;</button>
            </div>
            <div class="modal-body">
                <div class="modal-left">

                    <div class="widget-card" id="weather-etapa2">
    <div class="weather-header">
        <div class="weather-info">
            <div class="weather-temp">--¬∞C</div>
            <div class="weather-desc">Cargando clima...</div>
        </div>
        <div class="weather-icon">‚è≥</div>
    </div>
</div>
                    <div class="modal-section">
                        <h3>‚ö° Datos r√°pidos</h3>
                        <div class="extra-card">
                            <ul>
                                <li><strong>Distancia:</strong> 14 km</li>
                                <li><strong>Duraci√≥n estimada:</strong> 3 horas 30 minutos</li>
                                <li><strong>Dificultad:</strong> Muy Baja</li>
                                <li><strong>Tipo de etapa:</strong> Costera, playas y centros urbanos</li>
                                <li><strong>Pavimento:</strong> Pasarelas de madera, playas y calles urbanas</li>
                            </ul>
                        </div>
                    </div>
                    <div class="modal-section">
                        <h3 class="sec-tramos">üìç Tramos y Puntos de Parada</h3>
                        <div class="tramo">
                            <div class="tramo-header">
                                <h4>Tramo 1: Labruge ‚Üí Vila Ch√£</h4>
                                <div class="tramo-header-right">
                                    <span class="tramo-distance">3,4 km</span>
                                    <span class="tramo-toggle-icon">Ôºã</span>
                                </div>
                            </div>
                            <div class="tramo-content">
                                <p>Aquellos que hayan dormido en el albergue de Labruge deben volver hasta la playa para retomar el camino. Los que vengan por la costa y prosigan hacia Vila do Conde no tienen porqu√© entrar en la localidad de Labruge.</p>
                                <p>El camino sigue por pasarelas de madera entre playas, mont√≠culos rocosos y zonas de dunas, en un tramo con paisajes muy bonitos. Una de las primeras playas es la de Sampaio, donde se descubri√≥ un castro de la Edad del Hierro. Enseguida llegamos a las casas de pescadores de Vila Ch√£, originales y multicolores; en una plaza junto a la playa vemos una original capillita vidriada con una imagen de la Senhora da Guia en su interior.</p>
                                <div class="punto-parada">
                                    <div class="punto-parada-nombre">üìç VILA CH√É</div>
                                    <div class="distancia-acumulada">Distancia acumulada: 3,4 km</div>
                                </div>
                            </div>
                        </div>
                        <div class="tramo">
                            <div class="tramo-header">
                                <h4>Tramo 2: Vila Ch√£ ‚Üí Lou√ß√°-Mindelo</h4>
                                <div class="tramo-header-right">
                                    <span class="tramo-distance">1,1 km</span>
                                    <span class="tramo-toggle-icon">Ôºã</span>
                                </div>
                            </div>
                            <div class="tramo-content">
                                <p>Atravesamos la localidad, que dispone de un par de caf√©s, restaurantes y algunas tiendas; tambi√©n tenemos un camping y un albergue municipal de peregrinos (a apenas 300 metros del camino, hay cartelitos para llegar). Enseguida, por la Av. Marginal, entramos en el barrio de Lou√ß√°.</p>
                                <div class="punto-parada">
                                    <div class="punto-parada-nombre">üìç LOU√á√Å-MINDELO</div>
                                    <div class="distancia-acumulada">Distancia acumulada: 4,5 km</div>
                                </div>
                            </div>
                        </div>
                        <div class="tramo">
                            <div class="tramo-header">
                                <h4>Tramo 3: Lou√ß√°-Mindelo ‚Üí Vila do Conde</h4>
                                <div class="tramo-header-right">
                                    <span class="tramo-distance">6,2 km</span>
                                    <span class="tramo-toggle-icon">Ôºã</span>
                                </div>
                            </div>
                            <div class="tramo-content">
                                <p>Alternamos varios barrios de casas y bloques de apartamentos con tramos de pasarelas. As√≠ llegamos a la playa de Mindelo, donde las pasarelas nos conducen por detr√°s de las dunas. Seguimos de frente, bordeando la Reserva Ornitol√≥gica de Mindelo. Tras los bloques de apartamentos de la playa de √Årvore, ya con la vista de Vila do Conde al fondo, volvemos a las pasarelas. Seguimos por la playa en paralelo a la valla del camping de √Årvore; justo al final del camping enfilamos hacia el interior.</p>
                                <p>Al llegar a la carretera N13 giramos a la izquierda y por la misma acera cruzamos el puente sobre el r√≠o Ave. Al otro lado vemos la enorme mole del convento de Santa Clara. Tras cruzar el puente entramos en Vila do Conde.</p>
                                <div class="punto-parada">
                                    <div class="punto-parada-nombre">üìç VILA DO CONDE</div>
                                    <div class="distancia-acumulada">Distancia acumulada: 10,7 km</div>
                                </div>
                            </div>
                        </div>
                        <div class="tramo">
                            <div class="tramo-header">
                                <h4>Tramo 4: Vila do Conde ‚Üí P√≥voa de Varzim</h4>
                                <div class="tramo-header-right">
                                    <span class="tramo-distance">3,3 km</span>
                                    <span class="tramo-toggle-icon">Ôºã</span>
                                </div>
                            </div>
                            <div class="tramo-content">
                                <p>Nuestra ruta contin√∫a en subida por la estrecha Rua da Igreja y tuerce a la derecha por la Rua da Costa, callejeando hasta la Rua dos Benguiados, por la que llegamos a una rotonda donde hay un estanque y una escultura con dos figuras de bronce.</p>
                                <p>Seguimos recto por la misma Rua dos Benguiados, a lo largo de la valla de un instituto y una escuela, y continuamos por la Rua da Estrada Velha y Rua das Violetas, pasando junto al cementerio das Caxinhas. A lo largo de la Rua dos Ferreiros accedemos al municipio de P√≥voa de Varzim, ciudad importante y con todos los servicios.</p>
                                <div class="punto-parada">
                                    <div class="punto-parada-nombre">‚úÖ P√ìVOA DE VARZIM - FIN DE ETAPA</div>
                                    <div class="distancia-acumulada">Distancia acumulada total: 14 km</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <a href="https://www.google.com/maps/dir/Labruge,+Portugal/P%C3%B3voa+de+Varzim,+Portugal/@41.3283259,-8.7884185,13z/data=!3m1!4b1!4m14!4m13!1m5!1m1!1s0xd24677f8d689531:0x500ebbde4911070!2m2!1d-8.7160759!2d41.2750047!1m5!1m1!1s0xd246e7ae3d34605:0x400ebbde4903bc0!2m2!1d-8.7612376!2d41.3804369!3e2?entry=ttu" target="_blank" class="btn-route-map">
    üó∫Ô∏è Ver Ruta en Google Maps (14 km)
                    </a>

                    <div class="modal-section" style="margin-top: 25px;">
    <h3 class="sec-alojamiento" style="background: #e1f5fe !important; border-color: #b3e5fc !important;">üì∏ Mi Recuerdo del D√≠a</h3>
    <div class="extra-card" style="text-align: center; border-top: 3px solid #3498db; padding: 15px;">
        <div id="photo-container-etapa2" class="photo-preview" style="width: 100%; height: 250px; background: #f9f9f9; border-radius: 12px; display: flex; align-items: center; justify-content: center; overflow: hidden; margin-bottom: 12px; border: 2px dashed #3498db; position: relative;">
            <span style="color: #3498db; font-size: 0.9em; font-weight: 500;">Captura un momento especial</span>
        </div>
        
        <input type="file" id="input-photo-etapa2" accept="image/*" style="display: none;" onchange="handlePhotoUpload('etapa2', this)">
        
        <div style="display: flex; gap: 8px;">
            <button onclick="document.getElementById('input-photo-etapa2').click()" style="flex: 2; background: #3498db; color: white; border: none; padding: 10px; border-radius: 8px; cursor: pointer; font-weight: bold; font-size: 0.85em;">
                üì∑ Seleccionar Foto
            </button>
            <button onclick="removePhoto('etapa2')" style="flex: 1; background: #f8d7da; color: #721c24; border: 1px solid #f5c6cb; padding: 10px; border-radius: 8px; cursor: pointer; font-weight: bold; font-size: 0.85em;">
                üóëÔ∏è Borrar
            </button>
        </div>
    </div>
</div>

                </div>
                <div class="modal-right">
                    <div class="modal-section">
                        <h3 class="sec-alojamiento">üè® Alojamiento</h3>
                        <div class="accommodation-card">
                            <h4>üåü CASA FRAGOSA (P√≥voa de Varzim)</h4>
                            <div class="accommodation-details">
                                <div class="accommodation-detail-line"><strong>Fechas:</strong> 02/06/2026 ‚Äì 03/06/2026</div>
                                <div class="accommodation-detail-line"><strong>Ubicaci√≥n:</strong> A 2,3 km del centro de P√≥voa de Varzim</div>
                                <div class="accommodation-detail-line"><strong>Tipo:</strong> Habitaci√≥n familiar con ba√±o</div>
                                <div class="accommodation-detail-line"><strong>Camas:</strong> 2 individuales + 1 doble</div>
                                <div class="accommodation-detail-line"><strong>Precio:</strong> <span style="font-size: 1.1em; font-weight: bold; color: #27ae60;">86‚Ç¨</span></div>
                            </div>
                            <a href="https://www.booking.com/Share-twQySs" target="_blank" class="btn-alojamiento">
                                Ver alojamiento en Booking
                            </a>
                        </div>
                    </div>

                    <div class="widget-card" id="diary-etapa2">
    <div class="diary-body">
        <textarea class="diary-textarea" placeholder="‚úçÔ∏è Notas personales..." oninput="saveDiary('etapa2', this.value)"></textarea>
    </div>
    <div class="diary-footer">
        <span>Guardado autom√°tico</span>
        <span id="status-etapa2">‚úÖ</span>
    </div>
</div>
                    <div class="modal-section">
                        <h3 class="sec-gastronomia">üçΩÔ∏è Gastronom√≠a</h3>
                        <div class="extra-card">
                            <p>Etapa rica en oferta gastron√≥mica ligada al mar:</p>
                            <ul>
                                <li><strong>Especialidades:</strong> Pescado fresco, marisco y arroz de marisco</li>
                                <li><strong>Vila do Conde:</strong> Tradici√≥n en caldo de fideos y platos tradicionales</li>
                                <li><strong>P√≥voa de Varzim:</strong> Restaurantes con vistas al mar y cocina t√≠pica portuguesa</li>
                                <li>Prueba los vinos locales y el famoso vino verde</li>
                            </ul>
                        </div>
                    </div>

                    <div class="modal-section">
    <h3 class="sec-alojamiento" style="background: #fff3e0 !important; border-color: #ffe0b2 !important;">üí∞ Mis Gastos (Etapa)</h3>
    <div class="extra-card" style="background: #fcfcfc; border-top: 3px solid #e67e22;">
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
            <div>
                <label style="font-size: 0.8em; color: #7f8c8d; display: block; margin-bottom: 4px;">üè® Alojamiento (‚Ç¨)</label>
                <input type="number" class="expense-input" data-cat="alojamiento" placeholder="0" 
                       style="width:100%; padding:8px; border:1px solid #ddd; border-radius:4px; font-size: 0.9em;">
            </div>
            <div>
                <label style="font-size: 0.8em; color: #7f8c8d; display: block; margin-bottom: 4px;">üçΩÔ∏è Comida (‚Ç¨)</label>
                <input type="number" class="expense-input" data-cat="comida" placeholder="0" 
                       style="width:100%; padding:8px; border:1px solid #ddd; border-radius:4px; font-size: 0.9em;">
            </div>
        </div>
        <div style="margin-top: 10px;">
            <label style="font-size: 0.8em; color: #7f8c8d; display: block; margin-bottom: 4px;">üéí Otros / Varios (‚Ç¨)</label>
            <input type="number" class="expense-input" data-cat="otros" placeholder="0" 
                   style="width:100%; padding:8px; border:1px solid #ddd; border-radius:4px; font-size: 0.9em;">
        </div>
        <div style="margin-top: 15px; padding-top: 10px; border-top: 1px dashed #eee; font-weight: bold; color: #2c3e50; font-size: 1em; text-align: right;">
            Total Etapa: <span class="subtotal-etapa" style="color: #e67e22;">0</span>‚Ç¨
        </div>
    </div>
</div>


                    <div class="modal-section">
                        <h3>ü§ì Curiosidades</h3>
                        <div class="extra-card">
                            <div class="expandible-text">
                                <div class="expandible-content collapsed" id="expandibleContent2">
                                    <p><strong>LABRUGE</strong><br>
El camino contin√∫a por la costa sobre pasarelas de madera, entre paisajes muy fotog√©nicos con playas, promontorios rocosos y zonas de dunas. Hoy pasaremos junto a una reserva ornitol√≥gica que a lo largo del a√±o alberga m√°s de 150 especies de aves.<br>
En los tramos por pasarelas han marcado el camino de forma discreta e inteligente, substituyendo una de las tablillas de madera del pavimento por otra de pl√°stico de color amarillo o azul, con el texto buen camino en varios idiomas.<br>
Las playas largas invitan a descalzase y caminar un rato por la orilla. Si todav√≠a no lo hab√©is hecho, os lo recomendamos: es un placer para los pies y para la mente.<br><br>
<strong>VILA CHA</strong><br>
En una loma sobre la playa podemos ver los restos arqueol√≥gicos del Castro Sampaio, un poblado celta que data de la Edad del Hierro (hacia el siglo V a. C.), si bien sigui√≥ habitado durante la dominaci√≥n romana.<br>
El litoral que estamos recorriendo era conocido hasta mediados del siglo XX como la Costa Negra, por ser la m√°s peligrosa del pa√≠s para la navegaci√≥n. Lo podemos comprobar por las numerosas placas conmemorativas de tragedias de naufragios.<br><br>
<strong>AZURARA</strong><br>
El recorrido por el litoral y el "trazado hist√≥rico" que viene del Padr√£o da Legua confluyen en Azurara, unos metros antes del puente sobre el r√≠o Ave, a la entrada de Vila do Conde.<br><br>
<strong>VILA DO CONDE</strong><br>
En el skyline de la villa destaca un largu√≠simo acueducto de 999 arcos, del que se conservan sus √∫ltimos 5 km. Fue construido entre 1705 y 1714 para conducir agua desde un manantial del interior hasta el convento de Santa Clara.<br>
La localidad dispone de estaci√≥n de metro de la l√≠nea B-roja que comunica con Porto. Algunos deciden caminar una primera etapa Matosinhos-Vila do Conde sin peso, tomando acto seguido el metro para dormir de nuevo en Porto, y volviendo aqu√≠ al d√≠a siguiente, bien temprano y ya con la mochila. Aunque pueda parecer una combinaci√≥n un tanto artificial, utilizar la ayuda del transporte p√∫blico tiene muchos adeptos.<br><br>
<strong>P√ìVOA DE VARZIM</strong><br>
Si el tiempo acompa√±a puede ser una buena idea pasar la tarde en la playa de P√≥voa, muy concurrida en √©poca estival. Adem√°s de casetas de ba√±o, bares chill out y restaurantes, tenemos muy cerca el sobrio edificio del Casino, una biblioteca e incluso, algo m√°s lejos, la plaza de toros.<br>
Otra posibilidad para quienes se aburran en P√≥voa ser√≠a aprovechar la tarde para tomar el metro hasta el centro de Porto y completar as√≠ nuestra visita de la ciudad.<br>
Los platos tradicionales de la zona reflejan la combinaci√≥n entre pesca y agricultura, destacando el Arroz de sardinhas, la Pescada √† Poveira o la Caldeirada de peixe. Los m√°s golosos no pueden perderse las Rabanadas Poveiras, una dulce tentaci√≥n a la que sin duda sucumbir√°n.
                                    </p>
                                    <div class="expandible-fade"></div>
                                </div>
                                <button class="btn-expandible" onclick="toggleExpand('expandibleContent2', this)">Leer m√°s</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
     <!-- MODAL ETAPA 3 -->
    <div class="modal-backdrop" id="modalEtapa3">
        <div class="modal-panel">
            <div class="modal-header">
                <h2>Etapa 3: P√≥voa de Varzim ‚Üí Marinhas - Detalles Completos</h2>
                <button class="modal-close" onclick="closeModal('modalEtapa3')">&times;</button>
            </div>
            <div class="modal-body">
                <div class="modal-left">
                    <div class="widget-card" id="weather-etapa3">
    <div class="weather-header">
        <div class="weather-info">
            <div class="weather-temp">--¬∞C</div>
            <div class="weather-desc">Cargando clima...</div>
        </div>
        <div class="weather-icon">‚è≥</div>
    </div>
</div>
                    <div class="modal-section">
                        <h3>‚ö° Datos r√°pidos</h3>
                        <div class="extra-card">
                            <ul>
                                <li><strong>Distancia:</strong> 24,5 km</li>
                                <li><strong>Duraci√≥n estimada:</strong> 6 horas</li>
                                <li><strong>Dificultad:</strong> Baja</li>
                                <li><strong>Tipo de etapa:</strong> Mixta, litoral y tramos interiores</li>
                                <li><strong>Pavimento:</strong> Paseos mar√≠timos, pasarelas de madera, caminos de tierra, aceras y adoquines</li>
                            </ul>
                        </div>
                    </div>

                    <div class="modal-section">
                        <h3 class="sec-tramos">üìç Tramos y Puntos de Parada</h3>

                        <!-- Tramo P√≥voa de Varzim -->
                        <div class="tramo">
                            <div class="tramo-header">
                                <h4>Tramo 1: P√≥voa de Varzim ‚Üí A Ver-o-Mar</h4>
                                <div class="tramo-header-right">
                                    <span class="tramo-distance">3,5 km</span>
                                    <span class="tramo-toggle-icon">Ôºã</span>
                                </div>
                            </div>
                            <div class="tramo-content">
                                <p>Para retomar el camino desde el centro de P√≥voa no tenemos m√°s que ir hasta el paseo mar√≠timo (Av. dos Banhos) y seguirlo en direcci√≥n norte.</p>
                                <p>A nuestra derecha se suceden cientos de bloques de apartamentos y a la izquierda, sobre la arena, tenemos bares musicales con sus terrazas chill out, algunos restaurantes y diferentes instalaciones de la playa. Al cabo de 900 metros pasaremos entre los edificios de las piscinas municipales y del campo de f√∫tbol; enseguida, y sin que cambie el paisaje, entramos en la localidad vecina de A Ver-o-Mar.</p>
                                <div class="punto-parada">
                                    <div class="punto-parada-nombre">üìç A VER-O-MAR</div>
                                    <div class="distancia-acumulada">Distancia acumulada: 3,5 km</div>
                                </div>
                            </div>
                        </div>

                        <!-- Tramo A Ver-o-Mar -->
                        <div class="tramo">
                            <div class="tramo-header">
                                <h4>Tramo 2: A Ver-o-Mar ‚Üí Agu√ßadoura</h4>
                                <div class="tramo-header-right">
                                    <span class="tramo-distance">3,6 km</span>
                                    <span class="tramo-toggle-icon">Ôºã</span>
                                </div>
                            </div>
                            <div class="tramo-content">
                                <p>El paseo de la costa pasa ahora a denominarse Av. dos Pescadores. Al final de la playa do Fragosinho una flecha nos propone girar a la izquierda para seguir ahora por pasarelas de madera sobre la arena.</p>
                                <p>En la Praia de Santo Andr√© abre en temporada un chiringuito muy jacobeo, el Caminho Beach Bar, con vieiras en su exterior y carteles indicando las distancias a Santiago, a P√≥voa y a Porto (recordemos que bastantes peregrinos utilizan este camino en sentido contrario, pues la orientaci√≥n con el mar al lado resulta muy f√°cil).</p>
                                <p>M√°s adelante, ya en la fregues√≠a (parroquia) de Agu√ßadoura, llegamos a una plaza con un crucero en el centro.</p>
                                <div class="punto-parada">
                                    <div class="punto-parada-nombre">üìç AGU√áADOURA</div>
                                    <div class="distancia-acumulada">Distancia acumulada: 7,1 km</div>
                                </div>
                            </div>
                        </div>

                        <!-- Tramo Agu√ßadoura -->
                        <div class="tramo">
                            <div class="tramo-header">
                                <h4>Tramo 3: Agu√ßadoura ‚Üí Ap√∫lia</h4>
                                <div class="tramo-header-right">
                                    <span class="tramo-distance">6,9 km</span>
                                    <span class="tramo-toggle-icon">Ôºã</span>
                                </div>
                            </div>
                            <div class="tramo-content">
                                <p>Un nuevo tramo de pasarelas de madera nos acerca al cuerpo cil√≠ndrico de un antiguo molino de viento; al cabo de 1 km llegamos ante el campo de f√∫tbol del Agu√ßadoura F√∫tebol Clube, donde dejaremos nuestro paseo por el litoral (Nota 2021: nos informan que ahora este paseo litoral se ha alargado 1,1 km m√°s, bien se√±alizado).</p>
                                <p>M√°s adelante las flechas nos llevan a girar a la derecha hasta la M-501, carreterita estrecha que discurre en paralelo a la costa. Seguiremos por su m√≠nimo arc√©n en direcci√≥n norte, entre un paisaje de campos e invernaderos. Pasamos junto a un desv√≠o a la izquierda, donde un cartel indica el acceso al camping Orbitur Rio Grande.</p>
                                <p><strong>3,8 km.</strong> Acceso al camping y a la Praia de Estela. El camping queda a 300 metros fuera del camino, entre la carretera y la playa. Nosotros debemos seguir por la carretera durante 450 metros, hasta llegar a una encrucijada donde toca girar a la izquierda por una pista adoquinada.</p>
                                <p>En breve veremos al fondo la silueta de un molino de viento, pero antes de llegar a √©l las flechas viran a la derecha, en direcci√≥n hacia una zona arbolada donde encontramos las instalaciones de un campo de f√∫tbol; nuestra ruta sigue por la Rua do Pinhal hasta que al cabo de 400 metros cruzamos una carretera y llegamos a las primeras casas de la localidad de Ap√∫lia.</p>
                                <p><strong>3,1 km.</strong> Ap√∫lia, iglesia.</p>
                                <div class="punto-parada">
                                    <div class="punto-parada-nombre">üìç AP√öLIA</div>
                                    <div class="distancia-acumulada">Distancia acumulada: 14 km</div>
                                </div>
                            </div>
                        </div>

                        <!-- Tramo Ap√∫lia -->
                        <div class="tramo">
                            <div class="tramo-header">
                                <h4>Tramo 4: Ap√∫lia ‚Üí F√£o</h4>
                                <div class="tramo-header-right">
                                    <span class="tramo-distance">3,7 km</span>
                                    <span class="tramo-toggle-icon">Ôºã</span>
                                </div>
                            </div>
                            <div class="tramo-content">
                                <p>Pasamos frente a la iglesia y recorremos las calles del centro del pueblo. Salimos por un camino adoquinado que al cabo de 800 metros nos lleva hasta una carreterita; torcemos a la izquierda y, a 30 metros, por la derecha, comienza uno de los tramos m√°s agradables de la jornada: durante 1,5 km seguiremos un camino de tierra, a la sombra de los pinos y algunos eucaliptus, que nos conduce hacia la villa de F√£o.</p>
                                <p>Despu√©s de superar el campo de f√∫tbol (con √©ste ya son cuatro los campos de f√∫tbol que hemos encontrado en la etapa de hoy), giramos a la derecha por la Rua Santo Antonio da Fonte; una vez frente al cementerio giramos a la izquierda, pasamos ante una escultura coloreada de San Antonio y seguimos la acera de la carretera N-13; la cruzamos por un paso de cebra y llegamos a la iglesia do Bom Jes√∫s.</p>
                                <p><strong>Nota:</strong> En este punto, a la entrada de F√£o, se incorpora al Camino de la Costa un ramal de enlace que proviene de S√£o Pedro de Rates, localidad que se halla a pie del Camino Portugu√©s Central. Este ramal de enlace, de unos 15 km, sale desde la iglesia de Rates y est√° marcado con pictogramas del Camino de la Costa hasta la entrada a F√£o. Los m√°s puristas definen que el trazado originario del Camino de la Costa pasaba por S√£o Pedro de Rates, cruzaba el r√≠o C√°davo por un lugar conocido como Barca do Lago, segu√≠a despu√©s por Esposende y continuaba hacia Viana do Castelo y Galicia; por lo visto dicho recorrido ya exist√≠a antes del siglo XII, mientras que el paso por Vila do Conde no est√° documentado hasta el siglo XIV. A efectos pr√°cticos, lo m√°s probable es que ni siquiera nos percatemos de la incorporaci√≥n de dicho ramal, salvo que coincidamos con alg√∫n peregrino que venga de all√≠, huyendo del Camino Portugu√©s Central.</p>
                                <div class="punto-parada">
                                    <div class="punto-parada-nombre">üìç F√ÉO</div>
                                    <div class="distancia-acumulada">Distancia acumulada: 17,7 km</div>
                                </div>
                            </div>
                        </div>

                        <!-- Tramo F√£o -->
                        <div class="tramo">
                            <div class="tramo-header">
                                <h4>Tramo 5: F√£o ‚Üí Esposende</h4>
                                <div class="tramo-header-right">
                                    <span class="tramo-distance">2,5 km</span>
                                    <span class="tramo-toggle-icon">Ôºã</span>
                                </div>
                            </div>
                            <div class="tramo-content">
                                <p>Avanzamos por la alameda de la iglesia-santuario do Bom Jes√∫s, donde tambi√©n hay un quiosco de m√∫sica. Justo a la derecha, a orillas del r√≠o, se halla el albergue-Pousada de Juventude.</p>
                                <p>Despu√©s de atravesar el casco antiguo de la villa llegamos frente al r√≠o C√°davo, que cruzaremos por el puente met√°lico de la carretera N-13, conocido como puente de D. Lu√≠s Filipe y que data del a√±o 1892; aqu√≠ el paso de los peatones discurre por pasarelas laterales, separadas del tr√°nsito de veh√≠culos.</p>
                                <p>Nada m√°s cruzar el puente giramos a la izquierda por un vial de servicio en desuso. En breve llegaremos a una rotonda, y tras superarla toca cruzar la avenida y enfilar una bocacalle empedrada que desemboca en la Rua Narciso Ferreira. Pasamos junto al cementerio y siguiendo de frente accedemos al centro de la villa de Esposende, poblaci√≥n que es cabeza de municipio y dispone de una amplia oferta de servicios.</p>
                                <p><strong>Nota:</strong> Desde la rotonda, si alguien prefiere evitar el meollo del casco urbano de Esposende, se puede seguir el paseo litoral, que va bordeando el estuario del r√≠o.</p>
                                <div class="punto-parada">
                                    <div class="punto-parada-nombre">üìç ESPOSENDE</div>
                                    <div class="distancia-acumulada">Distancia acumulada: 20,2 km</div>
                                </div>
                            </div>
                        </div>

                        <!-- Tramo Esposende -->
                        <div class="tramo">
                            <div class="tramo-header">
                                <h4>Tramo 6: Esposende ‚Üí Marinhas (Final de etapa)</h4>
                                <div class="tramo-header-right">
                                    <span class="tramo-distance">4,3 km</span>
                                    <span class="tramo-toggle-icon">Ôºã</span>
                                </div>
                            </div>
                            <div class="tramo-content">
                                <p>Desde el centro de Esposende seguimos de frente por la Av. Dr. Henrique Barros Lima hasta llegar ante el Hospital Valentim Ribeiro, en un elegante edificio hist√≥rico, donde giraremos a la izquierda por la Av. Rocha Gon√ßalves para volver de nuevo ante el estuario del r√≠o C√°davo.</p>
                                <p>Al cabo de 800 metros pasaremos junto al fuerte de S√£o Jo√£o Baptista, por detr√°s del cual sobresale un peque√±o faro; seguimos la Av. dos Banhos en paralelo al mar, si bien en breve se va desviando hacia el interior.</p>
                                <p>Ahora toca girar a la izquierda por la Rua da Agrela, con √°rboles y campos a lado y lado, y que al final nos deja en la localidad de Marinhas. Tomamos a la derecha la Rua da Praia y cruzamos la carretera N-13; al otro lado tenemos la capilla de S√£o Sebasti√£o y el edificio de la Cruz Roja ‚Äìla Cruz Vermelha Portuguesa‚Äì, cuyos voluntarios gestionan el albergue de peregrinos, que se halla 250 metros m√°s adelante.</p>
                                <p>Aquellos que deseen utilizar el albergue deben pasar antes por dicha oficina de la Cruz Roja para registrarse y sellar la credencial; a poca distancia disponemos de varios bares y una tienda. En la zona de la playa de Cep√£es hay m√°s bares y restaurantes; √©sta se halla a apenas 1 km de distancia del albergue, siguiendo la Rua da Praia en direcci√≥n contraria a la que llegamos.</p>
                                <div class="punto-parada">
                                    <div class="punto-parada-nombre">‚úÖ MARINHAS - FIN DE ETAPA</div>
                                    <div class="distancia-acumulada">Distancia acumulada total: 24,5 km</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <a href="https://www.google.com/maps/dir/P%C3%B3voa+de+Varzim,+Portugal/Marinhas,+Portugal/@41.4583925,-8.8258505,12z/data=!3m1!4b1!4m14!4m13!1m5!1m1!1s0xd246e7ae3d34605:0x400ebbde4903bc0!2m2!1d-8.7612376!2d41.3804369!1m5!1m1!1s0xd25b42d13000b0d:0x500ebbde490fc60!2m2!1d-8.7844093!2d41.5363412!3e2?entry=ttu" target="_blank" class="btn-route-map">
    üó∫Ô∏è Ver Ruta en Google Maps (24,5 km)
</a>

<div class="modal-section" style="margin-top: 25px;">
    <h3 class="sec-alojamiento" style="background: #e1f5fe !important; border-color: #b3e5fc !important;">üì∏ Mi Recuerdo del D√≠a</h3>
    <div class="extra-card" style="text-align: center; border-top: 3px solid #3498db; padding: 15px;">
        <div id="photo-container-etapa3" class="photo-preview" style="width: 100%; height: 250px; background: #f9f9f9; border-radius: 12px; display: flex; align-items: center; justify-content: center; overflow: hidden; margin-bottom: 12px; border: 2px dashed #3498db; position: relative;">
            <span style="color: #3498db; font-size: 0.9em; font-weight: 500;">Captura un momento especial</span>
        </div>
        
        <input type="file" id="input-photo-etapa3" accept="image/*" style="display: none;" onchange="handlePhotoUpload('etapa3', this)">
        
        <div style="display: flex; gap: 8px;">
            <button onclick="document.getElementById('input-photo-etapa3').click()" style="flex: 2; background: #3498db; color: white; border: none; padding: 10px; border-radius: 8px; cursor: pointer; font-weight: bold; font-size: 0.85em;">
                üì∑ Seleccionar Foto
            </button>
            <button onclick="removePhoto('etapa3')" style="flex: 1; background: #f8d7da; color: #721c24; border: 1px solid #f5c6cb; padding: 10px; border-radius: 8px; cursor: pointer; font-weight: bold; font-size: 0.85em;">
                üóëÔ∏è Borrar
            </button>
        </div>
    </div>
</div>

                </div>
                <div class="modal-right">
                    <div class="modal-section">
                        <h3 class="sec-alojamiento">üè® Alojamiento</h3>
                        <div class="accommodation-card">
                            <h4>üåü CASA OUTEIRO POLO 2 *** (Marinhas)</h4>
                            <div class="accommodation-details">
                                <div class="accommodation-detail-line"><strong>Fechas:</strong> 03/06/2026 ‚Äì 04/06/2026</div>
                                <div class="accommodation-detail-line"><strong>Ubicaci√≥n:</strong> A 0,5 km del centro de Marinhas</div>
                                <div class="accommodation-detail-line"><strong>Tipo:</strong> Apartamento de 3 dormitorios</div>
                                <div class="accommodation-detail-line"><strong>Camas:</strong> 2 dobles + 1 individual y un sof√° cama</div>
                                <div class="accommodation-detail-line"><strong>Precio:</strong> <span style="font-size:1.1em;font-weight:bold;color:#27ae60;">100‚Ç¨</span></div>
                            </div>
                            <a href="https://www.booking.com/Share-d0PenZ" target="_blank" class="btn-alojamiento">
                                Ver alojamiento en Booking
                            </a>
                        </div>
                    </div>

                    <div class="widget-card" id="diary-etapa3">
    <div class="diary-body">
        <textarea class="diary-textarea" placeholder="‚úçÔ∏è Notas personales..." oninput="saveDiary('etapa3', this.value)"></textarea>
    </div>
    <div class="diary-footer">
        <span>Guardado autom√°tico</span>
        <span id="status-etapa3">‚úÖ</span>
    </div>
</div>

                    <div class="modal-section">
                        <h3 class="sec-gastronomia">üçΩÔ∏è Gastronom√≠a</h3>
                        <div class="extra-card">
                            <p>En esta etapa encontrar√°s numerosos bares y restaurantes tanto en las localidades costeras como en el interior, con especialidades de mar y productos locales.</p>
                            <ul>
                                <li>Pescados y mariscos frescos en Ap√∫lia, F√£o y Esposende.</li>
                                <li>Cocina casera y platos tradicionales en las parroquias del interior.</li>
                                <li>Opciones de tapas y men√∫s econ√≥micos para peregrinos.</li>
                            </ul>
                        </div>
                    </div>

                    <div class="modal-section">
    <h3 class="sec-alojamiento" style="background: #fff3e0 !important; border-color: #ffe0b2 !important;">üí∞ Mis Gastos (Etapa)</h3>
    <div class="extra-card" style="background: #fcfcfc; border-top: 3px solid #e67e22;">
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
            <div>
                <label style="font-size: 0.8em; color: #7f8c8d; display: block; margin-bottom: 4px;">üè® Alojamiento (‚Ç¨)</label>
                <input type="number" class="expense-input" data-cat="alojamiento" placeholder="0" 
                       style="width:100%; padding:8px; border:1px solid #ddd; border-radius:4px; font-size: 0.9em;">
            </div>
            <div>
                <label style="font-size: 0.8em; color: #7f8c8d; display: block; margin-bottom: 4px;">üçΩÔ∏è Comida (‚Ç¨)</label>
                <input type="number" class="expense-input" data-cat="comida" placeholder="0" 
                       style="width:100%; padding:8px; border:1px solid #ddd; border-radius:4px; font-size: 0.9em;">
            </div>
        </div>
        <div style="margin-top: 10px;">
            <label style="font-size: 0.8em; color: #7f8c8d; display: block; margin-bottom: 4px;">üéí Otros / Varios (‚Ç¨)</label>
            <input type="number" class="expense-input" data-cat="otros" placeholder="0" 
                   style="width:100%; padding:8px; border:1px solid #ddd; border-radius:4px; font-size: 0.9em;">
        </div>
        <div style="margin-top: 15px; padding-top: 10px; border-top: 1px dashed #eee; font-weight: bold; color: #2c3e50; font-size: 1em; text-align: right;">
            Total Etapa: <span class="subtotal-etapa" style="color: #e67e22;">0</span>‚Ç¨
        </div>
    </div>
</div>


                    <div class="modal-section">
                        <h3>ü§ì Curiosidades</h3>
                        <div class="extra-card">
                            <div class="expandible-text">
                                <div class="expandible-content collapsed" id="expandibleContent3">
                                    <p>Al final del paseo mar√≠timo de P√≥voa nuestro camino vuelve a las pasarelas de madera sobre las playas. Como pod√©is imaginar no las han construido para los peregrinos, sino para encauzar el paso de todos sus usuarios: as√≠ se evita el deterioro de las dunas y de su vegetaci√≥n, que constituyen un ecosistema protegido.<br>
Las se√±ales en este tramo del Camino Portugu√©s de la Costa son peque√±os pictogramas, ya sea troquelados sobre placas de acero pre-oxidado, o bien en un material composite muy resistente que combina los colores azul y amarillo. Un dise√±o sencillo y pr√°ctico.<br><br>
<strong>FAO</strong><br>
A la entrada de F√£o se incorpora a nuestro Camino de la Costa un ramal de enlace que proviene de S√£o Pedro de Rates, localidad que se halla a pie del Camino Portugu√©s Central. Los m√°s puristas defienden que el trazado originario del Camino de la Costa pasaba por S√£o Pedro de Rates.<br>
Durante la jornada, tanto en las playas como junto a los campos, seguramente veamos unos montones extra√±os, parecidos a balas de paja: son sargazos, unas algas gelatinosas de color amarronado que se extraen del mar y se utilizan aqu√≠ para el abono de los cultivos.<br><br>
Hoy nuestro recorrido frente al mar pasa junto a varios molinos de viento, utilizados durante siglos para moler el grano. Las aspas eran varas con velas triangulares ‚Äìalgo diferente a la imagen t√≠pica de los molinos de La Mancha‚Äì y la cubierta era rotatoria, girando en funci√≥n de la direcci√≥n del viento. Algunos molinos est√°n abandonados, si bien la mayor√≠a han sido reconvertidos en casitas de veraneo.<br><br>
Veremos tramos de pasarelas donde se permite el paso de bicicletas, pero √©stas deben circular despacio y con suma precauci√≥n, pues los paseantes tienen preferencia.<br><br>
<strong>MARTINHAS</strong><br>
Si el tiempo acompa√±a os recomendamos pasar la tarde en la playa de Cep√£es, que est√° a apenas 1 km del albergue de Marinhas, siguiendo la Rua da Praia en direcci√≥n contraria a la que llegamos. Un lugar tranquilo y con una excelente terraza a pie de arena, con sof√°s, hamacas y m√∫sica al atardecer.
                                    </p>
                                    <div class="expandible-fade"></div>
                                </div>
                                <button class="btn-expandible" onclick="toggleExpand('expandibleContent3', this)">Leer m√°s</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- MODAL ETAPA 4 -->
    <div class="modal-backdrop" id="modalEtapa4">
        <div class="modal-panel">
            <div class="modal-header">
                <h2>Etapa 4: Marinhas ‚Üí Viana do Castelo - Detalles Completos</h2>
                <button class="modal-close" onclick="closeModal('modalEtapa4')">&times;</button>
            </div>
            <div class="modal-body">
                <div class="modal-left">

                    <div class="widget-card" id="weather-etapa4">
    <div class="weather-header">
        <div class="weather-info">
            <div class="weather-temp">--¬∞C</div>
            <div class="weather-desc">Cargando clima...</div>
        </div>
        <div class="weather-icon">‚è≥</div>
    </div>
</div>
                    <div class="modal-section">
                        <h3>‚ö° Datos r√°pidos</h3>
                        <div class="extra-card">
                            <ul>
                                <li><strong>Distancia:</strong> 20,8 km</li>
                                <li><strong>Duraci√≥n estimada:</strong> 5 horas 15 minutos</li>
                                <li><strong>Dificultad:</strong> Baja</li>
                                <li><strong>Tipo de etapa:</strong> Interior, senderos y bosque</li>
                                <li><strong>Pavimento:</strong> Calles empedradas, pistas de tierra, senderos y carreteras</li>
                            </ul>
                        </div>
                    </div>

                    <div class="modal-section">
                        <h3 class="sec-tramos">üìç Tramos y Puntos de Parada</h3>

                        <!-- Tramo Marinhas -->
                        <div class="tramo">
                            <div class="tramo-header">
                                <h4>Tramo 1: Marinhas ‚Üí Mar (Esposende)</h4>
                                <div class="tramo-header-right">
                                    <span class="tramo-distance">2,7 km</span>
                                    <span class="tramo-toggle-icon">Ôºã</span>
                                </div>
                            </div>
                            <div class="tramo-content">
                                <p>Seguimos la calle del albergue hasta el final, donde est√° la iglesia de S√£o Miguel, y giramos a la derecha. Despu√©s del Centro de Educaci√≥n Ambiental torcemos a la izquierda por la Rua de S√£o Jo√£o, y en breve pasaremos ante la capilla de S√£o Jo√£o do Monte. Por la Rua da Ponte Nova, Rua da Estrada Velha y la Estrada Real llegamos al edificio del Centro C√≠vico de Mar.</p>
                                <div class="punto-parada">
                                    <div class="punto-parada-nombre">üìç MAR (ESPOSENDE)</div>
                                    <div class="distancia-acumulada">Distancia acumulada: 2,7 km</div>
                                </div>
                            </div>
                        </div>

                        <!-- Tramo Mar -->
                        <div class="tramo">
                            <div class="tramo-header">
                                <h4>Tramo 2: Mar ‚Üí Belinho</h4>
                                <div class="tramo-header-right">
                                    <span class="tramo-distance">1,2 km</span>
                                    <span class="tramo-toggle-icon">Ôºã</span>
                                </div>
                            </div>
                            <div class="tramo-content">
                                <p>Continuamos en la misma direcci√≥n, siguiendo las flechas por las calles de la localidad. Una vez en la Rua Padre Almeida pasamos junto a una escuela donde hay un mural que saluda a los peregrinos, y llegamos a la iglesia de Belinho, con un cruceiro.</p>
                                <div class="punto-parada">
                                    <div class="punto-parada-nombre">üìç BELINHO</div>
                                    <div class="distancia-acumulada">Distancia acumulada: 3,9 km</div>
                                </div>
                            </div>
                        </div>

                        <!-- Tramo Belinho -->
                        <div class="tramo">
                            <div class="tramo-header">
                                <h4>Tramo 3: Belinho ‚Üí Antas</h4>
                                <div class="tramo-header-right">
                                    <span class="tramo-distance">1,9 km</span>
                                    <span class="tramo-toggle-icon">Ôºã</span>
                                </div>
                            </div>
                            <div class="tramo-content">
                                <p>Seguimos de frente por la misma Rua Padre Almeida, y pasamos ante la urbanizaci√≥n Quinta do Para√≠so, que rodeamos por la izquierda. La adoquinada Rua Bar√£o de Maracan√° se convierte en pista de tierra, con muros de piedra a ambos lados, por la que llegamos a una carreterita donde hay una capilla; seguimos su acera hacia la izquierda durante 200 metros, pasando ante un cruceiro, y la dejamos por la derecha. Estamos en la fregues√≠a de Antas.</p>
                                <div class="punto-parada">
                                    <div class="punto-parada-nombre">üìç ANTAS</div>
                                    <div class="distancia-acumulada">Distancia acumulada: 5,8 km</div>
                                </div>
                            </div>
                        </div>

                        <!-- Tramo Antas -->
                        <div class="tramo">
                            <div class="tramo-header">
                                <h4>Tramo 4: Antas ‚Üí Castelo do Neiva</h4>
                                <div class="tramo-header-right">
                                    <span class="tramo-distance">2,9 km</span>
                                    <span class="tramo-toggle-icon">Ôºã</span>
                                </div>
                            </div>
                            <div class="tramo-content">
                                <p>Enseguida llegamos al cruce con la carretera EN-13, que atravesamos con cuidado, y seguimos de frente por la estrecha Rua da Carvalha, entre casas y muros de piedra; √©sta contin√∫a por una pista de tierra en bajada que se introduce en el bosque.</p>
                                <p>Tras pasar una encrucijada con un gran monolito jacobeo en piedra, comienza a la izquierda un sendero estrecho y precioso que desciende hasta el cauce del r√≠o Neiva, junto al antiguo molino o azenha de Guilheta (ahora es una casa rural). El paso del r√≠o, por lo general bastante caudaloso, se realiza mediante una pontella o plataforma de losas de granito sin barandilla, como deb√≠a hacerse ya en √©pocas romanas y medievales.</p>
                                <p><strong>1,2 km.</strong> Paso del r√≠o Neiva. Disfrutemos del lugar, que es precioso. Aunque parezca un paso un tanto inseguro, especialmente si ha llovido y estuviera resbaladizo, la anchura es suficiente. S√≥lo hay que agarrar fuerte el bast√≥n, mirar al frente y cruzar sin miedo. Una vez al otro lado seguimos a mano derecha por pista empedrada, en fuerte subida, pasando entre las casas del barrio de Rua da Cima, hasta llegar a la Capilla de N. S. de Guadalupe, con c√©sped alrededor. Justo enfrente han abierto en 2018 el albergue de peregrinos Dom Nausti, gestionado por una asociaci√≥n de peregrinos.</p>
                                <p>Seguimos a la derecha hasta el cruce con la carretera EN-13-3; aqu√≠ arranca la Travessa de Santiago, atajo adoquinado en fuerte subida que nos conducir√° hasta la iglesia de S√£o Tiago.</p>
                                <p><strong>1,7 km.</strong> Iglesia de S√£o Tiago de Castelo do Neiva. En la iglesia tenemos un sello muy bonito, que reproduce la inscripci√≥n del a√±o 862, cuando esta iglesia fue consagrada y dedicada a Santiago, siendo la referencia al ap√≥stol m√°s antigua en Portugal y una de las primeras en toda la Pen√≠nsula. La l√°pida original la podemos ver en una pared interior, cerca de la entrada, medio escondida tras las figuras de un retablo. Al lado de la iglesia hay unos aseos p√∫blicos, modernos y muy limpios, que podemos utilizar libremente.</p>
                                <div class="punto-parada">
                                    <div class="punto-parada-nombre">üìç CASTELO DO NEIVA</div>
                                    <div class="distancia-acumulada">Distancia acumulada: 8,7 km</div>
                                </div>
                            </div>
                        </div>

                        <!-- Tramo Castelo do Neiva -->
                        <div class="tramo">
                            <div class="tramo-header">
                                <h4>Tramo 5: Castelo do Neiva ‚Üí Chaf√©</h4>
                                <div class="tramo-header-right">
                                    <span class="tramo-distance">4,6 km</span>
                                    <span class="tramo-toggle-icon">Ôºã</span>
                                </div>
                            </div>
                            <div class="tramo-content">
                                <p>Nuestra ruta contin√∫a en direcci√≥n hacia la zona del aparcamiento de veh√≠culos; una vez en √©ste giramos a la derecha y tomaremos un camino de tierra que arranca en fuerte subida, bordeando el cementerio; aqu√≠ comienza otro tramo muy bello por el bosque, en el que se suceden senderos de tierra con algunas subidas empedradas. Pasamos por las casas del barrio de Monte, perteneciente a la parroquia de Neiva, y volvemos a internarnos en el bosque hasta desembocar en la iglesia barroca del monasterio de S√£o Rom√£o de Neiva.</p>
                                <p><strong>3,2 km.</strong> S√£o Rom√£o de Neiva. Pasamos ante la iglesia y su cementerio y continuamos por la calle que sale a la izquierda, en ligera subida. En s√≥lo unos minutos entramos en el pueblo de Chaf√©.</p>
                                <p><strong>1,4 km.</strong> Chaf√©.</p>
                                <div class="punto-parada">
                                    <div class="punto-parada-nombre">üìç CHAF√â</div>
                                    <div class="distancia-acumulada">Distancia acumulada: 13,3 km</div>
                                </div>
                            </div>
                        </div>

                        <!-- Tramo Chaf√© -->
                        <div class="tramo">
                            <div class="tramo-header">
                                <h4>Tramo 6: Chaf√© ‚Üí Anha</h4>
                                <div class="tramo-header-right">
                                    <span class="tramo-distance">2,3 km</span>
                                    <span class="tramo-toggle-icon">Ôºã</span>
                                </div>
                            </div>
                            <div class="tramo-content">
                                <p>Al llegar al cementerio giramos a la izquierda; vamos siguiendo un rosario de calles empedradas hasta entrar en la fregues√≠a (parroquia) de Vila Nova de Anha. Llegamos ante la iglesia parroquial de S√£o Tiago y, frente a ella, hay una peque√±a capilla neocl√°sica, donde podemos sellar la credencial.</p>
                                <div class="punto-parada">
                                    <div class="punto-parada-nombre">üìç ANHA</div>
                                    <div class="distancia-acumulada">Distancia acumulada: 15,6 km</div>
                                </div>
                            </div>
                        </div>

                        <!-- Tramo Anha -->
                        <div class="tramo">
                            <div class="tramo-header">
                                <h4>Tramo 7: Anha ‚Üí Darque</h4>
                                <div class="tramo-header-right">
                                    <span class="tramo-distance">2,7 km</span>
                                    <span class="tramo-toggle-icon">Ôºã</span>
                                </div>
                            </div>
                            <div class="tramo-content">
                                <p>Tras cruzar la localidad salimos por una carreterita asfaltada entre campos y bosque, que nos deja en un pol√≠gono industrial sin finalizar; tras un tramo por camino de arena en bajada llegamos a Darque, con viviendas y servicios a pie de carretera, que es la antesala de Viana do Castelo.</p>
                                <div class="punto-parada">
                                    <div class="punto-parada-nombre">üìç DARQUE</div>
                                    <div class="distancia-acumulada">Distancia acumulada: 18,3 km</div>
                                </div>
                            </div>
                        </div>

                        <!-- Tramo Darque -->
                        <div class="tramo">
                            <div class="tramo-header">
                                <h4>Tramo 8: Darque ‚Üí Viana do Castelo (Final de etapa)</h4>
                                <div class="tramo-header-right">
                                    <span class="tramo-distance">2,5 km</span>
                                    <span class="tramo-toggle-icon">Ôºã</span>
                                </div>
                            </div>
                            <div class="tramo-content">
                                <p>Avanzamos por la acera de la carretera N-13 hasta una rotonda, tras la cual seguimos de frente para enfilar el gran puente Eiffel sobre el r√≠o Lima, que tiene dos niveles: el tablero superior para autom√≥viles y peatones, y el inferior para los ferrocarriles. Una vez al otro lado del r√≠o podemos seguir hacia la izquierda, en direcci√≥n al centro hist√≥rico de Viana do Castelo, o buscar alojamiento.</p>
                                <p>Llegamos a la c√©ntrica Pra√ßa da Rep√∫blica, donde daremos por acabado el recorrido de la etapa, si bien aqu√≠ comenzar√≠a nuestra visita por el casco antiguo de la ciudad.</p>
                                <div class="punto-parada">
                                    <div class="punto-parada-nombre">‚úÖ VIANA DO CASTELO - FIN DE ETAPA</div>
                                    <div class="distancia-acumulada">Distancia acumulada total: 20,8 km</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <a href="https://www.google.com/maps/dir/Marinhas,+Portugal/Viana+do+Castelo,+Portugal/@41.614917,-8.859665,12z/data=!3m1!4b1!4m14!4m13!1m5!1m1!1s0xd25b42d13000b0d:0x500ebbde490fc60!2m2!1d-8.7844093!2d41.5363412!1m5!1m1!1s0xd25b62649060b2d:0x400ebbde4903820!2m2!1d-8.832596!2d41.69323!3e2?entry=ttu" target="_blank" class="btn-route-map">
    üó∫Ô∏è Ver Ruta en Google Maps (20,8 km)
</a>

<div class="modal-section" style="margin-top: 25px;">
    <h3 class="sec-alojamiento" style="background: #e1f5fe !important; border-color: #b3e5fc !important;">üì∏ Mi Recuerdo del D√≠a</h3>
    <div class="extra-card" style="text-align: center; border-top: 3px solid #3498db; padding: 15px;">
        <div id="photo-container-etapa4" class="photo-preview" style="width: 100%; height: 250px; background: #f9f9f9; border-radius: 12px; display: flex; align-items: center; justify-content: center; overflow: hidden; margin-bottom: 12px; border: 2px dashed #3498db; position: relative;">
            <span style="color: #3498db; font-size: 0.9em; font-weight: 500;">Captura un momento especial</span>
        </div>
        
        <input type="file" id="input-photo-etapa4" accept="image/*" style="display: none;" onchange="handlePhotoUpload('etapa4', this)">
        
        <div style="display: flex; gap: 8px;">
            <button onclick="document.getElementById('input-photo-etapa4').click()" style="flex: 2; background: #3498db; color: white; border: none; padding: 10px; border-radius: 8px; cursor: pointer; font-weight: bold; font-size: 0.85em;">
                üì∑ Seleccionar Foto
            </button>
            <button onclick="removePhoto('etapa4')" style="flex: 1; background: #f8d7da; color: #721c24; border: 1px solid #f5c6cb; padding: 10px; border-radius: 8px; cursor: pointer; font-weight: bold; font-size: 0.85em;">
                üóëÔ∏è Borrar
            </button>
        </div>
    </div>
</div>

                </div>
                <div class="modal-right">
                    <div class="modal-section">
                        <h3 class="sec-alojamiento">üè® Alojamiento</h3>
                        <div class="accommodation-card">
                            <h4>üåü 3 MARIAS RESIDENCE *** (Viana do Castelo)</h4>
                            <div class="accommodation-details">
                                <div class="accommodation-detail-line"><strong>Fechas:</strong> 04/06/2026 ‚Äì 05/06/2026</div>
                                <div class="accommodation-detail-line"><strong>Ubicaci√≥n:</strong> A 1 km del centro de Viana do Castelo</div>
                                <div class="accommodation-detail-line"><strong>Tipo:</strong> Suite de 2 dormitorios</div>
                                <div class="accommodation-detail-line"><strong>Camas:</strong> 1 doble extragrande + 2 individuales</div>
                                <div class="accommodation-detail-line"><strong>Servicios:</strong> Piscina</div>
                                <div class="accommodation-detail-line"><strong>Precio:</strong> <span style="font-size: 1.1em; font-weight: bold; color: #27ae60;">106‚Ç¨</span></div>
                            </div>
                            <a href="https://www.booking.com/Share-rrTim3C" target="_blank" class="btn-alojamiento">
                                Ver alojamiento en Booking
                            </a>
                        </div>
                    </div>

                    <div class="widget-card" id="diary-etapa4">
    <div class="diary-body">
        <textarea class="diary-textarea" placeholder="‚úçÔ∏è Notas personales..." oninput="saveDiary('etapa4', this.value)"></textarea>
    </div>
    <div class="diary-footer">
        <span>Guardado autom√°tico</span>
        <span id="status-etapa4">‚úÖ</span>
    </div>
</div>

                    <div class="modal-section">
                        <h3 class="sec-gastronomia">üçΩÔ∏è Gastronom√≠a</h3>
                        <div class="extra-card">
                            <p>En esta etapa por el interior encontrar√°s opciones gastron√≥micas variadas en los pueblos y localidades:</p>
                            <ul>
                                <li>Cocina casera tradicional portuguesa en caf√©s y peque√±os restaurantes.</li>
                                <li>Especialidades de carnes y productos locales.</li>
                                <li>En Viana do Castelo: amplia oferta de restaurantes con cocina t√≠pica y especialidades de mar.</li>
                            </ul>
                        </div>
                    </div>

                    <div class="modal-section">
    <h3 class="sec-alojamiento" style="background: #fff3e0 !important; border-color: #ffe0b2 !important;">üí∞ Mis Gastos (Etapa)</h3>
    <div class="extra-card" style="background: #fcfcfc; border-top: 3px solid #e67e22;">
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
            <div>
                <label style="font-size: 0.8em; color: #7f8c8d; display: block; margin-bottom: 4px;">üè® Alojamiento (‚Ç¨)</label>
                <input type="number" class="expense-input" data-cat="alojamiento" placeholder="0" 
                       style="width:100%; padding:8px; border:1px solid #ddd; border-radius:4px; font-size: 0.9em;">
            </div>
            <div>
                <label style="font-size: 0.8em; color: #7f8c8d; display: block; margin-bottom: 4px;">üçΩÔ∏è Comida (‚Ç¨)</label>
                <input type="number" class="expense-input" data-cat="comida" placeholder="0" 
                       style="width:100%; padding:8px; border:1px solid #ddd; border-radius:4px; font-size: 0.9em;">
            </div>
        </div>
        <div style="margin-top: 10px;">
            <label style="font-size: 0.8em; color: #7f8c8d; display: block; margin-bottom: 4px;">üéí Otros / Varios (‚Ç¨)</label>
            <input type="number" class="expense-input" data-cat="otros" placeholder="0" 
                   style="width:100%; padding:8px; border:1px solid #ddd; border-radius:4px; font-size: 0.9em;">
        </div>
        <div style="margin-top: 15px; padding-top: 10px; border-top: 1px dashed #eee; font-weight: bold; color: #2c3e50; font-size: 1em; text-align: right;">
            Total Etapa: <span class="subtotal-etapa" style="color: #e67e22;">0</span>‚Ç¨
        </div>
    </div>
</div>


                    <div class="modal-section">
                        <h3>ü§ì Curiosidades</h3>
                        <div class="extra-card">
                            <div class="expandible-text">
                                <div class="expandible-content collapsed" id="expandibleContent4">
                                    <p>La etapa de hoy es √∫nica en su especie, pues nos aleja completamente de la costa. Algunos peregrinos describen este d√≠a como la etapa m√°s hermosa del Camino Portugu√©s de la Costa, especialmente por el paso del r√≠o Neiva.<br><br>
El r√≠o Neiva es un r√≠o de monta√±a que baja con fuerza desde las alturas del interior. Su cauce es especialmente espectacular durante los meses de invierno y primavera, cuando el caudal es m√°s abundante. La antigua azenha (molino de agua) de Guilheta representa un patrimonio industrial singular de estas tierras portuguesas.<br><br>
La plataforma de granito sobre la que cruzamos el r√≠o es de origen antigu√≠simo. Se cree que este paso fue utilizado desde tiempos de los celtas, luego por los romanos y durante toda la Edad Media. Es probable que muchos peregrinos jacobeos de siglos pasados hayan cruzado por aqu√≠, dejando una huella invisible pero permanente en la memoria del camino.<br><br>
<strong>CASTELO DO NEIVA</strong><br>
La iglesia de S√£o Tiago de Castelo do Neiva es especial para los peregrinos jacobeos. La inscripci√≥n del a√±o 862 que conmemora la consagraci√≥n de la iglesia hace de √©sta uno de los lugares m√°s antiguos dedicados a Santiago en la Pen√≠nsula Ib√©rica. Esta antig√ºedad sugiere que el culto a Santiago tiene ra√≠ces muy profundas en Portugal, anteriores incluso a los grandes flujos de peregrinaci√≥n que se conocen de la Edad Media.<br><br>
La l√°pida original con la inscripci√≥n se encuentra preservada en el interior de la iglesia, lo que la convierte en un documento hist√≥rico vivo. El sello de peregrino que se ofrece aqu√≠ es especialmente hermoso y art√≠stico, diferente al de otros lugares del camino.<br><br>
<strong>S√ÉO ROM√ÉO DE NEIVA</strong><br>
Este monasterio barroco tiene una larga historia de espiritualidad. Su ubicaci√≥n en el bosque lo hace especialmente sereno y contemplativo. Las iglesias barrocas portuguesas tienen caracter√≠sticas muy particulares: c√∫pulas, columnas salom√≥nicas y una ornamentaci√≥n interior que busca crear un ambiente de embeleso espiritual.<br><br>
<strong>VIANA DO CASTELO</strong><br>
Viana do Castelo es una ciudad medieval con uno de los cascos hist√≥ricos mejor conservados de la costa portuguesa. Su puerto fluvial sobre el r√≠o Lima fue durante siglos un lugar de gran importancia comercial y de construcci√≥n naval. La ciudad es tambi√©n famosa por sus fiestas tradicionales, que se celebran en agosto con una festividad muy colorida y tradicional.<br><br>
El puente Eiffel (Ponte de D. Lu√≠s Filipe), que cruzamos al final de la etapa, es una obra maestra de la ingenier√≠a del siglo XIX. Tiene dos niveles: uno para veh√≠culos y peatones en la parte superior, y otro para los ferrocarriles en la inferior. Este tipo de puentes fue revolucionario en su √©poca y representa un hito importante en la historia de la ingenier√≠a portuguesa.
                                    </p>
                                    <div class="expandible-fade"></div>
                                </div>
                                <button class="btn-expandible" onclick="toggleExpand('expandibleContent4', this)">Leer m√°s</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- MODAL ETAPA 5 -->
    <div class="modal-backdrop" id="modalEtapa5">
        <div class="modal-panel">
            <div class="modal-header">
                <h2>Etapa 5: Viana do Castelo ‚Üí Caminha - Detalles Completos</h2>
                <button class="modal-close" onclick="closeModal('modalEtapa5')">&times;</button>
            </div>
            <div class="modal-body">
                <div class="modal-left">
                    <div class="widget-card" id="weather-etapa5">
    <div class="weather-header">
        <div class="weather-info">
            <div class="weather-temp">--¬∞C</div>
            <div class="weather-desc">Cargando clima...</div>
        </div>
        <div class="weather-icon">‚è≥</div>
    </div>
</div>
                    <div class="modal-section">
                        <h3>‚ö° Datos r√°pidos</h3>
                        <div class="extra-card">
                            <ul>
                                <li><strong>Distancia:</strong> 26,8 km</li>
                                <li><strong>Duraci√≥n estimada:</strong> 6 horas 30 minutos</li>
                                <li><strong>Dificultad:</strong> Media</li>
                                <li><strong>Tipo de etapa:</strong> Mixta, interior y litoral</li>
                                <li><strong>Pavimento:</strong> Calles empedradas, pistas de tierra, senderos, playas y carreteras</li>
                            </ul>
                        </div>
                    </div>

                    <div class="modal-section">
                        <h3 class="sec-tramos">üìç Tramos y Puntos de Parada</h3>

                        <!-- Tramo Viana do Castelo -->
                        <div class="tramo">
                            <div class="tramo-header">
                                <h4>Tramo 1: Viana do Castelo ‚Üí Areosa</h4>
                                <div class="tramo-header-right">
                                    <span class="tramo-distance">4,9 km</span>
                                    <span class="tramo-toggle-icon">Ôºã</span>
                                </div>
                            </div>
                            <div class="tramo-content">
                                <p><strong>NOTA IMPORTANTE:</strong> En la primera parte de la etapa podemos escoger entre la ruta oficial, que va por el interior, o bien el recorrido alternativo por el litoral, sin flechas pero con playas. La distancia en ambas opciones es similar, y la elecci√≥n depender√° de nuestras preferencias.</p>
                                <p><strong>Ruta alternativa por el litoral:</strong> Los que decidan seguir el litoral no tendr√°n ninguna dificultad para orientarse, si bien este trazado alternativo no cuenta con flechas amarillas. Desde Viana do Castelo s√≥lo hay que buscar la Av. do Atl√¢ntico y superar la playa Norte y el fort√≠n da Areosa, siguiendo la costa en direcci√≥n hacia el faro de Montedor, en Carre√ßo. Se pasa por playas, molinos y tramos de pasarelas de madera, a lo largo del GR-1 y la Ecov√≠a Litoral Norte. La llegada a Vila Praia de √Çncora puede hacerse por la misma orilla de la costa, pisando arena en alg√∫n momento, o bien ‚Äìcon precauci√≥n‚Äì por el arc√©n de la carretera N-13.</p>
                                <p><strong>Ruta oficial:</strong> Desde la Pra√ßa da Rep√∫blica se toma el Passeio das Mordomas, para girar a la izquierda por la Rua C√°ndido dos Reis y seguir de frente por la Rua General Lu√≠s do Rego; una vez en el Largo 9 de abril buscaremos la Rua de S√£o Tiago. Tras pasar bajo las v√≠as del tren vemos el centro comercial Esta√ß√£o Viana Shopping (pues tiene la estaci√≥n de ferrocarril justo al lado); antes de llegar giramos por la Rua Portela da Cima, en fuerte ascenso. Cruzamos por un paso inferior bajo la Av. 25 de Abril, que es la v√≠a de circunvalaci√≥n de la ciudad, y al salir giramos a la izquierda, siempre en subida, por la Rua D. Mois√©s Alves Pinho, llegando ante la iglesia de los Santos M√°rtires.</p>
                                <p>Continuamos de frente por la misma calle y despu√©s por la Rua dos Sobreiros, bordeando el monte de Santa Luzia. Desde la Rua Pedreira da Areosa torceremos a la izquierda para seguir un rosario de callecitas estrechas entre muros de piedra, que nos dejan finalmente en una mini-rotonda donde hay una escultura de hierro oxidado. Seguimos por la Rua Entre Quintas, la Rua da Saudade y la Travessa das Pereiras; tras cruzar un puentecito de piedra sobre un riachuelo aparecemos ante la entrada a la mansi√≥n Quinta da Boa Viagem, con una capilla enfrente en cuyo atrio podemos parar a descansar.</p>
                                <div class="punto-parada">
                                    <div class="punto-parada-nombre">üìç AREOSA</div>
                                    <div class="distancia-acumulada">Distancia acumulada: 4,9 km</div>
                                </div>
                            </div>
                        </div>

                        <!-- Tramo Areosa -->
                        <div class="tramo">
                            <div class="tramo-header">
                                <h4>Tramo 2: Areosa ‚Üí Carre√ßo</h4>
                                <div class="tramo-header-right">
                                    <span class="tramo-distance">3,5 km</span>
                                    <span class="tramo-toggle-icon">Ôºã</span>
                                </div>
                            </div>
                            <div class="tramo-content">
                                <p>Continuamos 100 metros por un tramo adoquinado entre dos hileras de olivos, para girar a la derecha en subida y llegar a una peque√±a urbanizaci√≥n. Seguimos por asfalto entre un bosque de pinos y, despu√©s de unas casas modernas, tomamos un camino que se desv√≠a a mano derecha.</p>
                                <p>Seguimos entre casitas, muros de piedra y calles estrechas, a veces con buenas vistas sobre el litoral. Al llegar a un puente sobre la v√≠a del tren giramos a la derecha para enfilar la Rua do Moreno, pasar ante la casa de turismo rural Casa do Nato y acabar cruzando la v√≠a ‚Äìcon suma precauci√≥n‚Äì por un paso a nivel sin barreras. Llegamos al cementerio y a la iglesia de Carre√ßo.</p>
                                <div class="punto-parada">
                                    <div class="punto-parada-nombre">üìç CARRE√áO</div>
                                    <div class="distancia-acumulada">Distancia acumulada: 8,4 km</div>
                                </div>
                            </div>
                        </div>

                        <!-- Tramo Carre√ßo -->
                        <div class="tramo">
                            <div class="tramo-header">
                                <h4>Tramo 3: Carre√ßo ‚Üí Vila Praia de √Çncora</h4>
                                <div class="tramo-header-right">
                                    <span class="tramo-distance">9,9 km</span>
                                    <span class="tramo-toggle-icon">Ôºã</span>
                                </div>
                            </div>
                            <div class="tramo-content">
                                <p>Seguiremos por detr√°s de la iglesia en paralelo a la v√≠a del tren, para finalmente volver a cruzarla, esta vez por un puente. Seguimos la adoquinada Av. de Pa√ßo y pasamos junto al albergue privado Casa do Sard√£o, un remanso de paz que goza de buenas vistas sobre el faro de Montedor y el mar.</p>
                                <p>Poco despu√©s el camino se interna en un bosque de eucaliptus, tramo abrupto pero muy agradable tras el cual llegamos a un cruce con una fuente de piedra. Ya por calzadas empedradas entramos en el barrio de Armada, perteneciente a la localidad de Afife.</p>
                                <p><strong>3,5 km.</strong> Armada (Afife). Tras un tramo de camino adoquinado a trav√©s del bosque llegamos ante la Quinta de Cabanas.</p>
                                <p><strong>0,5 km.</strong> Convento de S√£o Jo√£o de Cabanas (Afife). Antiguo convento benedictino situado en un paraje id√≠lico, con un riachuelo, √°rboles, poemas sobre azulejos y un cruceiro. Tras el puente el camino sigue a la derecha por el borde del r√≠o, tomando despu√©s alg√∫n tramo de adoquines y escaleras. Un sendero empinado y con piedras nos conduce hasta otro camino con adoquines, ahora en bajada; viene despu√©s un nuevo tramo en subida por el bosque, con camino de tierra y losas de piedra. Al cabo de 20 minutos llegamos a un primer cruceiro, y poco despu√©s a otro, √©ste sin vistas, donde comienza una bajada por terreno pedregoso. Al cabo de 1 km, ya por adoquines, llegamos a la aldea de Barreiros, con un antiqu√≠simo lavadero a ras de suelo y de nuevo otro cruceiro, √©ste datado en 1779.</p>
                                <p><strong>2,8 km.</strong> Barreiros. Tras 800 metros el camino nos lleva ante otro gran cruceiro en un parterre con c√©sped, y seguimos por un caminito empedrado. Justo despu√©s de cruzar una plataforma de piedra sobre el r√≠o √Çncora tomamos a la izquierda un sendero por el que llegamos a la carretera N-305, que cruzamos. Por la Rua da Barrosa tomamos otro atajo a mano izquierda, entre pinos, y llegamos a una escuela y al edificio vidriado de la piscina municipal. En breve cruzaremos bajo la carretera N-13 por un paso inferior y avanzaremos hacia la Pra√ßa da Revoluci√≥n, centro de Vila Praia de √Çncora.</p>
                                <p><strong>3,1 km.</strong> Vila Praia de √Çncora.</p>
                                <div class="punto-parada">
                                    <div class="punto-parada-nombre">üìç VILA PRAIA DE √ÇNCORA</div>
                                    <div class="distancia-acumulada">Distancia acumulada: 18,3 km</div>
                                </div>
                            </div>
                        </div>

                        <!-- Tramo Vila Praia de √Çncora -->
                        <div class="tramo">
                            <div class="tramo-header">
                                <h4>Tramo 4: Vila Praia de √Çncora ‚Üí Moledo</h4>
                                <div class="tramo-header-right">
                                    <span class="tramo-distance">4,7 km</span>
                                    <span class="tramo-toggle-icon">Ôºã</span>
                                </div>
                            </div>
                            <div class="tramo-content">
                                <p>Se cruza la v√≠a del tren por alguno de los pasos a nivel y llegamos ante la costa, junto al fuerte da Lagarteira. Seguimos todo el litoral, en paralelo a la v√≠a del tren y a la costa, pasando por la capilla de Santo Isidoro, con un peque√±o atrio. Al cabo de 1,8 km el camino cruza por un paso inferior bajo la v√≠a del tren y entra en la localidad de Moledo.</p>
                                <p><strong>Variante recomendada:</strong> En lugar de cruzar bajo la v√≠a del tren tal como indican las flechas, os recomendamos seguir de frente, por la orilla del mar hacia la playa de Moledo, y cruzar la Mata do Camarido, precioso bosque de pinos declarado Parque Nacional (tambi√©n es factible caminar por la misma arena de la playa), llegando finalmente al estuario del r√≠o Mi√±o y al paseo mar√≠timo de Caminha. El rodeo supone apenas 1,1 km m√°s de camino, pero vale la pena.</p>
                                <div class="punto-parada">
                                    <div class="punto-parada-nombre">üìç MOLEDO</div>
                                    <div class="distancia-acumulada">Distancia acumulada: 23 km</div>
                                </div>
                            </div>
                        </div>

                        <!-- Tramo Moledo -->
                        <div class="tramo">
                            <div class="tramo-header">
                                <h4>Tramo 5: Moledo ‚Üí Caminha (Final de etapa)</h4>
                                <div class="tramo-header-right">
                                    <span class="tramo-distance">3,8 km</span>
                                    <span class="tramo-toggle-icon">Ôºã</span>
                                </div>
                            </div>
                            <div class="tramo-content">
                                <p>Los que crucen bajo la v√≠a del tren deben seguir en paralelo por las aceras de la Av. Santana hasta una gran rotonda. La cruzamos con sumo cuidado por los pasos de cebra y continuamos por el arc√©n de una carretera secundaria y rectil√≠nea. <strong>[Nota 2021: nos informan que se ha habilitado un carril-bici, por lo que ya no es necesario caminar por el arc√©n]</strong>, siempre en paralelo a las v√≠as del tren, y que seguiremos durante 3,2 km totalmente anodinos hasta entrar en Caminha, llegando a la plaza del Ayuntamiento, con la bonita Torre del Reloj y la puerta que da entrada al casco viejo de la villa.</p>
                                <p>Adem√°s de visitar su bonito casco hist√≥rico, os recomendamos consultar enseguida los horarios del ferry que cruza el Mi√±o, que var√≠an cada d√≠a en funci√≥n de la marea baja, para decidir si quedarnos a dormir aqu√≠ o bien tomar el transbordador hoy mismo (lo que implicar√° continuar caminando, despu√©s del trayecto en ferry, los 3,6 km que restan hasta A Guarda).</p>
                                <div class="punto-parada">
                                    <div class="punto-parada-nombre">‚úÖ CAMINHA - FIN DE ETAPA EN PORTUGAL</div>
                                    <div class="distancia-acumulada">Distancia acumulada total: 26,8 km</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <a href="https://www.google.com/maps/dir/Viana+do+Castelo,+Portugal/Caminha,+Portugal/@41.784917,-8.9105,11z/data=!3m1!4b1!4m14!4m13!1m5!1m1!1s0xd25b62649060b2d:0x400ebbde4903820!2m2!1d-8.832596!2d41.69323!1m5!1m1!1s0xd25a8e26527588b:0x400ebbde4903330!2m2!1d-8.8385731!2d41.8761271!3e2?entry=ttu" target="_blank" class="btn-route-map">
    üó∫Ô∏è Ver Ruta en Google Maps (26,8 km)
</a>

<div class="modal-section" style="margin-top: 25px;">
    <h3 class="sec-alojamiento" style="background: #e1f5fe !important; border-color: #b3e5fc !important;">üì∏ Mi Recuerdo del D√≠a</h3>
    <div class="extra-card" style="text-align: center; border-top: 3px solid #3498db; padding: 15px;">
        <div id="photo-container-etapa5" class="photo-preview" style="width: 100%; height: 250px; background: #f9f9f9; border-radius: 12px; display: flex; align-items: center; justify-content: center; overflow: hidden; margin-bottom: 12px; border: 2px dashed #3498db; position: relative;">
            <span style="color: #3498db; font-size: 0.9em; font-weight: 500;">Captura un momento especial</span>
        </div>
        
        <input type="file" id="input-photo-etapa5" accept="image/*" style="display: none;" onchange="handlePhotoUpload('etapa5', this)">
        
        <div style="display: flex; gap: 8px;">
            <button onclick="document.getElementById('input-photo-etapa5').click()" style="flex: 2; background: #3498db; color: white; border: none; padding: 10px; border-radius: 8px; cursor: pointer; font-weight: bold; font-size: 0.85em;">
                üì∑ Seleccionar Foto
            </button>
            <button onclick="removePhoto('etapa5')" style="flex: 1; background: #f8d7da; color: #721c24; border: 1px solid #f5c6cb; padding: 10px; border-radius: 8px; cursor: pointer; font-weight: bold; font-size: 0.85em;">
                üóëÔ∏è Borrar
            </button>
        </div>
    </div>
</div>

                </div>
                <div class="modal-right">
                    <div class="modal-section">
                        <h3 class="sec-alojamiento">üè® Alojamiento</h3>
                        <div class="accommodation-card">
                            <h4>üåü CASA SEBASTIAO TOURIST HOUSE *** (Caminha)</h4>
                            <div class="accommodation-details">
                                <div class="accommodation-detail-line"><strong>Fechas:</strong> 05/06/2026 ‚Äì 06/06/2026</div>
                                <div class="accommodation-detail-line"><strong>Ubicaci√≥n:</strong> A 150m del centro de Caminha</div>
                                <div class="accommodation-detail-line"><strong>Tipo:</strong> Apartamento de 2 dormitorios</div>
                                <div class="accommodation-detail-line"><strong>Camas:</strong> 4 camas individuales</div>
                                <div class="accommodation-detail-line"><strong>Precio:</strong> <span style="font-size: 1.1em; font-weight: bold; color: #27ae60;">96‚Ç¨</span></div>
                            </div>
                            <a href="https://www.booking.com/Share-c8zbdNC" target="_blank" class="btn-alojamiento">
                                Ver alojamiento en Booking
                            </a>
                        </div>
                    </div>

                    <div class="widget-card" id="diary-etapa5">
    <div class="diary-body">
        <textarea class="diary-textarea" placeholder="‚úçÔ∏è Notas personales..." oninput="saveDiary('etapa5', this.value)"></textarea>
    </div>
    <div class="diary-footer">
        <span>Guardado autom√°tico</span>
        <span id="status-etapa5">‚úÖ</span>
    </div>
</div>

                    <div class="modal-section">
                        <h3 class="sec-gastronomia">üçΩÔ∏è Gastronom√≠a</h3>
                        <div class="extra-card">
                            <p>En esta √∫ltima jornada portuguesa disfrutaremos de las especialidades locales y de la excelente gastronom√≠a portuguesa:</p>
                            <ul>
                                <li><strong>Vila Praia de √Çncora:</strong> Especialidades en caracoles y productos del mar</li>
                                <li>Cocina casera y platos tradicionales en los pueblos del interior</li>
                                <li><strong>Caminha:</strong> Amplia oferta de restaurantes con cocina t√≠pica portuguesa</li>
                                <li>√öltimas oportunidades para degustar los pratos do dia portugueses</li>
                            </ul>
                        </div>
                    </div>

                    <div class="modal-section">
    <h3 class="sec-alojamiento" style="background: #fff3e0 !important; border-color: #ffe0b2 !important;">üí∞ Mis Gastos (Etapa)</h3>
    <div class="extra-card" style="background: #fcfcfc; border-top: 3px solid #e67e22;">
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
            <div>
                <label style="font-size: 0.8em; color: #7f8c8d; display: block; margin-bottom: 4px;">üè® Alojamiento (‚Ç¨)</label>
                <input type="number" class="expense-input" data-cat="alojamiento" placeholder="0" 
                       style="width:100%; padding:8px; border:1px solid #ddd; border-radius:4px; font-size: 0.9em;">
            </div>
            <div>
                <label style="font-size: 0.8em; color: #7f8c8d; display: block; margin-bottom: 4px;">üçΩÔ∏è Comida (‚Ç¨)</label>
                <input type="number" class="expense-input" data-cat="comida" placeholder="0" 
                       style="width:100%; padding:8px; border:1px solid #ddd; border-radius:4px; font-size: 0.9em;">
            </div>
        </div>
        <div style="margin-top: 10px;">
            <label style="font-size: 0.8em; color: #7f8c8d; display: block; margin-bottom: 4px;">üéí Otros / Varios (‚Ç¨)</label>
            <input type="number" class="expense-input" data-cat="otros" placeholder="0" 
                   style="width:100%; padding:8px; border:1px solid #ddd; border-radius:4px; font-size: 0.9em;">
        </div>
        <div style="margin-top: 15px; padding-top: 10px; border-top: 1px dashed #eee; font-weight: bold; color: #2c3e50; font-size: 1em; text-align: right;">
            Total Etapa: <span class="subtotal-etapa" style="color: #e67e22;">0</span>‚Ç¨
        </div>
    </div>
</div>

                    <div class="modal-section">
                        <h3>ü§ì Curiosidades</h3>
                        <div class="extra-card">
                            <div class="expandible-text">
                                <div class="expandible-content collapsed" id="expandibleContent5">
                                    <p>Desde Viana do Castelo hasta Vila Praia de √Çncora podemos utilizar la ruta oficial, que va por el interior, un tanto rompepiernas pero con buenas vistas, o bien seguir intuitivamente el litoral por playas y pasarelas, sin flechas pero sin p√©rdida posible. La distancia en ambas opciones resulta similar.<br>
La ruta oficial pasa por la Quinta da Boa Viagem, una mansi√≥n reconvertida en hotel rural, y la Quinta de Cabanas, antiguo convento benedictino ampliado en el siglo XVII, con su iglesia y su claustro, y situado en un paraje id√≠lico.<br>
Durante la jornada pasaremos ante numerosas alminhas o capillitas a pie de calle, por lo general dentro de hornacinas, con im√°genes y velas encendidas. Son una muestra de la profunda religiosidad popular que perdura en las zonas rurales de Portugal.<br><br>
<strong>VILA PRAIA DE AN√áORA</strong><br>
Adem√°s de un buen men√∫ a precio portugu√©s, en el restaurante Casa dos Caracois podemos degustar decenas de recetas con este molusco gaster√≥podo: caracol √† pescador, caracol na chapa, feijoada de caracol, caracol frito, tortilla de caracol‚Ä¶<br><br>
<strong>MOLEDO</strong><br>
El tramo entre Moledo y Caminha es por carretera y muy aburrido. [Nota 2021: se ha habilitado un carril-bici]. La opci√≥n m√°s recomendable ser√≠a desviarse siguiendo la orilla del mar y cruzar la Mata do Camarido, con una playa preciosa y un bosque de pinos declarado Parque Nacional, por el que llegaremos al estuario del r√≠o Mi√±o. El rodeo supone apenas 1,1 km m√°s de camino, pero vale la pena.<br><br>
<strong>CAMINHA</strong><br>
El camino pasa bajo la Torre do Rel√≥gio, por la √∫nica puerta que se conserva de la muralla medieval, muy cerca de la iglesia da Miseric√≥rdia, con portada renacentista y exuberante interior barroco. Otra visita obligada es la iglesia matriz de Nossa Senhora da Assun√ß√£o, con elementos g√≥ticos y manuelinos, en cuya cabecera debemos buscar su famosa g√°rgola imp√∫dica, muestra de la antigua enemistad entre Portugal y Espa√±a.<br>
Atenci√≥n a los horarios del ferry que cruza el r√≠o Mi√±o, pues var√≠an cada d√≠a en funci√≥n de la marea; adem√°s los lunes no hay servicio por descanso semanal. Muchos peregrinos optan por tomar el barco nada m√°s llegar, sin esperar al d√≠a siguiente, pues el primer ferry no sale hasta las 10 de la ma√±ana, o a√∫n m√°s tarde si hay marea baja; una vez en Galicia quedan s√≥lo 3,6 km hasta A Guarda. Para m√°s info consulta Al Loro de la etapa siguiente.<br>
Desde Caminha se puede enlazar con el Camino Portugu√©s Central en una jornada, siguiendo un recorrido se√±alizado con flechas amarillas hacia el este. Son 30 km casi siempre por asfalto, pasando por Seixas y Vilanova de Cerveira (donde hay Pousada de Juventude), hasta llegar a Valen√ßa do Minho y Tui.<br>
Hoy es nuestro √∫ltimo d√≠a del recorrido en Portugal, justo cuando nos hab√≠amos acostumbrado a la cocina casera y a los precios m√≥dicos de los men√∫s en sus restaurantes: se acabaron los pratos do dia, los men√∫s completos, las sobremesas‚Ä¶ Motivos m√°s que suficientes para volver pronto a este pa√≠s que enamora.
                                    </p>
                                    <div class="expandible-fade"></div>
                                </div>
                                <button class="btn-expandible" onclick="toggleExpand('expandibleContent5', this)">Leer m√°s</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- MODAL ETAPA 6 -->
    <div class="modal-backdrop" id="modalEtapa6">
        <div class="modal-panel">
            <div class="modal-header">
                <h2>Etapa 6: Caminha ‚Üí Porto Moug√°s - Detalles Completos</h2>
                <button class="modal-close" onclick="closeModal('modalEtapa6')">&times;</button>
            </div>
            <div class="modal-body">
                <div class="modal-left">

                    <div class="widget-card" id="weather-etapa6">
    <div class="weather-header">
        <div class="weather-info">
            <div class="weather-temp">--¬∞C</div>
            <div class="weather-desc">Cargando clima...</div>
        </div>
        <div class="weather-icon">‚è≥</div>
    </div>
</div>
                    <div class="modal-section">
                        <h3>‚ö° Datos r√°pidos</h3>
                        <div class="extra-card">
                            <ul>
                                <li><strong>Distancia:</strong> 23,5 km</li>
                                <li><strong>Duraci√≥n estimada:</strong> 5 horas 40 minutos</li>
                                <li><strong>Dificultad:</strong> Baja</li>
                                <li><strong>Tipo de etapa:</strong> Costera en Galicia, agreste y ventosa</li>
                                <li><strong>Pavimento:</strong> Ferry, caminos de tierra, carreteras, playas y senderos</li>
                            </ul>
                        </div>
                    </div>

                    <div class="modal-section">
                        <h3 class="sec-tramos">üìç Tramos y Puntos de Parada</h3>

                        <!-- Tramo Ferry -->
                        <div class="tramo">
                            <div class="tramo-header">
                                <h4>Tramo 1: Caminha ‚Üí A Pasaxe (Ferry)</h4>
                                <div class="tramo-header-right">
                                    <span class="tramo-distance">0,7 km</span>
                                    <span class="tramo-toggle-icon">Ôºã</span>
                                </div>
                            </div>
                            <div class="tramo-content">
                                <p>Desde el centro de Caminha nos acercamos al embarcadero, donde tomaremos el ferry que cruza el r√≠o Mi√±o hacia Galicia. Para informaci√≥n detallada sobre horarios y tarifas, consultar la secci√≥n de Curiosidades.</p>
                                <div class="punto-parada">
                                    <div class="punto-parada-nombre">‚õ¥Ô∏è A PASAXE (CAMPOSANCOS)</div>
                                    <div class="distancia-acumulada">Distancia acumulada: 0,7 km</div>
                                </div>
                            </div>
                        </div>

                        <!-- Tramo A Pasaxe -->
                        <div class="tramo">
                            <div class="tramo-header">
                                <h4>Tramo 2: A Pasaxe ‚Üí A Guarda</h4>
                                <div class="tramo-header-right">
                                    <span class="tramo-distance">3,6 km</span>
                                    <span class="tramo-toggle-icon">Ôºã</span>
                                </div>
                            </div>
                            <div class="tramo-content">
                                <p>Nada m√°s salir del puerto caminaremos unos metros hacia la izquierda, pasando frente al edificio del antiguo colegio-internado de jesuitas, que durante la Guerra Civil alberg√≥ un campo de concentraci√≥n de infausta memoria. Tomamos la primera calle en subida y vamos siguiendo las flechas, que nos llevar√°n a rodear por la derecha el monte de Santa Tegra ‚ÄìSanta Tecla‚Äì.</p>
                                <p><strong>NOTA:</strong> Aunque el camino no pase por all√≠, debemos saber que en lo alto del monte Santa Tegra se ha excavado un gran castro galaico-romano; quien lo desee puede subir a visitar el yacimiento arqueol√≥gico y el museo, aunque el recorrido resulta bastante duro por los 341 metros de desnivel. Si el d√≠a es claro, las vistas desde la cima sobre el estuario del Mi√±o y sobre las costas portuguesa y gallega son espectaculares.</p>
                                <p>Despu√©s de la primera subida, los que van caminando llegar√°n a la carretera de Camposancos; a 20 metros a la izquierda se inicia una nueva subidita, junto a una parada de bus y un transformador. Tras un zigzag por las casas del barrio de Saa pasamos a un camino de tierra por el monte que desemboca en la carretera PO-355, frente a un campo de f√∫tbol, ya a la entrada de A Guarda. Seguimos la acera de la carretera, despu√©s la R√∫a Rosal√≠a de Castro y finalmente la R√∫a Galicia hacia el centro de la villa. Es recomendable desviarse ligeramente para visitar, en el casco viejo, la bonita plaza do Rel√≥ (ayuntamiento y oficina de turismo) y la iglesia parroquial de Santa Mar√≠a.</p>
                                <div class="punto-parada">
                                    <div class="punto-parada-nombre">üìç A GUARDA</div>
                                    <div class="distancia-acumulada">Distancia acumulada: 4,3 km</div>
                                </div>
                            </div>
                        </div>

                        <!-- Tramo A Guarda -->
                        <div class="tramo">
                            <div class="tramo-header">
                                <h4>Tramo 3: A Guarda ‚Üí Portecelo</h4>
                                <div class="tramo-header-right">
                                    <span class="tramo-distance">7,0 km</span>
                                    <span class="tramo-toggle-icon">Ôºã</span>
                                </div>
                            </div>
                            <div class="tramo-content">
                                <p>Podemos seguir por la R√∫a San Bernardo o bien por la R√∫a Puerto Rico (donde est√° el albergue municipal), pues ambas nos conducen a la R√∫a da Gu√≠a, que se convierte en plaza ante la capilla de la Virgen de la Gu√≠a. Por la R√∫a Baixada √° Praia, tal como su nombre indica, llegamos a las playas de Fedorento y de Area Grande (Arena Grande), ya al final del pueblo.</p>
                                <p><strong>Nota para bicicletas:</strong> A partir de aqu√≠ el camino se complica para las bicis, por lo cual lo mejor ser√° que los ciclistas asciendan por la rampa de asfalto que hay desde la playa de Area Grande hasta la carretera PO-552, donde encontrar√°n un mirador y un carril bici que seguir√°n, en paralelo a la carretera y por toda la costa, hasta Baiona. Esta opci√≥n tambi√©n ser√≠a una alternativa prudente para los caminantes en d√≠as de temporal extremo.</p>
                                <p>Al final del aparcamiento de la playa comienza el tramo m√°s agreste de la etapa, durante el cual avanzaremos por un camino casi al nivel del mar y entre las rocas de la costa. Se trata de una parte de la Ruta de las Cetarias, recorrido habilitado para conocer estos viveros naturales utilizados anta√±o para conservar langostas, bogavantes, bueyes de mar y centollas; eran estructuras p√©treas construidas al abrigo de las rocas, donde rompen las olas, aprovechando las mareas para renovar constantemente el agua.</p>
                                <p>Al cabo de 1,1 km, justo ante la cetaria Redonda, las flechas nos llevan en fuerte subida para girar ‚Äìantes de llegar a la carretera‚Äì por un sendero a la izquierda; √©ste se convierte en una agradable pista de tierra a trav√©s de zonas de campos y bosquecillos de pinos o eucaliptus, algunos de los cuales se quemaron durante los terribles incendios forestales de 2017. Finalmente el camino vuelve a ascender a la carretera PO-552.</p>
                                <p><strong>3,8 Carretera PO-552.</strong> Seguiremos por su carril bici durante 1,9 km, siempre con precauci√≥n pues es muy utilizado por ciclistas (tanto locales como bicigrinos). Pasamos el mirador de Punta Bazar y, justo al entrar en el t√©rmino municipal de O Rosal, las flechas nos devuelven a la izquierda por un tramo de camino muy bonito, en paralelo a la carretera. Por √©ste llegamos a las casas de Portecelo, peque√±a localidad donde en temporada abre un chiringuito.</p>
                                <p><strong>3,2 Portecelo.</strong></p>
                                <div class="punto-parada">
                                    <div class="punto-parada-nombre">üìç PORTECELO</div>
                                    <div class="distancia-acumulada">Distancia acumulada: 11,3 km</div>
                                </div>
                            </div>
                        </div>

                        <!-- Tramo Portecelo -->
                        <div class="tramo">
                            <div class="tramo-header">
                                <h4>Tramo 4: Portecelo ‚Üí Oia</h4>
                                <div class="tramo-header-right">
                                    <span class="tramo-distance">5,8 km</span>
                                    <span class="tramo-toggle-icon">Ôºã</span>
                                </div>
                            </div>
                            <div class="tramo-content">
                                <p>Seguimos durante 2 km por la antigua Estrada Real, volviendo despu√©s al carril bici de la carretera, lo cual se repite en dos ocasiones. Finalmente lo dejaremos tomando una pista asfaltada en bajada que lleva a la ermita de San Sebasti√°n, ya en el t√©rmino municipal de Oia. En 800 metros entraremos en el barrio del Arrabal, con casas de piedra y un par de bares; pasamos ante el cruceiro de la Centinela, del a√±o 1764 y con una curiosa inscripci√≥n, buen mirador sobre el embarcadero, la playa y el monasterio de Oia.</p>
                                <p><strong>Monasterio cisterciense de Santa Mar√≠a (siglo XII),</strong> √∫nico de dicha orden construido frente al mar, en un emplazamiento espectacular y muy fotog√©nico. La iglesia del monasterio puede visitarse en horario de misas o bien solicitando la llave en el bar-estanco que hay 80 metros antes de llegar. El resto del edificio, cerrado a cal y canto, se halla inmerso en una batalla legal entre sus propietarios (una sociedad privada que quiere convertirlo en hotel y centro de talasoterapia), el Concello de Oia y la Xunta de Galicia.</p>
                                <div class="punto-parada">
                                    <div class="punto-parada-nombre">üìç OIA</div>
                                    <div class="distancia-acumulada">Distancia acumulada: 17,1 km</div>
                                </div>
                            </div>
                        </div>

                        <!-- Tramo Oia -->
                        <div class="tramo">
                            <div class="tramo-header">
                                <h4>Tramo 5: Oia ‚Üí O Serrallo</h4>
                                <div class="tramo-header-right">
                                    <span class="tramo-distance">3,6 km</span>
                                    <span class="tramo-toggle-icon">Ôºã</span>
                                </div>
                            </div>
                            <div class="tramo-content">
                                <p>Descendemos por la rampa empedrada entre la playa y el malec√≥n del monasterio, tras lo cual giramos a mano izquierda para seguir una pista de tierra que discurre entre muretes de piedra seca; disfrutaremos de un tramo de paisaje muy entretenido, con vistas de los prados y campos de cultivo que se extienden hasta el borde del oc√©ano. A la altura de Punta Orelluda (Punta Orejuda) volvemos a la carretera y a su carril bici. Al cabo de 700 metros pasamos ante el hotel Glasgow.</p>
                                <div class="punto-parada">
                                    <div class="punto-parada-nombre">üìç O SERRALLO</div>
                                    <div class="distancia-acumulada">Distancia acumulada: 20,7 km</div>
                                </div>
                            </div>
                        </div>

                        <!-- Tramo O Serrallo -->
                        <div class="tramo">
                            <div class="tramo-header">
                                <h4>Tramo 6: O Serrallo ‚Üí Porto Moug√°s (Final de etapa)</h4>
                                <div class="tramo-header-right">
                                    <span class="tramo-distance">2,8 km</span>
                                    <span class="tramo-toggle-icon">Ôºã</span>
                                </div>
                            </div>
                            <div class="tramo-content">
                                <p>S√≥lo 250 metros despu√©s del hotel Glasgow, tras superar una gasolinera, debemos cruzar la carretera por un paso de peatones y tomaremos una calle asfaltada en subida; ahora el camino va a una cota m√°s alta, con buenas vistas, por una zona con casitas y huertos.</p>
                                <p>Seguimos las indicaciones de las flechas, a lo largo de una ruta que, como ya pod√≠amos imaginar, est√° pensada para evitarnos un tramo de 1,8 km de la peligrosa PO-552, en el que no existe ‚Äìpor ahora‚Äì ni carril bici ni otra alternativa m√°s que la se√±alizada; aunque suponga un peque√±o rodeo, es sin duda mucho m√°s seguro y agradable que caminar por el arc√©n junto a los coches y camiones.</p>
                                <p>Finalmente bajamos de nuevo a la carretera, que atravesamos con cuidado por el paso de peatones; la seguimos apenas unos metros por el carril bici y torcemos a la izquierda por una pista de tierra. Pronto llegamos ante una playa de cantos rodados y la desembocadura del r√≠o Moug√°s, que cruzaremos gracias a un puentecillo met√°lico de color azul. Tras superarlo giramos a la izquierda y entramos en el peque√±o n√∫cleo de Porto Moug√°s, con casas en primera l√≠nea de la costa.</p>
                                <p><strong>Porto Moug√°s.</strong> En el albergue privado Aguncheiro, todo un referente del Camino Portugu√©s de la Costa, nos sellar√°n la credencial y pueden indicarnos lugares interesantes a visitar, como el castro de A Cabeci√±a y su conjunto de petroglifos, las pozas del r√≠o o d√≥nde ver caballos salvajes; adem√°s, si el hambre acucia, al lado disponemos de un bar-restaurante. Los que decidan alargar la jornada tienen m√°s adelante dos campings, uno a 1,8 km y otro a 4,2 km.</p>
                                <div class="punto-parada">
                                    <div class="punto-parada-nombre">‚úÖ PORTO MOUG√ÅS - FIN DE ETAPA</div>
                                    <div class="distancia-acumulada">Distancia acumulada total: 23,5 km</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <a href="https://www.google.com/maps/dir/Caminha,+Portugal/Porto+Moug%C3%A1s,+Oia,+Espa%C3%B1a/@41.961022,-8.93005,11z/data=!3m1!4b1!4m14!4m13!1m5!1m1!1s0xd25a8e26527588b:0x400ebbde4903330!2m2!1d-8.8385731!2d41.8761271!1m5!1m1!1s0xd25997a3a5a5a5b:0xa0a0a0a0a0a0a0a0!2m2!1d-8.892!2d42.046!3e2?entry=ttu" target="_blank" class="btn-route-map">
    üó∫Ô∏è Ver Ruta en Google Maps (23,5 km)
</a>

<div class="modal-section" style="margin-top: 25px;">
    <h3 class="sec-alojamiento" style="background: #e1f5fe !important; border-color: #b3e5fc !important;">üì∏ Mi Recuerdo del D√≠a</h3>
    <div class="extra-card" style="text-align: center; border-top: 3px solid #3498db; padding: 15px;">
        <div id="photo-container-etapa6" class="photo-preview" style="width: 100%; height: 250px; background: #f9f9f9; border-radius: 12px; display: flex; align-items: center; justify-content: center; overflow: hidden; margin-bottom: 12px; border: 2px dashed #3498db; position: relative;">
            <span style="color: #3498db; font-size: 0.9em; font-weight: 500;">Captura un momento especial</span>
        </div>
        
        <input type="file" id="input-photo-etapa6" accept="image/*" style="display: none;" onchange="handlePhotoUpload('etapa6', this)">
        
        <div style="display: flex; gap: 8px;">
            <button onclick="document.getElementById('input-photo-etapa6').click()" style="flex: 2; background: #3498db; color: white; border: none; padding: 10px; border-radius: 8px; cursor: pointer; font-weight: bold; font-size: 0.85em;">
                üì∑ Seleccionar Foto
            </button>
            <button onclick="removePhoto('etapa6')" style="flex: 1; background: #f8d7da; color: #721c24; border: 1px solid #f5c6cb; padding: 10px; border-radius: 8px; cursor: pointer; font-weight: bold; font-size: 0.85em;">
                üóëÔ∏è Borrar
            </button>
        </div>
    </div>
</div>

                </div>
                <div class="modal-right">
                    <div class="modal-section">
                        <h3 class="sec-alojamiento">üè® Alojamiento</h3>
                        <div class="accommodation-card">
                            <h4>üåü CASA TO√ëI *** (Porto Moug√°s)</h4>
                            <div class="accommodation-details">
                                <div class="accommodation-detail-line"><strong>Fechas:</strong> 06/06/2026 ‚Äì 07/06/2026</div>
                                <div class="accommodation-detail-line"><strong>Ubicaci√≥n:</strong> A 5,2 km del centro de Porto Moug√°s</div>
                                <div class="accommodation-detail-line"><strong>Tipo:</strong> Apartamento</div>
                                <div class="accommodation-detail-line"><strong>Camas:</strong> 1 doble + 2 individuales</div>
                                <div class="accommodation-detail-line"><strong>Precio:</strong> <span style="font-size: 1.1em; font-weight: bold; color: #27ae60;">120‚Ç¨</span></div>
                            </div>
                            <a href="https://www.booking.com/Share-T4ieae" target="_blank" class="btn-alojamiento">
                                Ver alojamiento en Booking
                            </a>
                        </div>
                    </div>

                    <div class="widget-card" id="diary-etapa6">
    <div class="diary-body">
        <textarea class="diary-textarea" placeholder="‚úçÔ∏è Notas personales..." oninput="saveDiary('etapa6', this.value)"></textarea>
    </div>
    <div class="diary-footer">
        <span>Guardado autom√°tico</span>
        <span id="status-etapa6">‚úÖ</span>
    </div>
</div>

                    <div class="modal-section">
                        <h3 class="sec-gastronomia">üçΩÔ∏è Gastronom√≠a</h3>
                        <div class="extra-card">
                            <p>En esta primera etapa gallega disfrutaremos de la excelente gastronom√≠a de la costa atl√°ntica:</p>
                            <ul>
                                <li><strong>A Guarda:</strong> Especialidades en crust√°ceos y marisco fresco</li>
                                <li><strong>Oia:</strong> Cocina tradicional gallega junto al monasterio</li>
                                <li><strong>Porto Moug√°s:</strong> Langosta, bogavante, centolla y otros manjares del mar</li>
                                <li>Vinos gallegas y aceites locales</li>
                            </ul>
                        </div>
                    </div>

                    <div class="modal-section">
    <h3 class="sec-alojamiento" style="background: #fff3e0 !important; border-color: #ffe0b2 !important;">üí∞ Mis Gastos (Etapa)</h3>
    <div class="extra-card" style="background: #fcfcfc; border-top: 3px solid #e67e22;">
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
            <div>
                <label style="font-size: 0.8em; color: #7f8c8d; display: block; margin-bottom: 4px;">üè® Alojamiento (‚Ç¨)</label>
                <input type="number" class="expense-input" data-cat="alojamiento" placeholder="0" 
                       style="width:100%; padding:8px; border:1px solid #ddd; border-radius:4px; font-size: 0.9em;">
            </div>
            <div>
                <label style="font-size: 0.8em; color: #7f8c8d; display: block; margin-bottom: 4px;">üçΩÔ∏è Comida (‚Ç¨)</label>
                <input type="number" class="expense-input" data-cat="comida" placeholder="0" 
                       style="width:100%; padding:8px; border:1px solid #ddd; border-radius:4px; font-size: 0.9em;">
            </div>
        </div>
        <div style="margin-top: 10px;">
            <label style="font-size: 0.8em; color: #7f8c8d; display: block; margin-bottom: 4px;">üéí Otros / Varios (‚Ç¨)</label>
            <input type="number" class="expense-input" data-cat="otros" placeholder="0" 
                   style="width:100%; padding:8px; border:1px solid #ddd; border-radius:4px; font-size: 0.9em;">
        </div>
        <div style="margin-top: 15px; padding-top: 10px; border-top: 1px dashed #eee; font-weight: bold; color: #2c3e50; font-size: 1em; text-align: right;">
            Total Etapa: <span class="subtotal-etapa" style="color: #e67e22;">0</span>‚Ç¨
        </div>
    </div>
</div>


                    <div class="modal-section">
                        <h3>ü§ì Curiosidades</h3>
                        <div class="extra-card">
                            <div class="expandible-text">
                                <div class="expandible-content collapsed" id="expandibleContent6">
                                    <p><strong>FERRY DEL R√çO MI√ëO</strong><br>
Atenci√≥n a los horarios del ferry que cruza el r√≠o Mi√±o: el primer transbordador sale de Caminha a las 10 de la ma√±ana (11h s√°bados y festivos), y luego cada hora en punto hasta las 19h, salvo si hay marea baja; adem√°s los lunes no hay servicio por descanso semanal. La traves√≠a dura unos 15 minutos y el billete cuesta 1,50 euros por persona, con un suplemento de 0,50 euros si llevas la bicicleta. Informaci√≥n en los tel√©fonos +351 258 092 564 / +351 912 253 809 (despacho de billetes en Caminha, Portugal), +34 986 611 526 (despacho de billetes en embarcadero de la parte de Galicia) √≥ +34 986 614 546 (oficina de turismo de A Guarda).<br><br>
La etapa recorre uno de los tramos m√°s bravos y agrestes de la costa atl√°ntica gallega. Si coincidimos con temporal, quedaremos asombrados por el viento, la altura de las olas y la espuma al romper contra las rocas.<br>
El ferry es la opci√≥n m√°s c√≥moda, pero tenemos otras alternativas para pasar a Galicia: se puede contactar con alguno de los pescadores que ofrecen cruzar el Mi√±o en su barca (unos 5 euros por persona), o bien dar un rodeo de 15 km ‚Äìcaminando, en tren o autob√∫s‚Äì hasta Vilanova de Cerveira, donde hay un puente de carretera hacia Goi√°n.<br><br>
<strong>A GUARDA</strong><br>
Despu√©s de desembarcar en el puerto de A Pasaxe-Camposancos rodearemos el monte de Santa Tegra (Santa Tecla), en cuya cima se ha excavado un gran castro cuyo origen data del siglo IV a.C. El poblado, amurallado y con casas de planta circular, lleg√≥ a acoger a 5.000 habitantes y ocupaba una extensi√≥n similar a 20 campos de f√∫tbol.<br>
La actividad principal de esta villa es la pesca y la cr√≠a de crust√°ceos y marisco. Vale la pena recorrer las calles del casco viejo con sus coloridas casas marineras, visitando la bonita plaza do Rel√≥ y la iglesia de Santa Mar√≠a. Tambi√©n veremos numerosas casonas de indianos, construidas a finales del siglo XIX por emigrantes que volvieron enriquecidos de las colonias de ultramar.<br><br>
<strong>OIA</strong><br>
Uno de los lugares m√°s fotog√©nicos de este camino es el monasterio de Santa Mar√≠a de Oia, abocado sobre la playa. Fundado a mediados del siglo XII, fue incorporado a la orden del C√≠ster en 1185, y presenta elementos rom√°nicos, renacentistas y barrocos. El edificio est√° hoy en manos privadas y s√≥lo se puede visitar la iglesia, en horario de misas o bien solicitando la llave en la oficina de turismo (lunes y martes cerrada) cercana.<br><br>
<strong>PORTO MOUG√ÅS</strong><br>
Los que se queden en Porto Moug√°s no pueden perderse la puesta de sol sobre el oc√©ano, un espect√°culo sublime que los lugare√±os disfrutan a diario desde la puerta de sus casas, en primera l√≠nea de costa.<br>
A s√≥lo 1 km, en la cima de un otero con extraordinarias vistas al mar, se halla el conjunto de petroglifos y el castro de A Cabeci√±a, cuyos misteriosos grabados rupestres datan de la Edad del Bronce, hace m√°s de 4.000 a√±os.<br>
La langosta, el bogavante ‚Äìlumbrigante en gallego‚Äì, el buey de mar y la centolla son manjares propios de esta zona. Hasta hace unas d√©cadas, despu√©s de su captura eran conservados en cetarias, viveros construidos al abrigo de las rocas, aprovechando olas y mareas para renovar constantemente el agua. A la salida de A Guarda pasaremos ante una de estas estructuras p√©treas, la cetaria Redonda, y veremos muy cerca otra, la Alti√±a.
                                    </p>
                                    <div class="expandible-fade"></div>
                                </div>
                                <button class="btn-expandible" onclick="toggleExpand('expandibleContent6', this)">Leer m√°s</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- MODAL ETAPA 7 -->
    <div class="modal-backdrop" id="modalEtapa7">
        <div class="modal-panel">
            <div class="modal-header">
                <h2>Etapa 7: Porto Moug√°s ‚Üí Baiona - Detalles Completos</h2>
                <button class="modal-close" onclick="closeModal('modalEtapa7')">&times;</button>
            </div>
            <div class="modal-body">
                <div class="modal-left">

                    <div class="widget-card" id="weather-etapa7">
    <div class="weather-header">
        <div class="weather-info">
            <div class="weather-temp">--¬∞C</div>
            <div class="weather-desc">Cargando clima...</div>
        </div>
        <div class="weather-icon">‚è≥</div>
    </div>
</div>
                    <div class="modal-section">
                        <h3>‚ö° Datos r√°pidos</h3>
                        <div class="extra-card">
                            <ul>
                                <li><strong>Distancia:</strong> 11,5 km</li>
                                <li><strong>Duraci√≥n estimada:</strong> 4 horas</li>
                                <li><strong>Dificultad:</strong> Muy Baja</li>
                                <li><strong>Tipo de etapa:</strong> Costera, monte y villa hist√≥rica</li>
                                <li><strong>Pavimento:</strong> Carreteras, senderos, calzadas empedradas y calles urbanas</li>
                                <li><strong>Alojamiento:</strong> 2 noches en Baiona para descanso</li>
                            </ul>
                        </div>
                    </div>

                    <div class="modal-section">
                        <h3 class="sec-tramos">üìç Tramos y Puntos de Parada</h3>

                        <!-- Tramo Porto Moug√°s -->
                        <div class="tramo">
                            <div class="tramo-header">
                                <h4>Tramo 1: Porto Moug√°s ‚Üí Pedra Rubia</h4>
                                <div class="tramo-header-right">
                                    <span class="tramo-distance">1,8 km</span>
                                    <span class="tramo-toggle-icon">Ôºã</span>
                                </div>
                            </div>
                            <div class="tramo-content">
                                <p>Se sigue la calle principal, en paralelo a la costa. Enlazamos con la carretera PO-552 y su carril bici, y en la siguiente curva tomamos una pista de tierra a la izquierda, que seguiremos hasta el camping O Mui√±o (que cuenta, por supuesto, con un molino con cierto aspecto manchego), en el lugar de Pedra Rubia.</p>
                                <div class="punto-parada">
                                    <div class="punto-parada-nombre">üìç PEDRA RUBIA</div>
                                    <div class="distancia-acumulada">Distancia acumulada: 1,8 km</div>
                                </div>
                            </div>
                        </div>

                        <!-- Tramo Pedra Rubia -->
                        <div class="tramo">
                            <div class="tramo-header">
                                <h4>Tramo 2: Pedra Rubia ‚Üí A Ermida</h4>
                                <div class="tramo-header-right">
                                    <span class="tramo-distance">2,5 km</span>
                                    <span class="tramo-toggle-icon">Ôºã</span>
                                </div>
                            </div>
                            <div class="tramo-content">
                                <p>Aqu√≠ volvemos al carril bici que va en paralelo a la carretera. Pasamos ante el hotel-restaurante O Pe√±asco, y al cabo de 150 metros un moj√≥n nos indica bajar hacia la costa para seguir un camino herboso, si bien en breve recula y vuelve a ascender a la carretera, en uno de esos casos en que s√≥lo el paisaje justifica el mini-rodeo. De nuevo por el carril bici superamos la Punta Centinela, mientras aparecen en la distancia el cabo Silleiro y su faro. Entramos en el lugar de A Ermida, apenas cuatro casas y un restaurante, antesala de As Mari√±as.</p>
                                <div class="punto-parada">
                                    <div class="punto-parada-nombre">üìç A ERMIDA</div>
                                    <div class="distancia-acumulada">Distancia acumulada: 4,3 km</div>
                                </div>
                            </div>
                        </div>

                        <!-- Tramo A Ermida -->
                        <div class="tramo">
                            <div class="tramo-header">
                                <h4>Tramo 3: A Ermida ‚Üí Baredo (Cami√±o da Portela)</h4>
                                <div class="tramo-header-right">
                                    <span class="tramo-distance">3,9 km</span>
                                    <span class="tramo-toggle-icon">Ôºã</span>
                                </div>
                            </div>
                            <div class="tramo-content">
                                <p>Pasamos ante el hotel Soremma y al cabo de unos metros (sin dejar el carril bici, a pesar que alguna flecha as√≠ lo indique) llegamos al camping Moug√°s, que dispone de un curioso albergue solidario para peregrinos; ambos establecimientos abren s√≥lo de Semana Santa hasta finales de septiembre.</p>
                                <p><strong>‚ö†Ô∏è ATENCI√ìN IMPORTANTE:</strong> Dejamos atr√°s el camping Moug√°s y seguimos por el carril bici durante 650 metros; aqu√≠ debemos estar muy atentos, ya que de repente las flechas nos indican cruzar la carretera ‚Äìcon precauci√≥n, pues no hay paso de peatones‚Äì para comenzar la subida hacia el monte por una rampa de hormig√≥n junto a unos chal√©s, que se convierte en camino de tierra, hierba y piedras, el Cami√±o da Portela. Cruzamos una cancela y nos enfrentamos a un trecho con pendiente del 20%, durillo si bien no excesivamente largo; as√≠ vamos ganando altura, hasta superar la cota del faro, que vemos a lo lejos, a nuestra izquierda y con el oc√©ano al fondo. Estamos sin duda en uno de los tramos m√°s bellos, m√°gicos y solitarios de este camino.</p>
                                <p>Seguimos una calzada antiqu√≠sima ‚Äìtal vez sea romana‚Äì con losas de piedra, utilizada durante siglos tanto para el pastoreo del ganado como por mercaderes en carros (pues vemos algunas hendiduras en las piedras para guiar el paso de las ruedas). Pasamos otra cancela y desembocamos en una llanura con afloramientos gran√≠ticos tras la cual, siempre de frente, comienza la bajada por bosque. Llegamos a una carreterilla asfaltada y la seguimos hasta las primeras casas del barrio de Cabreiro, en la parroquia de Baredo.</p>
                                <div class="punto-parada">
                                    <div class="punto-parada-nombre">üìç BAREDO</div>
                                    <div class="distancia-acumulada">Distancia acumulada: 8,2 km</div>
                                </div>
                            </div>
                        </div>

                        <!-- Tramo Baredo -->
                        <div class="tramo">
                            <div class="tramo-header">
                                <h4>Tramo 4: Baredo ‚Üí Baiona (Final de etapa)</h4>
                                <div class="tramo-header-right">
                                    <span class="tramo-distance">3,3 km</span>
                                    <span class="tramo-toggle-icon">Ôºã</span>
                                </div>
                            </div>
                            <div class="tramo-content">
                                <p>Ahora toca seguir con atenci√≥n las flechas por las calles, entre las vallas de casas y chal√©s. Saldremos por el Cami√±o do R√≠o Peque√±o, una subida por asfalto, al final de la cual giramos bruscamente a la izquierda para seguir la carretera de Baredo (EP-2203) durante 700 metros, entre pinos y con buenas vistas sobre las islas C√≠es; llegamos a una encrucijada donde giraremos a la izquierda, pasando un viaducto sobre la gran brecha excavada de la autov√≠a AG-57. Acto seguido torcemos a la derecha, bordeando un parquecillo con una cruz y juegos infantiles, al que sigue un mirador con mesas de piedra y una p√©rgola, perfecto para disfrutar de la panor√°mica sobre Baiona y la entrada a la r√≠a de Vigo.</p>
                                <p>Siguiendo por la derecha llegamos a las casas del barrio de San Ant√≥n, la zona m√°s elevada de Baiona, y descendemos por sus calles hacia el casco urbano. Llegamos a una rotonda junto al campo de f√∫tbol y, frente a √©ste, el cementerio. Bordeando la valla met√°lica del estadio encontramos la capilla de Santa Liberata. A apenas 50 metros tenemos la excolegiata de Santa Mar√≠a, fundada en el siglo XII por los monjes cistercienses del cercano monasterio de Oia, con portada rom√°nica y naves interiores muy interesantes.</p>
                                <p>El camino sigue junto al muro de la iglesia y gira enseguida por la escalinata de la bonita R√∫a Manuel Valverde, que baja hacia la Praza do Consello (Ayuntamiento) y el paseo mar√≠timo, muy concurrido y tur√≠stico. Sin embargo, las flechas nos desv√≠an antes, pues tuercen a la derecha por la R√∫a do Conde, pasando ante la fuente de Zeta y de frente por la R√∫a Porta da Vila hasta el cruceiro da Sant√≠sima Trinidade, de estilo g√≥tico y cubierto con un soberbio templete o baldaquino de piedra. Continuamos a lo largo de la R√∫a Loureiral y la R√∫a do Burgo, por un recorrido intuitivo que sigue el trazado de la antigua calzada romana, en paralelo a la costa. Cruzamos un puentecillo de piedra sobre el r√≠o Ba√≠√±a con un lavadero en su cauce, y tras recorrer la Rua do Cruceiro llegamos a una avenida que conecta con las autopistas; la cruzamos y entramos en el barrio de Sabar√≠s.</p>
                                <div class="punto-parada">
                                    <div class="punto-parada-nombre">‚úÖ BAIONA - FIN DE ETAPA (2 NOCHES DESCANS O)</div>
                                    <div class="distancia-acumulada">Distancia acumulada total: 11,5 km</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <a href="https://www.google.com/maps/dir/Porto+Moug%C3%A1s,+Oia,+Espa%C3%B1a/Baiona,+Pontevedra/@42.0825,-8.9,12z/data=!3m1!4b1!4m14!4m13!1m5!1m1!1s0xd25997a3a5a5a5b:0xa0a0a0a0a0a0a0a0!2m2!1d-8.892!2d42.046!1m5!1m1!1s0xd259062ccf7c87d:0x404f58273ca55a0!2m2!1d-8.8495577!2d42.1193392!3e2?entry=ttu" target="_blank" class="btn-route-map">
    üó∫Ô∏è Ver Ruta en Google Maps (11,5 km)
</a>

<div class="modal-section" style="margin-top: 25px;">
    <h3 class="sec-alojamiento" style="background: #e1f5fe !important; border-color: #b3e5fc !important;">üì∏ Mi Recuerdo del D√≠a</h3>
    <div class="extra-card" style="text-align: center; border-top: 3px solid #3498db; padding: 15px;">
        <div id="photo-container-etapa7" class="photo-preview" style="width: 100%; height: 250px; background: #f9f9f9; border-radius: 12px; display: flex; align-items: center; justify-content: center; overflow: hidden; margin-bottom: 12px; border: 2px dashed #3498db; position: relative;">
            <span style="color: #3498db; font-size: 0.9em; font-weight: 500;">Captura un momento especial</span>
        </div>
        
        <input type="file" id="input-photo-etapa7" accept="image/*" style="display: none;" onchange="handlePhotoUpload('etapa7', this)">
        
        <div style="display: flex; gap: 8px;">
            <button onclick="document.getElementById('input-photo-etapa7').click()" style="flex: 2; background: #3498db; color: white; border: none; padding: 10px; border-radius: 8px; cursor: pointer; font-weight: bold; font-size: 0.85em;">
                üì∑ Seleccionar Foto
            </button>
            <button onclick="removePhoto('etapa7')" style="flex: 1; background: #f8d7da; color: #721c24; border: 1px solid #f5c6cb; padding: 10px; border-radius: 8px; cursor: pointer; font-weight: bold; font-size: 0.85em;">
                üóëÔ∏è Borrar
            </button>
        </div>
    </div>
</div>

                </div>
                <div class="modal-right">
                    <div class="modal-section">
                        <h3 class="sec-alojamiento">üè® Alojamiento</h3>
                        <div class="accommodation-card">
                            <h4>üåü APARTAMENTO MARI√ëEIRO *** (Baiona)</h4>
                            <div class="accommodation-details">
                                <div class="accommodation-detail-line"><strong>Fechas:</strong> 07/06/2026 ‚Äì 09/06/2026</div>
                                <div class="accommodation-detail-line"><strong>Duraci√≥n:</strong> 2 noches (descanso)</div>
                                <div class="accommodation-detail-line"><strong>Ubicaci√≥n:</strong> A 600m del centro de Baiona</div>
                                <div class="accommodation-detail-line"><strong>Tipo:</strong> Apartamento de 2 dormitorios</div>
                                <div class="accommodation-detail-line"><strong>Camas:</strong> 2 individuales + 1 doble</div>
                                <div class="accommodation-detail-line"><strong>Precio:</strong> <span style="font-size: 1.1em; font-weight: bold; color: #27ae60;">256,80‚Ç¨</span> (2 noches)</div>
                            </div>
                            <a href="https://www.booking.com/Share-68H8KFH" target="_blank" class="btn-alojamiento">
                                Ver alojamiento en Booking
                            </a>
                        </div>
                    </div>

                    <div class="widget-card" id="diary-etapa7">
    <div class="diary-body">
        <textarea class="diary-textarea" placeholder="‚úçÔ∏è Notas personales..." oninput="saveDiary('etapa7', this.value)"></textarea>
    </div>
    <div class="diary-footer">
        <span>Guardado autom√°tico</span>
        <span id="status-etapa7">‚úÖ</span>
    </div>
</div>

                    <div class="modal-section">
                        <h3 class="sec-gastronomia">üçΩÔ∏è Gastronom√≠a</h3>
                        <div class="extra-card">
                            <p>Baiona es el para√≠so de los amantes del marisco gallego:</p>
                            <ul>
                                <li><strong>Pulpo a la gallega</strong> - especialidad local</li>
                                <li><strong>Percebes del Cabo Silleiro</strong> - manjares del mar</li>
                                <li><strong>Erizos de mar</strong> - delicias primaverales</li>
                                <li><strong>N√©coras</strong> - crust√°ceos de la costa</li>
                                <li>Vinos de la comarca de Pontevedra</li>
                                <li>Amplia oferta de restaurantes en primera l√≠nea de costa</li>
                            </ul>
                        </div>
                    </div>

                    <div class="modal-section">
    <h3 class="sec-alojamiento" style="background: #fff3e0 !important; border-color: #ffe0b2 !important;">üí∞ Mis Gastos (Etapa)</h3>
    <div class="extra-card" style="background: #fcfcfc; border-top: 3px solid #e67e22;">
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
            <div>
                <label style="font-size: 0.8em; color: #7f8c8d; display: block; margin-bottom: 4px;">üè® Alojamiento (‚Ç¨)</label>
                <input type="number" class="expense-input" data-cat="alojamiento" placeholder="0" 
                       style="width:100%; padding:8px; border:1px solid #ddd; border-radius:4px; font-size: 0.9em;">
            </div>
            <div>
                <label style="font-size: 0.8em; color: #7f8c8d; display: block; margin-bottom: 4px;">üçΩÔ∏è Comida (‚Ç¨)</label>
                <input type="number" class="expense-input" data-cat="comida" placeholder="0" 
                       style="width:100%; padding:8px; border:1px solid #ddd; border-radius:4px; font-size: 0.9em;">
            </div>
        </div>
        <div style="margin-top: 10px;">
            <label style="font-size: 0.8em; color: #7f8c8d; display: block; margin-bottom: 4px;">üéí Otros / Varios (‚Ç¨)</label>
            <input type="number" class="expense-input" data-cat="otros" placeholder="0" 
                   style="width:100%; padding:8px; border:1px solid #ddd; border-radius:4px; font-size: 0.9em;">
        </div>
        <div style="margin-top: 15px; padding-top: 10px; border-top: 1px dashed #eee; font-weight: bold; color: #2c3e50; font-size: 1em; text-align: right;">
            Total Etapa: <span class="subtotal-etapa" style="color: #e67e22;">0</span>‚Ç¨
        </div>
    </div>
</div>

                    <div class="modal-section">
                        <h3>ü§ì Curiosidades</h3>
                        <div class="extra-card">
                            <div class="expandible-text">
                                <div class="expandible-content collapsed" id="expandibleContent7">
                                    <p>Hoy os sugerimos una etapa corta en kilometraje pero muy variada en su contenido, con tramos de costa salvaje, un recorrido muy bonito por monte y la visita obligada a la villa de Baiona, muy tur√≠stica y que merece una pausa cultural y gastron√≥mica.<br><br>
Al inicio de la jornada recorreremos parajes de costa rocosa, expuesta al viento y a las olas del Atl√°ntico. Resulta un h√°bitat perfecto para las aves marinas, tales como diferentes especies de gaviotas y cormoranes; √©stos, tambi√©n conocidos como cuervos marinos, son grandes nadadores tanto en superficie como buceando para pescar sus presas.<br>
Durante la ruta se pasa cerca de varios petroglifos, misteriosas inscripciones sobre roca realizadas por los pobladores de la Edad del Bronce hacia el 2500 a.C., la misma √©poca de las pir√°mides de Egipto o del monumento megal√≠tico de Stonehenge.<br>
Atenci√≥n a los caminantes: despu√©s del camping Moug√°s debemos seguir el carril bici durante 650 metros, y justo all√≠ las flechas indican cruzar la carretera ‚Äìcon precauci√≥n, pues no hay paso de peatones‚Äì para comenzar la subida hacia el monte, por un tramo agreste y solitario con senderos de tierra y calzadas empedradas, sin duda uno de los m√°s bellos de este camino.<br>
En este tramo por monte, donde deberemos abrir y cerrar varias cancelas, tal vez veamos caballos salvajes; son de una raza aut√≥ctona y se utilizan en la famosa fiesta de los Curros o Rapa das Bestas que se celebra en varias localidades entre mayo y julio, donde una multitud acorrala a los equinos para meterlos en el curro ‚Äìrecinto cerrado‚Äì, raparles la crin y marcarlos.<br>
Una de las estampas m√°s fotog√©nicas de la etapa es la panor√°mica desde el camino sobre el faro de Cabo Silleiro, con el azul del oc√©ano como tel√≥n de fondo. El farol fue construido en 1924 para sustituir al anterior de 1862, en un punto de navegaci√≥n peligrosa por los escollos, la proximidad a las islas C√≠es y las Estelas, y la entrada a la r√≠a de Vigo.<br><br>
<strong>BAIONA</strong><br>
En marzo de 1493 arrib√≥ a Baiona la carabela Pinta tras el descubrimiento del Nuevo Mundo, comandada por Mart√≠n Alonso Pinz√≥n, y en homenaje a esta gesta se ha instalado en el puerto una r√©plica de dicha nave, que puede visitarse; adem√°s cada a√±o celebran la efem√©ride con una multitudinaria fiesta medieval.<br>
El camino pasa ante la barroca capilla de Santa Liberata, una joven m√°rtir nacida en Baiona en el siglo II que se considera la primera mujer cristiana que muri√≥ crucificada; la incre√≠ble historia de la ni√±a, sus ocho hermanas gemelas y su nodriza es digna de una pel√≠cula gore, m√°xime cuando al final descubrimos que el gobernador romano que dict√≥ su pena de muerte resulta que era, sin saberlo, el verdadero padre de la ni√±a.<br>
A pocos metros de la capilla antedicha est√° la excolegiata de la Anunciada, iglesia rom√°nica con un gran roset√≥n. A la salida de la villa descubriremos el cruceiro da Trinidade, del siglo XV y cubierto por un soberbio templete.<br>
No hay m√°s que repasar los productos propios de la zona: pulpo, n√©coras, erizos, percebes del Cabo Silleiro‚Ä¶ ¬øa qui√©n no se le hace la boca agua?<br>
Pasaremos aqu√≠ en Baiona 2 noches para descansar y conocer las Islas C√≠es.
                                    </p>
                                    <div class="expandible-fade"></div>
                                </div>
                                <button class="btn-expandible" onclick="toggleExpand('expandibleContent7', this)">Leer m√°s</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- MODAL ETAPA 9 -->
    <div class="modal-backdrop" id="modalEtapa9">
        <div class="modal-panel">
            <div class="modal-header">
                <h2>Etapa 9: Padr√≥n ‚Üí Santiago de Compostela</h2>
                <button class="modal-close" onclick="closeModal('modalEtapa9')">√ó</button>
            </div>
            <div class="modal-body">
                <div class="modal-left">

                    <div class="widget-card" id="weather-etapa9">
    <div class="weather-header">
        <div class="weather-info">
            <div class="weather-temp">--¬∞C</div>
            <div class="weather-desc">Cargando clima...</div>
        </div>
        <div class="weather-icon">‚è≥</div>
    </div>
</div>
                    <div class="modal-section">
                        <h3>‚ö° Datos r√°pidos</h3>
                        <div class="extra-card">
                            <ul>
                                <li><strong>Distancia:</strong> 24,3 km</li>
                                <li><strong>Duraci√≥n estimada:</strong> 6 horas</li>
                                <li><strong>Dificultad:</strong> Baja</li>
                                <li><strong>Tipo de etapa:</strong> Urbana y monumental</li>
                            </ul>
                        </div>
                    </div>

                    <div class="modal-section">
                        <h3 class="sec-tramos">üìç Tramos y Puntos de Parada</h3>

                        <div class="tramo">
                            <div class="tramo-header">
                                <h4>Tramo 1: Padr√≥n ‚Üí Iria Flavia</h4>
                                <div class="tramo-header-right">
                                    <span class="tramo-distance">1,0 km</span>
                                    <span class="tramo-toggle-icon">Ôºã</span>
                                </div>
                            </div>
                            <div class="tramo-content">
                                <p>Salimos de Padr√≥n por la calle Murgad√°n y nos aproximamos a la N-550 tras cruzar una canalizaci√≥n del r√≠o Sar. Cruzamos la nacional con precauci√≥n.</p>
                                <p>El camino nos lleva directamente a la parte trasera de la Colegiata de Iria Flavia.</p>
                                <div class="punto-parada">
                                    <div class="punto-parada-nombre">üìç IRIA FLAVIA</div>
                                    <div class="distancia-acumulada">Distancia acumulada: 1,0 km</div>
                                </div>
                            </div>
                        </div>

                        <div class="tramo">
                            <div class="tramo-header">
                                <h4>Tramo 2: Iria Flavia ‚Üí A Escravitude</h4>
                                <div class="tramo-header-right">
                                    <span class="tramo-distance">4,8 km</span>
                                    <span class="tramo-toggle-icon">Ôºã</span>
                                </div>
                            </div>
                            <div class="tramo-content">
                                <p>Volvemos a la N-550 y cruzamos la v√≠a del tren a nivel. Este tramo es una sucesi√≥n de cruces de la nacional y peque√±os n√∫cleos rurales. Hay que extremar la precauci√≥n con el tr√°fico.</p>
                                <p>Llegamos al santuario da Escravitude.</p>
                                <div class="punto-parada">
                                    <div class="punto-parada-nombre">üìç A ESCRAVITUDE</div>
                                    <div class="distancia-acumulada">Distancia acumulada: 5,8 km</div>
                                </div>
                            </div>
                        </div>

                        <div class="tramo">
                            <div class="tramo-header">
                                <h4>Tramo 3: A Escravitude ‚Üí O Faramello</h4>
                                <div class="tramo-header-right">
                                    <span class="tramo-distance">4,1 km</span>
                                    <span class="tramo-toggle-icon">Ôºã</span>
                                </div>
                            </div>
                            <div class="tramo-content">
                                <p>Ascendemos hasta la iglesia de Santa Mar√≠a de Cruces y tomamos una pista forestal que desciende hacia la v√≠a del tren. Pasamos un bonito tramo bajo parras de vi√±as.</p>
                                <p>Volvemos a la N-550 y tras 800 metros nos desviamos a la izquierda para cruzar O Faramello.</p>
                                <div class="punto-parada">
                                    <div class="punto-parada-nombre">üìç O FARAMELLO</div>
                                    <div class="distancia-acumulada">Distancia acumulada: 9,9 km</div>
                                </div>
                            </div>
                        </div>

                        <div class="tramo">
                            <div class="tramo-header">
                                <h4>Tramo 4: O Faramello ‚Üí R√∫a de Francos</h4>
                                <div class="tramo-header-right">
                                    <span class="tramo-distance">0,7 km</span>
                                    <span class="tramo-toggle-icon">Ôºã</span>
                                </div>
                            </div>
                            <div class="tramo-content">
                                <p>Seguimos por pista asfaltada a mano izquierda. Es un tramo corto que nos deja en el lugar de R√∫a de Francos.</p>
                                <div class="punto-parada">
                                    <div class="punto-parada-nombre">üìç R√öA DE FRANCOS</div>
                                    <div class="distancia-acumulada">Distancia acumulada: 10,6 km</div>
                                </div>
                            </div>
                        </div>

                        <div class="tramo">
                            <div class="tramo-header">
                                <h4>Tramo 5: R√∫a de Francos ‚Üí O Milladoiro</h4>
                                <div class="tramo-header-right">
                                    <span class="tramo-distance">6,2 km</span>
                                    <span class="tramo-toggle-icon">Ôºã</span>
                                </div>
                            </div>
                            <div class="tramo-content">
                                <p>Cruzamos las v√≠as del tren y avanzamos alternando asfalto y caminos de tierra, cruzando el r√≠o Tinto. La carretera CP-0206 nos obliga a desviarnos hacia una rotonda de la N-550 para poder cruzar.</p>
                                <p>Comenzamos el ascenso hacia O Milladoiro, llegando a la capilla de Santa Mar√≠a Magdalena.</p>
                                <div class="punto-parada">
                                    <div class="punto-parada-nombre">üìç O MILLADOIRO</div>
                                    <div class="distancia-acumulada">Distancia acumulada: 16,8 km</div>
                                </div>
                            </div>
                        </div>

                        <div class="tramo">
                            <div class="tramo-header">
                                <h4>Tramo 6: O Milladoiro ‚Üí Santiago (Catedral)</h4>
                                <div class="tramo-header-right">
                                    <span class="tramo-distance">7,5 km</span>
                                    <span class="tramo-toggle-icon">Ôºã</span>
                                </div>
                            </div>
                            <div class="tramo-content">
                                <p>Descendemos cruzando O Porto de Conxo. Salvamos las v√≠as del AVE y la autopista para llegar a Ponte Vella sobre el r√≠o Sar.</p>
                                <p>Entramos en la ciudad por la Avenida da Choupana y Rosal√≠a de Castro. Subimos por la R√∫a do Franco hasta la Plaza del Obradoiro.</p>
                                <div class="punto-parada">
                                    <div class="punto-parada-nombre">üèÅ SANTIAGO DE COMPOSTELA</div>
                                    <div class="distancia-acumulada">Distancia acumulada total: 24,3 km</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <a href="https://www.google.com/maps/dir/Padr%C3%B3n,+A+Coru%C3%B1a/Catedral+de+Santiago+de+Compostela,+Praza+do+Obradoiro,+Santiago+de+Compostela/@42.809,-8.6,11z/data=!3m1!4b1!4m14!4m13!1m5!1m1!1s0xd2f0394c8e7195d:0x404f58273ca5da0!2m2!1d-8.6608933!2d42.7383626!1m5!1m1!1s0xd2efe4365741631:0x2287f32029524021!2m2!1d-8.5444654!2d42.8805763!3e2?entry=ttu" target="_blank" class="btn-route-map">
    üó∫Ô∏è Ver Ruta en Google Maps (24,3 km)
</a>

<div class="modal-section" style="margin-top: 25px;">
    <h3 class="sec-alojamiento" style="background: #e1f5fe !important; border-color: #b3e5fc !important;">üì∏ Mi Recuerdo del D√≠a</h3>
    <div class="extra-card" style="text-align: center; border-top: 3px solid #3498db; padding: 15px;">
        <div id="photo-container-etapa9" class="photo-preview" style="width: 100%; height: 250px; background: #f9f9f9; border-radius: 12px; display: flex; align-items: center; justify-content: center; overflow: hidden; margin-bottom: 12px; border: 2px dashed #3498db; position: relative;">
            <span style="color: #3498db; font-size: 0.9em; font-weight: 500;">Captura un momento especial</span>
        </div>
        
        <input type="file" id="input-photo-etapa9" accept="image/*" style="display: none;" onchange="handlePhotoUpload('etapa9', this)">
        
        <div style="display: flex; gap: 8px;">
            <button onclick="document.getElementById('input-photo-etapa9').click()" style="flex: 2; background: #3498db; color: white; border: none; padding: 10px; border-radius: 8px; cursor: pointer; font-weight: bold; font-size: 0.85em;">
                üì∑ Seleccionar Foto
            </button>
            <button onclick="removePhoto('etapa9')" style="flex: 1; background: #f8d7da; color: #721c24; border: 1px solid #f5c6cb; padding: 10px; border-radius: 8px; cursor: pointer; font-weight: bold; font-size: 0.85em;">
                üóëÔ∏è Borrar
            </button>
        </div>
    </div>
</div>

                </div>
                <div class="modal-right">
                    <div class="modal-section">
                        <h3 class="sec-alojamiento">üè® Alojamiento</h3>
                        <div class="accommodation-card">
                            <h4>üåü PENSI√ìN DA SELA *** (Santiago)</h4>
                            <div class="accommodation-details">
                                <div class="accommodation-detail-line"><strong>Fechas:</strong> 10/06/2026 ‚Äì 11/06/2026</div>
                                <div class="accommodation-detail-line"><strong>Ubicaci√≥n:</strong> A 1,4 Km del centro</div>
                                <div class="accommodation-detail-line"><strong>Tipo:</strong> Habitaci√≥n Familiar</div>
                                <div class="accommodation-detail-line"><strong>Precio:</strong> <span style="font-size: 1.1em; font-weight: bold; color: #27ae60;">116‚Ç¨</span></div>
                            </div>
                            <a href="https://www.booking.com/Share-tzAcNg3" target="_blank" class="btn-alojamiento">Ver alojamiento en Booking</a>
                        </div>
                    </div>

                    <div class="widget-card" id="diary-etapa9">
    <div class="diary-body">
        <textarea class="diary-textarea" placeholder="‚úçÔ∏è Notas personales..." oninput="saveDiary('etapa9', this.value)"></textarea>
    </div>
    <div class="diary-footer">
        <span>Guardado autom√°tico</span>
        <span id="status-etapa9">‚úÖ</span>
    </div>
</div>

                    <div class="modal-section">
                        <h3 class="sec-gastronomia">üçΩÔ∏è Gastronom√≠a</h3>
                        <div class="extra-card">
                            <p><strong>Especialidades en Santiago:</strong></p>
                            <ul>
                                <li>Mariscada (R√∫a do Franco)</li>
                                <li>Tarta de Santiago</li>
                                <li>Tapas gratuitas con la consumici√≥n</li>
                                <li>Productos frescos del Mercado de Abastos</li>
                            </ul>
                        </div>
                    </div>

                    <div class="modal-section">
    <h3 class="sec-alojamiento" style="background: #fff3e0 !important; border-color: #ffe0b2 !important;">üí∞ Mis Gastos (Etapa)</h3>
    <div class="extra-card" style="background: #fcfcfc; border-top: 3px solid #e67e22;">
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
            <div>
                <label style="font-size: 0.8em; color: #7f8c8d; display: block; margin-bottom: 4px;">üè® Alojamiento (‚Ç¨)</label>
                <input type="number" class="expense-input" data-cat="alojamiento" placeholder="0" 
                       style="width:100%; padding:8px; border:1px solid #ddd; border-radius:4px; font-size: 0.9em;">
            </div>
            <div>
                <label style="font-size: 0.8em; color: #7f8c8d; display: block; margin-bottom: 4px;">üçΩÔ∏è Comida (‚Ç¨)</label>
                <input type="number" class="expense-input" data-cat="comida" placeholder="0" 
                       style="width:100%; padding:8px; border:1px solid #ddd; border-radius:4px; font-size: 0.9em;">
            </div>
        </div>
        <div style="margin-top: 10px;">
            <label style="font-size: 0.8em; color: #7f8c8d; display: block; margin-bottom: 4px;">üéí Otros / Varios (‚Ç¨)</label>
            <input type="number" class="expense-input" data-cat="otros" placeholder="0" 
                   style="width:100%; padding:8px; border:1px solid #ddd; border-radius:4px; font-size: 0.9em;">
        </div>
        <div style="margin-top: 15px; padding-top: 10px; border-top: 1px dashed #eee; font-weight: bold; color: #2c3e50; font-size: 1em; text-align: right;">
            Total Etapa: <span class="subtotal-etapa" style="color: #e67e22;">0</span>‚Ç¨
        </div>
    </div>
</div>

                    <div class="modal-section">
                        <h3>ü§ì Curiosidades</h3>
                        <div class="extra-card">
                            <div class="expandible-text">
                                <div class="expandible-content collapsed" id="expandibleContent9">
                                    <p>Etapa poco agradecida; transcurre en su mayor parte por asfalto y zonas urbanizadas. Seguimos el eje de la nacional N-550, carretera que cruzamos cuatro veces.</p>
                                    <p>Los desniveles m√°s relevantes los encontramos en la segunda mitad de la etapa; cabe destacar el moderado pero progresivo ascenso al Agro dos Monteiros, en O Milladoiro.</p>
                                    
                                    <p><strong>IRIA FLAVIA</strong><br>
                                    Podemos visitar la bell√≠sima colegiata, que fue la primera catedral de Galicia; y, luego, pasear por el cementerio de Adina, donde reposa bajo un olivo el escritor Camilo Jos√© Cela, hijo de la parroquia e ilustre Premio Nobel de Litetura, y donde tambi√©n estuvo enterrada Rosal√≠a de Castro antes de su traslado a Santiago. Frente a la colegiata se encuentra la Fundaci√≥n Camilo Jos√© Cela, un gran museo dedicado a su obra.</p>

                                    <p><strong>A ESCRAVITUDE</strong><br>
                                    Encontramos el barroco Santuario da Escravitude y su Fuente Santa.</p>

                                    <p><strong>SANTIAGO DE COMPOSTELA</strong><br>
                                    La Oficina de Acogida al Peregrino (R√∫a Carretas, 33), situada cerca de la catedral, es el lugar donde se expide la Compostela, documento que certifica que hemos realizado ‚Äìcomo m√≠nimo‚Äì los cien √∫ltimos kil√≥metros a pie, o bien los √∫ltimos doscientos en bicicleta; para comprobarlo se sirven de los sellos que hemos ido estampando en nuestra credencial durante toda la ruta.</p>

                                    <p>El casco hist√≥rico de la ciudad es uno de los mejor conservados de Europa. La catedral, donde est√° el sepulcro del ap√≥stol Santiago, es toda ella monumental; a su entrada desde la plaza del Obradoiro encontramos el P√≥rtico de la Gloria, esculpido a finales del siglo XII y obra maestra del rom√°nico.</p>

                                    <p>En la catedral (no se puede entrar con mochila), podemos asistir a la Misa del Peregrino, a las 12 del mediod√≠a, abrazar la imagen del Ap√≥stol en el Altar Mayor (de 9:30 a 13:30 y de 16:00 a 19:30), y bajar a la cripta donde se halla el sepulcro del Ap√≥stol (de 7:00 a 20:30). Hoy en d√≠a, el P√≥rtico de la Gloria solo se puede visitar en grupo y bajo reserva.</p>

                                    <p>El vuelo del Botafumeiro, un incensario de gran tama√±o situado delante del altar mayor, forma parte de la liturgia y resulta un espect√°culo digno de ver. Pesa 60 kilos y es mecido como un p√©ndulo a gran velocidad gracias a la fuerza de ocho tiraboleiros, tirando de una cuerda mediante un mecanismo de poleas. No funciona siempre, s√≥lo en misas solemnes, durante todo el A√±o Santo o cuando alg√∫n grupo o particular lo solicita (en general pagando, y no poco). Afortunadamente, casi cada d√≠a hay alg√∫n mecenas o grupo organizado que lo sufraga.</p>

                                    <p>No son pocos los peregrinos que celebran su llegada al Obradoiro con una mariscada. Alrededor de la catedral podremos encontrar muchos restaurantes especializados, aunque en √©stos se suele pagar el precio de la cercan√≠a al Ap√≥stol. La calidad de los productos es sobresaliente en todas sus preparaciones: cocidos, en salpic√≥n, a la plancha o rellenos, como las vieiras. Algunos de los restaurantes m√°s cotizados son el Terra Nosa, el San Clemente y la Marisquer√≠a Fornos.</p>

                                    <p>Aprovechad al mediod√≠a o antes de cenar para ir a tomar algo, pues en Santiago a√∫n es costumbre servir tapa gratuita en cada consumici√≥n. Alrededor de la plaza del Obradoiro, en las R√∫as do Franco, da Rai√±a y do Vilar, se encuentran algunos de los establecimientos m√°s conocidos.</p>

                                    <p>El dulce m√°s famoso del Camino es, sin duda, la Tarta de Santiago. Se elabora con huevos y harina de almendra y la sirven en todos los restaurantes como postre. Si queremos alguna tarta para llevar a casa, podemos comprarlas en obradores tradicionales como Casa Mora, Confiter√≠a las Colonias, o en Delicatessen as Monxas.</p>

                                    <p>El segundo lugar m√°s visitado de Santiago de Compostela, tras la catedral, es el mercado de Abastos, en el casco antiguo, con amplia oferta de productos frescos y artesanales.</p>
                                    
                                    <div class="expandible-fade"></div>
                                </div>
                                <button class="btn-expandible" onclick="toggleExpand('expandibleContent9', this)">Leer m√°s</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <button class="btn-sos" onclick="openEmergencyModal()" title="Emergencias">
    üÜò
</button>

<div class="modal-backdrop" id="modalSOS">
    <div class="modal-panel" style="max-width: 400px; text-align: center;">
        <div class="modal-header" style="background: #e74c3c; color: white; justify-content: center;">
            <h2 style="margin:0;">üÜò EMERGENCIA</h2>
        </div>
        <div class="modal-body" style="display: block; padding: 30px;">
            
            <p style="font-size: 1.1em; margin-bottom: 20px;">
                Si tienes una emergencia real, pulsa el bot√≥n para llamar inmediatamente.
            </p>

            <a href="tel:112" style="display: block; background: #e74c3c; color: white; text-decoration: none; padding: 20px; border-radius: 10px; font-size: 1.5em; font-weight: bold; margin-bottom: 25px; box-shadow: 0 4px 10px rgba(231,76,60,0.3); transition: transform 0.2s;">
                üìû LLAMAR AL 112
            </a>

            <div style="background: #f9f9f9; padding: 15px; border-radius: 8px; border: 1px solid #eee;">
                <h4 style="margin-bottom: 10px; color: #555;">üìç Tu Ubicaci√≥n Actual</h4>
                <div id="sos-location" style="font-family: monospace; font-size: 1.1em; color: #333; margin-bottom: 10px;">
                    Esperando GPS...
                </div>
                <button onclick="getLocation()" style="background: #3498db; color: white; border: none; padding: 8px 15px; border-radius: 5px; cursor: pointer; font-size: 0.9em;">
                    üîÑ Obtener Coordenadas
                </button>
            </div>

            <button onclick="closeModal('modalSOS')" style="margin-top: 25px; background: transparent; border: 1px solid #aaa; padding: 10px 20px; border-radius: 20px; cursor: pointer; color: #666;">
                Cancelar
            </button>
        </div>
    </div>
</div>

    <script>
        function openModal(modalId) {
    document.getElementById(modalId).classList.add('show');
    
    // Convertimos 'modalEtapa1' en 'etapa1' para buscar los datos
    const cleanId = modalId.replace('modal', '').toLowerCase();
    
    // Cargamos el diario, el clima y los gastos
    loadDiaryWidget(cleanId);
    loadExpensesIntoModal(cleanId);
    
    // --- NUEVO: CARGAR LA FOTO DEL D√çA SI EXISTE ---
    const savedPhoto = localStorage.getItem(`photo_${cleanId}`);
    if (savedPhoto) {
        displayPhoto(cleanId, savedPhoto);
    }
}

        function closeModal(modalId) {
            document.getElementById(modalId).classList.remove('show');
        }

        function toggleExpand(contentId, button) {
            const content = document.getElementById(contentId);
            content.classList.toggle('collapsed');
            button.textContent = content.classList.contains('collapsed') ? 'Leer m√°s' : 'Leer menos';
        }

        document.addEventListener('DOMContentLoaded', function() {
            document.querySelectorAll('.modal-backdrop').forEach(modal => {
                modal.addEventListener('click', function(e) {
                    if (e.target === this) {
                        this.classList.remove('show');
                    }
                });
            });

            // 1. Esta funci√≥n se activa cuando eliges una foto
function handlePhotoUpload(etapaId, input) {
    const file = input.files[0];
    if (file) {
        const reader = new FileReader();
        reader.onload = function(e) {
            const imageData = e.target.result;
            // ESTA L√çNEA ES LA QUE GUARDA EN EL NAVEGADOR
            localStorage.setItem(`photo_${etapaId}`, imageData); 
            displayPhoto(etapaId, imageData);
        };
        reader.readAsDataURL(file);
    }
}

// 2. Esta funci√≥n pone la imagen f√≠sicamente en el cuadro
function displayPhoto(etapaId, imageData) {
    const container = document.getElementById(`photo-container-${etapaId}`);
    if (container) {
        container.innerHTML = `<img src="${imageData}" style="width: 100%; height: 100%; object-fit: cover; cursor: pointer;" onclick="window.open('${imageData}')">`;
        container.style.border = "none";
    }
}

// 3. Por si quieres borrarla y poner otra
function removePhoto(etapaId) {
    if (confirm("¬øQuieres borrar esta foto?")) {
        localStorage.removeItem(`photo_${etapaId}`);
        const container = document.getElementById(`photo-container-${etapaId}`);
        if (container) {
            container.innerHTML = `<span style="color: #3498db; font-size: 0.9em; font-weight: 500;">Captura un momento especial</span>`;
            container.style.border = "2px dashed #3498db";
        }
    }
}

            document.querySelectorAll('.tramo-header').forEach(header => {
                header.addEventListener('click', function() {
                    const tramo = this.closest('.tramo');
                    const isOpen = tramo.classList.contains('open');
                    tramo.classList.toggle('open');
                    const icon = tramo.querySelector('.tramo-toggle-icon');
                    if (icon) icon.textContent = isOpen ? 'Ôºã' : '‚àí';
                });
            });
        });
        // --- CUENTA ATR√ÅS (HYPE TRAIN) ---
    // Fecha de inicio: 1 de Junio de 2026 a las 08:00 AM
    const fechaInicio = new Date("June 1, 2026 08:00:00").getTime();

    const x = setInterval(function() {
        const ahora = new Date().getTime();
        const distancia = fechaInicio - ahora;

        const dias = Math.floor(distancia / (1000 * 60 * 60 * 24));
        const horas = Math.floor((distancia % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
        const minutos = Math.floor((distancia % (1000 * 60 * 60)) / (1000 * 60));

        const elemento = document.getElementById("countdown");
        if (elemento) {
            elemento.innerHTML = dias + "d " + horas + "h " + minutos + "m ";
            
            if (distancia < 0) {
                clearInterval(x);
                elemento.innerHTML = "¬°BUEN CAMINO!";
                elemento.style.color = "#2ecc71";
            }
        }
    }, 1000);
        // --- L√ìGICA DE LA BARRA DE PROGRESO ---

    function updateProgress() {
        const checkboxes = document.querySelectorAll('.etapa-checkbox');
        const total = checkboxes.length;
        let checkedCount = 0;

        checkboxes.forEach(box => {
            // 1. Verificar si est√° marcado
            if (box.checked) {
                checkedCount++;
                // A√±adir clase visual a la tarjeta padre
                box.closest('.etapa').classList.add('completed');
                // Guardar en memoria del navegador
                localStorage.setItem(box.dataset.id, 'true');
            } else {
                box.closest('.etapa').classList.remove('completed');
                localStorage.setItem(box.dataset.id, 'false');
            }
        });

        // 2. Calcular porcentaje
        const percentage = Math.round((checkedCount / total) * 100);

        // 3. Actualizar la barra visual
        const progressBar = document.getElementById('progressBar');
        const progressText = document.getElementById('progressText');

        progressBar.style.width = percentage + '%';
        progressBar.textContent = percentage + '%'; // Texto dentro de la barra
        progressText.textContent = checkedCount + '/' + total + ' Completadas';
        
        // Celebraci√≥n si llegas al 100%
        if (percentage === 100) {
            progressBar.style.backgroundColor = '#f1c40f'; // Dorado
            progressBar.textContent = '¬°CAMINO COMPLETADO! üèÜ';
        }
    }

    // --- CARGAR DATOS GUARDADOS AL ABRIR LA P√ÅGINA ---
    function loadSavedProgress() {
        const checkboxes = document.querySelectorAll('.etapa-checkbox');
        
        checkboxes.forEach(box => {
            const savedState = localStorage.getItem(box.dataset.id);
            if (savedState === 'true') {
                box.checked = true;
            }
        });
        
        // Actualizar la barra inicial
        updateProgress();
    }

    // Ejecutar al cargar la p√°gina
    document.addEventListener('DOMContentLoaded', function() {
        // ... (tu c√≥digo anterior) ...
        loadSavedProgress(); // Cargar progreso
    });
    document.addEventListener('DOMContentLoaded', function() {
    // ... tu c√≥digo anterior (como los quotes) ...
    
    loadSavedProgress(); // Carga el progreso de etapas
    loadBackpackState(); // Carga el estado de la mochila
    
    // A√ëADE ESTA L√çNEA AQU√ç:
    refreshGlobalTotal(); 
});

    // --- NUEVO: CONFIGURACI√ìN DE COORDENADAS PARA EL TIEMPO ---
    const stageCoordinates = {
        'etapa1': { lat: 41.275, lon: -8.729, name: 'Labruge' },
        'etapa2': { lat: 41.380, lon: -8.760, name: 'P√≥voa de Varzim' },
        'etapa3': { lat: 41.536, lon: -8.784, name: 'Marinhas' },
        'etapa4': { lat: 41.693, lon: -8.832, name: 'Viana do Castelo' },
        'etapa5': { lat: 41.876, lon: -8.838, name: 'Caminha' },
        'etapa6': { lat: 42.046, lon: -8.892, name: 'Porto Moug√°s' },
        'etapa7': { lat: 42.119, lon: -8.850, name: 'Baiona' },
        'etapa8': { lat: 42.738, lon: -8.661, name: 'Padr√≥n' }, 
        'etapa9': { lat: 42.880, lon: -8.544, name: 'Santiago' }
    };

    // Funci√≥n actualizada para buscar Tiempo y Diario por separado
    async function loadDiaryWidget(etapaId) {
        
        // 1. CARGAR DIARIO (Busca el ID diary-etapaX)
        const diaryContainer = document.getElementById(`diary-${etapaId}`);
        if (diaryContainer) {
            const savedText = localStorage.getItem(`diary_text_${etapaId}`) || '';
            const textarea = diaryContainer.querySelector('.diary-textarea');
            if (textarea) textarea.value = savedText;
        }

        // 2. CARGAR TIEMPO (Busca el ID weather-etapaX)
        const weatherContainer = document.getElementById(`weather-${etapaId}`);
        const coords = stageCoordinates[etapaId]; // Usa las coordenadas que ya definiste arriba

        if (weatherContainer && coords) {
            try {
                const response = await fetch(`https://api.open-meteo.com/v1/forecast?latitude=${coords.lat}&longitude=${coords.lon}&current_weather=true&timezone=auto`);
                const data = await response.json();
                
                // Iconos
                const code = data.current_weather.weathercode;
                let icon = '‚òÄÔ∏è'; let desc = 'Despejado';
                if (code > 0 && code <= 3) { icon = '‚õÖ'; desc = 'Nublado'; }
                else if (code >= 45 && code <= 48) { icon = 'üå´Ô∏è'; desc = 'Niebla'; }
                else if (code >= 51 && code <= 67) { icon = 'üåßÔ∏è'; desc = 'Lluvia'; }
                else if (code >= 71) { icon = '‚ùÑÔ∏è'; desc = 'Nieve'; }
                else if (code >= 95) { icon = '‚õàÔ∏è'; desc = 'Tormenta'; }

                // Actualizar HTML del Tiempo
                weatherContainer.querySelector('.weather-temp').innerText = `${Math.round(data.current_weather.temperature)}¬∞C`;
                weatherContainer.querySelector('.weather-desc').innerText = `${desc} en ${coords.name}`;
                weatherContainer.querySelector('.weather-icon').innerText = icon;
                
            } catch (error) {
                console.log("Error clima", error);
            }
        }
    }

    function saveDiary(etapaId, text) {
        localStorage.setItem(`diary_text_${etapaId}`, text);
        const statusSpan = document.getElementById(`status-${etapaId}`);
        if(statusSpan) {
            statusSpan.innerText = "Guardado ‚úÖ";
            setTimeout(() => statusSpan.innerText = "Autoguardado activo", 2000);
        }
    }


    // --- L√ìGICA VISTA LISTA VS DETALLE ---
function switchView(mode, btn) {
    const container = document.querySelector('.etapas-container');
    
    // 1. Buscamos TODOS los botones del selector (usando la nueva clase 'pro')
    const buttons = document.querySelectorAll('.view-btn-pro');
    
    // 2. Les quitamos la clase 'active' a todos (los "apagamos")
    buttons.forEach(b => {
        b.classList.remove('active');
    });
    
    // 3. Activamos SOLO el bot√≥n que has pulsado
    if(btn) {
        btn.classList.add('active');
    }

    // 4. Cambiamos el modo de visualizaci√≥n
    if (mode === 'list') {
        container.classList.add('list-mode');
    } else {
        container.classList.remove('list-mode');
    }
    
    // 5. Guardamos la preferencia
    localStorage.setItem('viewMode', mode);
}

    // --- L√ìGICA MOCHILA ---
    function updateBackpack() {
        const inputs = document.querySelectorAll('.backpack-item input');
        let checkedCount = 0;
        
        inputs.forEach(input => {
            // Guardar estado
            localStorage.setItem(input.id, input.checked);
            if(input.checked) checkedCount++;
        });

        // Calcular porcentaje visual
        const percent = inputs.length > 0 ? Math.round((checkedCount / inputs.length) * 100) : 0;
        const progressSpan = document.getElementById('backpack-progress');
        if(progressSpan) progressSpan.innerText = percent;
    }

    function loadBackpackState() {
        const inputs = document.querySelectorAll('.backpack-item input');
        inputs.forEach(input => {
            const isChecked = localStorage.getItem(input.id) === 'true';
            input.checked = isChecked;
        });
        updateBackpack(); // Actualizar texto inicial
    }

    // --- CARGAR AL INICIO ---
    // A√±adimos esto para que se ejecute al abrir la p√°gina
    document.addEventListener('DOMContentLoaded', function() {
        // Cargar mochila
        loadBackpackState();
        
        // Cargar vista preferida
    const savedView = localStorage.getItem('viewMode');
    if(savedView === 'list') {
        const listBtn = document.querySelectorAll('.view-btn-pro')[1]; // El segundo bot√≥n es 'Lista'
        if(listBtn) switchView('list', listBtn);
    }
    });

    // --- L√ìGICA DE EMERGENCIA Y GPS ---
    function openEmergencyModal() {
        openModal('modalSOS');
        // Intentamos obtener la ubicaci√≥n autom√°ticamente al abrir
        getLocation();
    }

    function getLocation() {
        const locBox = document.getElementById('sos-location');
        locBox.innerHTML = "üì° Localizando...";
        
        if (navigator.geolocation) {
            navigator.geolocation.getCurrentPosition(showPosition, showError);
        } else {
            locBox.innerHTML = "GPS no soportado.";
        }
    }

    function showPosition(position) {
        const lat = position.coords.latitude.toFixed(5);
        const lon = position.coords.longitude.toFixed(5);
        const locBox = document.getElementById('sos-location');
        
        // Generamos enlace directo a Google Maps
        locBox.innerHTML = `
            <strong>Lat:</strong> ${lat}<br><strong>Lon:</strong> ${lon}<br>
            <a href="https://www.google.com/maps?q=${lat},${lon}" target="_blank" style="display:inline-block; margin-top:8px; color:#3498db; text-decoration:none; font-weight:bold;">
                üó∫Ô∏è Ver en Mapa
            </a>
        `;
    }

    function showError(error) {
        const locBox = document.getElementById('sos-location');
        switch(error.code) {
            case error.PERMISSION_DENIED:
                locBox.innerHTML = "‚ö†Ô∏è Acceso GPS denegado.";
                break;
            case error.POSITION_UNAVAILABLE:
                locBox.innerHTML = "‚ö†Ô∏è Se√±al GPS no disponible.";
                break;
            case error.TIMEOUT:
                locBox.innerHTML = "‚ö†Ô∏è Tiempo agotado.";
                break;
            default:
                locBox.innerHTML = "‚ö†Ô∏è Error desconocido.";
                break;
        }
    }

    // --- L√ìGICA DEL GESTOR DE GASTOS ---

// Funci√≥n para guardar gastos en localStorage
function saveExpense(etapaId, category, value) {
    let expenses = JSON.parse(localStorage.getItem('camino_gastos')) || {};
    if (!expenses[etapaId]) expenses[etapaId] = {};
    
    expenses[etapaId][category] = parseFloat(value) || 0;
    localStorage.setItem('camino_gastos', JSON.stringify(expenses));
    
    updateVisualTotals(etapaId);
}

// Actualiza los subtotales de la etapa en el modal
function updateVisualTotals(etapaId) {
    let expenses = JSON.parse(localStorage.getItem('camino_gastos')) || {};
    let etapaData = expenses[etapaId] || {};
    
    let subtotal = (etapaData.alojamiento || 0) + (etapaData.comida || 0) + (etapaData.otros || 0);
    
    // Construimos el ID del modal (ej: etapa1 -> modalEtapa1)
    const modalFullId = 'modal' + etapaId.charAt(0).toUpperCase() + etapaId.slice(1);
    const modal = document.getElementById(modalFullId);
    
    if (modal) {
        const subtotalSpan = modal.querySelector('.subtotal-etapa');
        if (subtotalSpan) subtotalSpan.innerText = subtotal.toFixed(2);
    }
}

// Carga los datos guardados al abrir el modal
function loadExpensesIntoModal(etapaId) {
    let expenses = JSON.parse(localStorage.getItem('camino_gastos')) || {};
    let etapaData = expenses[etapaId] || {};
    
    const modalFullId = 'modal' + etapaId.charAt(0).toUpperCase() + etapaId.slice(1);
    const modal = document.getElementById(modalFullId);
    
    if (modal) {
        modal.querySelectorAll('.expense-input').forEach(input => {
            const cat = input.dataset.cat;
            input.value = etapaData[cat] || "";
        });
        updateVisualTotals(etapaId);
    }
}

// Listener global para detectar cambios en los inputs de gastos
document.addEventListener('input', function(e) {
    if (e.target.classList.contains('expense-input')) {
        const modal = e.target.closest('.modal-backdrop');
        if (modal) {
            const etapaId = modal.id.replace('modal', '').toLowerCase();
            // 1. Guarda el gasto individual
            saveExpense(etapaId, e.target.dataset.cat, e.target.value);
            // 2. Recalcula el total de la cabecera principal
            refreshGlobalTotal(); 
        }
    }
});

    document.addEventListener('DOMContentLoaded', function() {
    const quotes = [
        '"El camino no se hace, el camino te hace a ti."',
        '"Hecho con ‚ù§Ô∏è para Xime, Paty y Modes"',
        '"Chic@s cada paso forja nuestra alma. Seguid andando."',
        '"Un pie tras otro, Compostela nos espera."',
        '"Cada ampolla es una historia, cada paso una victoria."'
    ];
    const randomQuote = quotes[Math.floor(Math.random() * quotes.length)];
    document.getElementById('random-quote').innerText = randomQuote;
});

// Calcula la suma de todos los gastos de todas las etapas
function refreshGlobalTotal() {
    let expenses = JSON.parse(localStorage.getItem('camino_gastos')) || {};
    let totalGlobal = 0;

    // Recorremos cada etapa y sumamos sus tres categor√≠as
    Object.values(expenses).forEach(etapa => {
        totalGlobal += (etapa.alojamiento || 0) + (etapa.comida || 0) + (etapa.otros || 0);
    });

    // Actualizamos el n√∫mero en la cabecera
    const totalDisplay = document.getElementById('global-total-money');
    if (totalDisplay) {
        totalDisplay.innerText = totalGlobal.toFixed(2) + '‚Ç¨';
    }
}

// Procesa la subida de la foto
function handlePhotoUpload(etapaId, input) {
    const file = input.files[0];
    if (file) {
        const reader = new FileReader();
        reader.onload = function(e) {
            const imageData = e.target.result;
            localStorage.setItem(`photo_${etapaId}`, imageData); // Guarda en memoria local
            displayPhoto(etapaId, imageData);
        };
        reader.readAsDataURL(file);
    }
}

// Muestra la foto en el contenedor
function displayPhoto(etapaId, imageData) {
    const container = document.getElementById(`photo-container-${etapaId}`);
    if (container) {
        container.innerHTML = `<img src="${imageData}" style="width: 100%; height: 100%; object-fit: cover; cursor: pointer;" onclick="window.open('${imageData}')">`;
        container.style.border = "none";
    }
}

// Elimina la foto de la memoria
function removePhoto(etapaId) {
    if (confirm("¬øQuieres borrar esta foto?")) {
        localStorage.removeItem(`photo_${etapaId}`);
        const container = document.getElementById(`photo-container-${etapaId}`);
        if (container) {
            container.innerHTML = `<span style="color: #3498db; font-size: 0.9em; font-weight: 500;">Captura un momento especial</span>`;
            container.style.border = "2px dashed #3498db";
        }
    }
}

// 1. Motor de subida: Convierte la foto en datos y los guarda en el navegador
function handlePhotoUpload(etapaId, input) {
    const file = input.files[0];
    if (file) {
        const reader = new FileReader();
        reader.onload = function(e) {
            const imageData = e.target.result;
            // ESTO ES LO QUE HACE QUE NO SE BORRE AL ACTUALIZAR
            localStorage.setItem(`photo_${etapaId}`, imageData); 
            displayPhoto(etapaId, imageData);
        };
        reader.readAsDataURL(file);
    }
}

// 2. Motor visual: Pone la imagen f√≠sicamente dentro del cuadro azul
function displayPhoto(etapaId, imageData) {
    const container = document.getElementById(`photo-container-${etapaId}`);
    if (container) {
        container.innerHTML = `<img src="${imageData}" style="width: 100%; height: 100%; object-fit: cover; cursor: pointer;" onclick="window.open('${imageData}')">`;
        container.style.border = "none";
    }
}

// 3. Motor de borrado: Limpia la memoria y el cuadro
function removePhoto(etapaId) {
    if (confirm("¬øQuieres borrar esta foto?")) {
        localStorage.removeItem(`photo_${etapaId}`);
        const container = document.getElementById(`photo-container-${etapaId}`);
        if (container) {
            container.innerHTML = `<span style="color: #3498db; font-size: 0.9em; font-weight: 500;">Captura un momento especial</span>`;
            container.style.border = "2px dashed #3498db";
        }
    }
}

    </script>

    <footer>
    <div class="footer-content">
        <svg class="shell-icon" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
            <path d="M50 90 C 20 90, 5 60, 10 30 C 15 10, 85 10, 90 30 C 95 60, 80 90, 50 90 Z" fill="#f1c40f" />
            <line x1="50" y1="90" x2="50" y2="15" stroke="#2c3e50" stroke-width="3" stroke-linecap="round" />
            <line x1="50" y1="90" x2="25" y2="25" stroke="#2c3e50" stroke-width="3" stroke-linecap="round" />
            <line x1="50" y1="90" x2="75" y2="25" stroke="#2c3e50" stroke-width="3" stroke-linecap="round" />
            <line x1="50" y1="90" x2="15" y2="45" stroke="#2c3e50" stroke-width="3" stroke-linecap="round" />
            <line x1="50" y1="90" x2="85" y2="45" stroke="#2c3e50" stroke-width="3" stroke-linecap="round" />
        </svg>
        
        <div class="footer-quote" id="random-quote">"El camino no se hace, el camino te hace a ti."</div>
        
        <div class="footer-nav">
            <a href="#" onclick="openModal('modalMochila')">üéí Mi Mochila</a>
            <a href="https://www.caminodesantiago.gal" target="_blank">üåê Web Oficial</a>
            <a href="javascript:void(0)" onclick="window.scrollTo({top: 0, behavior: 'smooth'})">‚¨ÜÔ∏è Volver arriba</a>
        </div>

        <div class="copyright">
            ¬© 2026 - Gu√≠a Personal del Camino Portugu√©s de la Costa<br>
            ¬°Buen Camino, Peregrino! üë£
        </div>
    </div>
</footer>

</body>
</html>